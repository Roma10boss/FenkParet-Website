(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[122],{3243:function(e,r,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/orders",function(){return a(6451)}])},6451:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return _}});var s=a(567),n=a(5893),l=a(7294),i=a(5675),c=a.n(i),o=a(9008),d=a.n(o),m=a(1664),u=a.n(m),h=a(1163),x=a(6162),p=a(7702);let v=l.forwardRef(function(e,r){var{title:a,titleId:s}=e,n=(0,p._)(e,["title","titleId"]);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},n),a?l.createElement("title",{id:s},a):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))});var f=a(5407),g=a(1429),j=a(9711),b=a(807),w=a(4874),N=a(2490),y=a(1837),k=a(7066),E=a(6501),Z=a(9274);function _(){let e=(0,h.useRouter)(),{user:r,isAuthenticated:a,loading:i}=(0,N.a)(),o=e=>"$".concat(e.toFixed(2)),m=e=>new Date(e).toLocaleDateString(),{mounted:p}=(0,y.F)(),[_,C]=(0,l.useState)([]),[L,M]=(0,l.useState)(!0),[O,S]=(0,l.useState)("all"),[I,R]=(0,l.useState)(1),[B,A]=(0,l.useState)(1),F=i||L||!p;(0,l.useEffect)(()=>{if(p&&!i&&!a){E.Am.error("You must be logged in to view orders."),e.push("/auth/login");return}},[a,i,p,e]),(0,l.useEffect)(()=>{r&&p&&!i&&W()},[r,p,i,W]);let W=(0,l.useCallback)(async()=>{try{M(!0),(0,s._)({page:I,limit:10},"all"!==O&&{status:O});let e=localStorage.getItem("token"),r=await k.Z.get("".concat("https://fenkparet-backend.onrender.com","/api/orders/my-orders"),{headers:{Authorization:"Bearer ".concat(e)}});C(r.data.orders),A(r.data.pagination.pages)}catch(e){console.error("Error fetching orders:",e),E.Am.error("Failed to load orders.")}finally{M(!1)}},[I,O]),P=e=>{switch(e){case"pending":case"payment-pending":return(0,n.jsx)(x.Z,{className:"w-5 h-5 text-warning-color"});case"confirmed":case"processing":return(0,n.jsx)(v,{className:"w-5 h-5 text-info-color"});case"shipped":return(0,n.jsx)(f.Z,{className:"w-5 h-5 text-primary-color"});case"delivered":return(0,n.jsx)(g.Z,{className:"w-5 h-5 text-success-color"});case"cancelled":return(0,n.jsx)(j.Z,{className:"w-5 h-5 text-error-color"});default:return(0,n.jsx)(x.Z,{className:"w-5 h-5 text-theme-tertiary"})}},D=e=>{switch(e){case"pending":case"payment-pending":return"badge-warning";case"confirmed":case"processing":return"badge-info";case"shipped":return"badge-primary";case"delivered":return"badge-success";case"cancelled":return"badge-danger";default:return"badge-secondary"}};return F?(0,n.jsx)(Z.h,{message:"Loading your orders..."}):r?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(d(),{children:[(0,n.jsx)("title",{children:"My Orders | Fenkparet"}),(0,n.jsx)("meta",{name:"description",content:"View your order history and track your purchases from Fenkparet."}),(0,n.jsx)("meta",{name:"robots",content:"noindex, nofollow"})]}),(0,n.jsx)("div",{className:"min-h-screen bg-theme-primary py-8 theme-transition",children:(0,n.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-theme-primary",children:"Order History"}),(0,n.jsx)("p",{className:"text-theme-secondary mt-2",children:"Track and manage your orders"})]}),(0,n.jsx)("div",{className:"mb-6",children:(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:[{value:"all",label:"All Orders"},{value:"pending",label:"Pending"},{value:"payment-pending",label:"Payment Pending"},{value:"confirmed",label:"Confirmed"},{value:"processing",label:"Processing"},{value:"shipped",label:"Shipped"},{value:"delivered",label:"Delivered"},{value:"cancelled",label:"Cancelled"}].map(e=>(0,n.jsx)("button",{onClick:()=>{S(e.value),R(1)},className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat(O===e.value?"bg-accent text-accent-contrast":"bg-theme-tertiary text-theme-secondary border border-theme hover:bg-theme-secondary hover:text-theme-primary"),children:e.label},e.value))})}),(0,n.jsx)("div",{className:"space-y-6",children:L?(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)("div",{className:"spinner w-8 h-8 text-accent mx-auto"}),(0,n.jsx)("p",{className:"text-theme-secondary mt-4",children:"Loading orders..."})]}):0===_.length?(0,n.jsxs)("div",{className:"text-center py-12 card",children:[(0,n.jsx)(b.Z,{className:"w-16 h-16 text-theme-tertiary mx-auto mb-4"}),(0,n.jsx)("h3",{className:"text-lg font-medium text-theme-primary mb-2",children:"No Orders Found"}),(0,n.jsx)("p",{className:"text-theme-secondary mb-6",children:"You haven't placed any orders yet."}),(0,n.jsx)(u(),{href:"/products",className:"btn-primary",children:"Start Shopping"})]}):_.map(e=>{var r,a;return(0,n.jsx)("div",{className:"card",children:(0,n.jsx)("div",{className:"card-body",children:(0,n.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[P(e.status),(0,n.jsxs)("span",{className:"font-medium text-theme-primary",children:["#",e.orderNumber]})]}),(0,n.jsx)("span",{className:"badge ".concat(D(e.status)),children:t("order.status.".concat(e.status))||e.status})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-theme-secondary",children:"order.orderDate"}),(0,n.jsx)("p",{className:"font-medium text-theme-primary",children:m(e.createdAt)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-theme-secondary",children:"order.orderTotal"}),(0,n.jsx)("p",{className:"font-medium text-theme-primary",children:o(e.pricing.total)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-theme-secondary",children:"order.itemsCount"}),(0,n.jsxs)("p",{className:"font-medium text-theme-primary",children:[e.items.length," ",1===e.items.length?"common.item":"common.items"]})]})]}),(0,n.jsx)("div",{className:"border-t border-theme pt-4",children:(0,n.jsxs)("div",{className:"space-y-2",children:[e.items.slice(0,2).map((e,r)=>{var a,s,l,i;return(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("div",{className:"w-12 h-12 bg-theme-secondary rounded-md flex items-center justify-center",children:(null===(l=e.product)||void 0===l?void 0:null===(s=l.images)||void 0===s?void 0:null===(a=s[0])||void 0===a?void 0:a.url)?(0,n.jsx)(c(),{src:e.product.images[0].url,alt:e.product.name,width:48,height:48,className:"w-full h-full object-cover rounded-md"}):(0,n.jsx)(b.Z,{className:"w-6 h-6 text-theme-tertiary"})}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("p",{className:"text-sm font-medium text-theme-primary",children:(null===(i=e.product)||void 0===i?void 0:i.name)||"common.product"}),(0,n.jsxs)("p",{className:"text-sm text-theme-secondary",children:["Qty: ",e.quantity," \xd7 ",o(e.price)]})]})]},r)}),e.items.length>2&&(0,n.jsxs)("p",{className:"text-sm text-theme-secondary",children:["+",e.items.length-2," ","order.moreItems"]})]})})]}),(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 mt-6 lg:mt-0 lg:ml-6",children:[(0,n.jsxs)(u(),{href:"/orders/".concat(e._id),className:"btn-outline btn-sm inline-flex items-center",children:[(0,n.jsx)(w.Z,{className:"w-4 h-4 mr-2"}),"order.orderDetails"]}),"shipped"===e.status&&e.trackingNumber&&(0,n.jsxs)("button",{onClick:()=>{window.open("/track/".concat(e.trackingNumber),"_blank")},className:"btn-primary btn-sm inline-flex items-center",children:[(0,n.jsx)(f.Z,{className:"w-4 h-4 mr-2"}),"order.trackOrder"]}),"delivered"===e.status&&(0,n.jsx)(u(),{href:"/products/".concat(null===(a=e.items[0])||void 0===a?void 0:null===(r=a.product)||void 0===r?void 0:r._id,"?review=true"),className:"btn-secondary btn-sm",children:"order.writeReview"})]})]})})},e._id)})}),B>1&&(0,n.jsx)("div",{className:"mt-8 flex justify-center",children:(0,n.jsxs)("div",{className:"pagination",children:[(0,n.jsx)("button",{onClick:()=>R(I-1),disabled:1===I,className:"pagination-item",children:"common.previous"}),[...Array(B)].map((e,r)=>(0,n.jsx)("button",{onClick:()=>R(r+1),className:"pagination-item ".concat(I===r+1?"active":""),children:r+1},r+1)),(0,n.jsx)("button",{onClick:()=>R(I+1),disabled:I===B,className:"pagination-item",children:"common.next"})]})})]})})]}):null}},1429:function(e,r,a){"use strict";var s=a(7702),n=a(7294);let l=n.forwardRef(function(e,r){var{title:a,titleId:l}=e,i=(0,s._)(e,["title","titleId"]);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":l},i),a?n.createElement("title",{id:l},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});r.Z=l},6162:function(e,r,a){"use strict";var s=a(7702),n=a(7294);let l=n.forwardRef(function(e,r){var{title:a,titleId:l}=e,i=(0,s._)(e,["title","titleId"]);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":l},i),a?n.createElement("title",{id:l},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});r.Z=l},4874:function(e,r,a){"use strict";var s=a(7702),n=a(7294);let l=n.forwardRef(function(e,r){var{title:a,titleId:l}=e,i=(0,s._)(e,["title","titleId"]);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":l},i),a?n.createElement("title",{id:l},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))});r.Z=l},807:function(e,r,a){"use strict";var s=a(7702),n=a(7294);let l=n.forwardRef(function(e,r){var{title:a,titleId:l}=e,i=(0,s._)(e,["title","titleId"]);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":l},i),a?n.createElement("title",{id:l},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))});r.Z=l},5407:function(e,r,a){"use strict";var s=a(7702),n=a(7294);let l=n.forwardRef(function(e,r){var{title:a,titleId:l}=e,i=(0,s._)(e,["title","titleId"]);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":l},i),a?n.createElement("title",{id:l},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"}))});r.Z=l},9711:function(e,r,a){"use strict";var s=a(7702),n=a(7294);let l=n.forwardRef(function(e,r){var{title:a,titleId:l}=e,i=(0,s._)(e,["title","titleId"]);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":l},i),a?n.createElement("title",{id:l},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});r.Z=l}},function(e){e.O(0,[66,888,774,179],function(){return e(e.s=3243)}),_N_E=e.O()}]);