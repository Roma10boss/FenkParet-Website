(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[189],{2833:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dashboard",function(){return r(5173)}])},8771:function(e,t,r){"use strict";var n=r(5893);r(7294);let a=e=>{let{title:t,chartType:r}=e;return(0,n.jsxs)("div",{className:"admin-card",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold mb-4",children:t}),(0,n.jsx)("div",{className:"h-64 flex items-center justify-center bg-gray-100 rounded-md",children:(0,n.jsxs)("p",{className:"text-gray-500",children:["A beautiful ",r," chart will be here."]})})]})};t.Z=e=>{let{chartsData:t}=e;return t?(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)(a,{title:"Sales Over Time",chartType:"line"}),(0,n.jsx)(a,{title:"Order Status Distribution",chartType:"pie"}),(0,n.jsx)(a,{title:"Top Selling Products",chartType:"bar"})]}):null}},3206:function(e,t,r){"use strict";r.d(t,{Z:function(){return h}});var n=r(567),a=r(5893),s=r(7294),i=r(7702);let l=s.forwardRef(function(e,t){var{title:r,titleId:n}=e,a=(0,i._)(e,["title","titleId"]);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"}))});var c=r(2424);let o=s.forwardRef(function(e,t){var{title:r,titleId:n}=e,a=(0,i._)(e,["title","titleId"]);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});var d=r(4931),u=r(5892),m=r(2044);let v=e=>{let{title:t,value:r,change:n,changeType:s,icon:i,format:o="number"}=e,d="positive"===s?l:"negative"===s?c.Z:null;return(0,a.jsx)("div",{className:"admin-card admin-fade-in group hover:shadow-xl",children:(0,a.jsx)("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)("div",{className:"stat-card-icon group-hover:scale-110 transition-all duration-300",children:i&&"function"==typeof i?(0,a.jsx)(i,{className:"w-6 h-6"}):(0,a.jsx)("div",{className:"w-6 h-6 flex items-center justify-center text-xl",children:"\uD83D\uDCCA"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-theme-secondary uppercase tracking-wide",children:t}),void 0!==n&&d&&"function"==typeof d&&(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-sm font-semibold ".concat("positive"===s?"text-success-color":"text-error-color"),children:[(0,a.jsx)(d,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:[Math.abs(n).toFixed(1),"%"]})]})]})]}),(0,a.jsx)("p",{className:"text-3xl font-bold text-theme-primary group-hover:scale-105 transition-transform origin-left",children:(e=>{switch(o){case"currency":return"$".concat(e.toLocaleString());case"percentage":return"".concat(e.toFixed(2),"%");default:return e.toLocaleString()}})(r)})]})})})};var h=e=>{var t,r,s,i,l,c,h,p,x,g,f,j,y,b,w,N,k,E,_,C;let{stats:T}=e;if(!T)return(0,a.jsx)("div",{className:"admin-grid admin-grid-cols-4",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)("div",{className:"admin-card",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-theme-secondary rounded-xl admin-skeleton"}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsx)("div",{className:"w-24 h-4 bg-theme-secondary rounded admin-skeleton"}),(0,a.jsx)("div",{className:"w-16 h-8 bg-theme-secondary rounded admin-skeleton"})]})]})},t))});let D=[{title:"Total Revenue",value:null!==(y=null===(t=T.revenue)||void 0===t?void 0:t.current)&&void 0!==y?y:0,change:null===(r=T.revenue)||void 0===r?void 0:r.change,changeType:null!==(b=null===(s=T.revenue)||void 0===s?void 0:s.changeType)&&void 0!==b?b:"neutral",format:"currency",icon:o},{title:"Total Orders",value:null!==(w=null===(i=T.orders)||void 0===i?void 0:i.current)&&void 0!==w?w:0,change:null===(l=T.orders)||void 0===l?void 0:l.change,changeType:null!==(N=null===(c=T.orders)||void 0===c?void 0:c.changeType)&&void 0!==N?N:"neutral",icon:d.Z},{title:"New Customers",value:null!==(k=null===(h=T.customers)||void 0===h?void 0:h.current)&&void 0!==k?k:0,change:null===(p=T.customers)||void 0===p?void 0:p.change,changeType:null!==(E=null===(x=T.customers)||void 0===x?void 0:x.changeType)&&void 0!==E?E:"neutral",icon:u.Z},{title:"Conversion Rate",value:null!==(_=null===(g=T.conversionRate)||void 0===g?void 0:g.current)&&void 0!==_?_:0,change:null===(f=T.conversionRate)||void 0===f?void 0:f.change,changeType:null!==(C=null===(j=T.conversionRate)||void 0===j?void 0:j.changeType)&&void 0!==C?C:"neutral",format:"percentage",icon:m.Z}];return(0,a.jsx)("div",{className:"admin-grid admin-grid-cols-4",children:D.map((e,t)=>(0,a.jsx)("div",{className:"admin-scale-in",style:{animationDelay:"".concat(.1*t,"s")},children:(0,a.jsx)(v,(0,n._)({},e))},t))})}},5173:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var n=r(567),a=r(4932),s=r(5893),i=r(7294),l=r(1163),c=r(2490),o=r(3206);let d=e=>{let{activity:t}=e,{user:r,action:n,target:a,createdAt:i}=t;return(0,s.jsxs)("div",{className:"activity-item flex items-center py-3",children:[(0,s.jsx)("div",{className:"activity-item-icon w-8 h-8 rounded-full flex items-center justify-center mr-4",children:"\uD83D\uDC65"}),(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsxs)("p",{className:"text-sm",children:[(0,s.jsx)("span",{className:"font-semibold",children:r})," ",n," ",(0,s.jsx)("span",{className:"font-semibold",children:a})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:new Date(i).toLocaleString()})]})]})};var u=e=>{let{recentOrders:t,pendingPayments:r}=e,i=[...t.map(e=>(0,a._)((0,n._)({},e),{type:"order"})),...r.map(e=>(0,a._)((0,n._)({},e),{type:"payment"}))].sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt));return(0,s.jsxs)("div",{className:"admin-card",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Recent Activity"}),(0,s.jsx)("div",{children:i.map(e=>(0,s.jsx)(d,{activity:e},e.id))})]})},m=r(2508),v=r(4931),h=r(5892),p=r(7702);let x=i.forwardRef(function(e,t){var{title:r,titleId:n}=e,a=(0,p._)(e,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},a),r?i.createElement("title",{id:n},r):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}),g=i.forwardRef(function(e,t){var{title:r,titleId:n}=e,a=(0,p._)(e,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},a),r?i.createElement("title",{id:n},r):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}),f=i.forwardRef(function(e,t){var{title:r,titleId:n}=e,a=(0,p._)(e,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},a),r?i.createElement("title",{id:n},r):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25M9 16.5v.75m3-3v3M15 12v5.25m-4.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}),j=e=>{let{title:t,icon:r,onClick:n,loading:a,disabled:i}=e;return(0,s.jsxs)("button",{onClick:n,disabled:i||a,className:"admin-button w-full flex items-center justify-center p-4 disabled:opacity-50 disabled:cursor-not-allowed hover:transform hover:scale-105 transition-all duration-200",children:[(0,s.jsx)("div",{className:"mr-3",children:a?(0,s.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):r?(0,s.jsx)(r,{className:"w-5 h-5"}):(0,s.jsx)("span",{className:"text-lg",children:"\uD83D\uDCCA"})}),(0,s.jsx)("div",{className:"font-medium",children:a?"Chargement...":t})]})};var y=()=>{let e=(0,l.useRouter)(),[t,r]=(0,i.useState)(null),c=async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r(t);try{if(n){e.push(n);return}switch(await new Promise(e=>setTimeout(e,1e3)),t){case"export":console.log("Exporting data...");break;case"newsletter":console.log("Sending newsletter...");break;case"sync":console.log("Syncing inventory...");break;case"cache":console.log("Clearing cache...");break;case"reports":console.log("Generating reports...");break;case"backup":console.log("Backing up database...");break;default:console.log("Action:",t)}}catch(e){console.error("Erreur d'action:",e)}finally{setTimeout(()=>r(null),1e3)}},o=[{title:"G\xe9rer les produits",icon:m.Z,onClick:()=>c("products","/admin/products"),type:"products"},{title:"Voir les commandes",icon:v.Z,onClick:()=>c("orders","/admin/orders"),type:"orders"},{title:"G\xe9rer les utilisateurs",icon:h.Z,onClick:()=>c("users","/admin/users"),type:"users"},{title:"Tickets de support",icon:x,onClick:()=>c("tickets","/admin/tickets"),type:"tickets"},{title:"Exporter les donn\xe9es",icon:g,onClick:()=>c("export"),type:"export"},{title:"G\xe9n\xe9rer des rapports",icon:f,onClick:()=>c("reports"),type:"reports"}];return(0,s.jsxs)("div",{className:"admin-card",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold mb-6 text-theme-primary",children:"Actions rapides"}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map((e,r)=>(0,s.jsx)(j,(0,a._)((0,n._)({},e),{loading:t===e.type,disabled:t&&t!==e.type}),r))})]})},b=r(8771);function w(){let e=(0,l.useRouter)(),{user:t,loading:r,isAuthenticated:d,isAdmin:m}=(0,c.a)(),[v,h]=(0,i.useState)({stats:null,recentOrders:[],pendingPayments:[],chartsData:null,loading:!0,error:null});return((0,i.useEffect)(()=>{r||d?r||m||e.push("/"):e.push("/admin/login")},[t,r,d,m,e]),(0,i.useEffect)(()=>{let e=async()=>{if(m&&d)try{let i=localStorage.getItem("token"),l=await fetch("".concat("https://fenkparet-backend.onrender.com","/api/admin/dashboard"),{headers:{Authorization:"Bearer ".concat(i),"Content-Type":"application/json"}});if(l.ok){var e,t,r,s;let n=await l.json();h({stats:{revenue:(null===(e=n.stats)||void 0===e?void 0:e.revenue)||{current:0,change:0,changeType:"neutral"},orders:(null===(t=n.stats)||void 0===t?void 0:t.orders)||{current:0,change:0,changeType:"neutral"},customers:(null===(r=n.stats)||void 0===r?void 0:r.customers)||{current:0,change:0,changeType:"neutral"},conversionRate:(null===(s=n.stats)||void 0===s?void 0:s.conversionRate)||{current:0,change:0,changeType:"neutral"}},recentOrders:n.recentOrders||[],pendingPayments:n.pendingPayments||[],chartsData:n.chartsData||{},loading:!1,error:null})}else h(e=>(0,a._)((0,n._)({},e),{error:"Failed to fetch data (".concat(l.status,")"),loading:!1}))}catch(e){h(t=>(0,a._)((0,n._)({},t),{error:e.message,loading:!1}))}};t&&m&&e()},[t,m,d]),r||v.loading)?(0,s.jsx)("div",{className:"admin-dashboard",children:(0,s.jsx)("div",{className:"admin-card",children:"Loading..."})}):v.error?(0,s.jsx)("div",{className:"admin-dashboard",children:(0,s.jsxs)("div",{className:"admin-card",children:["Error: ",v.error]})}):(0,s.jsxs)("div",{className:"admin-dashboard",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Tableau de bord administrateur"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsx)(o.Z,{stats:v.stats})}),(0,s.jsx)("div",{children:(0,s.jsx)(y,{})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsx)(u,{recentOrders:v.recentOrders,pendingPayments:v.pendingPayments})}),(0,s.jsx)("div",{children:(0,s.jsx)(b.Z,{chartsData:v.chartsData})})]})]})}},2424:function(e,t,r){"use strict";var n=r(7702),a=r(7294);let s=a.forwardRef(function(e,t){var{title:r,titleId:s}=e,i=(0,n._)(e,["title","titleId"]);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"}))});t.Z=s}},function(e){e.O(0,[888,774,179],function(){return e(e.s=2833)}),_N_E=e.O()}]);