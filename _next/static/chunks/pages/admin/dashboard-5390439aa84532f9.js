(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[189],{2833:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dashboard",function(){return n(5173)}])},8771:function(e,t,n){"use strict";var a=n(5893);n(7294);let r=e=>{let{title:t,chartType:n}=e;return(0,a.jsxs)("div",{className:"admin-card",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:t}),(0,a.jsx)("div",{className:"h-64 flex items-center justify-center bg-gray-100 rounded-md",children:(0,a.jsxs)("p",{className:"text-gray-500",children:["A beautiful ",n," chart will be here."]})})]})};t.Z=e=>{let{chartsData:t}=e;return t?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(r,{title:"Sales Over Time",chartType:"line"}),(0,a.jsx)(r,{title:"Order Status Distribution",chartType:"pie"}),(0,a.jsx)(r,{title:"Top Selling Products",chartType:"bar"})]}):null}},8455:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var a={};n.r(a);var r=n(567),s=n(5893),i=n(7294),l=n(7702);let c=i.forwardRef(function(e,t){var{title:n,titleId:a}=e,r=(0,l._)(e,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),n?i.createElement("title",{id:a},n):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});var o=n(4931),d=n(5892),u=n(2044);let m=e=>{let{title:t,value:n,change:r,changeType:i,icon:l,format:c="number"}=e,o="positive"===i?a.TrendingUpIcon:"negative"===i?a.TrendingDownIcon:null;return(0,s.jsx)("div",{className:"admin-card admin-fade-in group hover:shadow-xl",children:(0,s.jsx)("div",{className:"flex items-start justify-between",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,s.jsx)("div",{className:"stat-card-icon group-hover:scale-110 transition-all duration-300",children:l&&"function"==typeof l?(0,s.jsx)(l,{className:"w-6 h-6"}):(0,s.jsx)("div",{className:"w-6 h-6 flex items-center justify-center text-xl",children:"\uD83D\uDCCA"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-theme-secondary uppercase tracking-wide",children:t}),void 0!==r&&o&&"function"==typeof o&&(0,s.jsxs)("div",{className:"flex items-center space-x-1 text-sm font-semibold ".concat("positive"===i?"text-success-color":"text-error-color"),children:[(0,s.jsx)(o,{className:"w-4 h-4"}),(0,s.jsxs)("span",{children:[Math.abs(r).toFixed(1),"%"]})]})]})]}),(0,s.jsx)("p",{className:"text-3xl font-bold text-theme-primary group-hover:scale-105 transition-transform origin-left",children:(e=>{switch(c){case"currency":return"$".concat(e.toLocaleString());case"percentage":return"".concat(e.toFixed(2),"%");default:return e.toLocaleString()}})(n)})]})})})};var h=e=>{var t,n,a,i,l,h,v,x,g,p,f,j,y,b,w,N,k,_,T,C;let{stats:D}=e;if(!D)return(0,s.jsx)("div",{className:"admin-grid admin-grid-cols-4",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsx)("div",{className:"admin-card",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-theme-secondary rounded-xl admin-skeleton"}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)("div",{className:"w-24 h-4 bg-theme-secondary rounded admin-skeleton"}),(0,s.jsx)("div",{className:"w-16 h-8 bg-theme-secondary rounded admin-skeleton"})]})]})},t))});let E=[{title:"Total Revenue",value:null!==(y=null===(t=D.revenue)||void 0===t?void 0:t.current)&&void 0!==y?y:0,change:null===(n=D.revenue)||void 0===n?void 0:n.change,changeType:null!==(b=null===(a=D.revenue)||void 0===a?void 0:a.changeType)&&void 0!==b?b:"neutral",format:"currency",icon:c},{title:"Total Orders",value:null!==(w=null===(i=D.orders)||void 0===i?void 0:i.current)&&void 0!==w?w:0,change:null===(l=D.orders)||void 0===l?void 0:l.change,changeType:null!==(N=null===(h=D.orders)||void 0===h?void 0:h.changeType)&&void 0!==N?N:"neutral",icon:o.Z},{title:"New Customers",value:null!==(k=null===(v=D.customers)||void 0===v?void 0:v.current)&&void 0!==k?k:0,change:null===(x=D.customers)||void 0===x?void 0:x.change,changeType:null!==(_=null===(g=D.customers)||void 0===g?void 0:g.changeType)&&void 0!==_?_:"neutral",icon:d.Z},{title:"Conversion Rate",value:null!==(T=null===(p=D.conversionRate)||void 0===p?void 0:p.current)&&void 0!==T?T:0,change:null===(f=D.conversionRate)||void 0===f?void 0:f.change,changeType:null!==(C=null===(j=D.conversionRate)||void 0===j?void 0:j.changeType)&&void 0!==C?C:"neutral",format:"percentage",icon:u.Z}];return(0,s.jsx)("div",{className:"admin-grid admin-grid-cols-4",children:E.map((e,t)=>(0,s.jsx)("div",{className:"admin-scale-in",style:{animationDelay:"".concat(.1*t,"s")},children:(0,s.jsx)(m,(0,r._)({},e))},t))})}},5173:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var a=n(567),r=n(4932),s=n(5893),i=n(7294),l=n(1163),c=n(2490),o=n(8455);let d=e=>{let{activity:t}=e,{user:n,action:a,target:r,createdAt:i}=t;return(0,s.jsxs)("div",{className:"activity-item flex items-center py-3",children:[(0,s.jsx)("div",{className:"activity-item-icon w-8 h-8 rounded-full flex items-center justify-center mr-4",children:"\uD83D\uDC65"}),(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsxs)("p",{className:"text-sm",children:[(0,s.jsx)("span",{className:"font-semibold",children:n})," ",a," ",(0,s.jsx)("span",{className:"font-semibold",children:r})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:new Date(i).toLocaleString()})]})]})};var u=e=>{let{recentOrders:t,pendingPayments:n}=e,i=[...t.map(e=>(0,r._)((0,a._)({},e),{type:"order"})),...n.map(e=>(0,r._)((0,a._)({},e),{type:"payment"}))].sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt));return(0,s.jsxs)("div",{className:"admin-card",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Recent Activity"}),(0,s.jsx)("div",{children:i.map(e=>(0,s.jsx)(d,{activity:e},e.id))})]})},m=n(2508),h=n(4931),v=n(5892),x=n(7702);let g=i.forwardRef(function(e,t){var{title:n,titleId:a}=e,r=(0,x._)(e,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),n?i.createElement("title",{id:a},n):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}),p=i.forwardRef(function(e,t){var{title:n,titleId:a}=e,r=(0,x._)(e,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),n?i.createElement("title",{id:a},n):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}),f=i.forwardRef(function(e,t){var{title:n,titleId:a}=e,r=(0,x._)(e,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),n?i.createElement("title",{id:a},n):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25M9 16.5v.75m3-3v3M15 12v5.25m-4.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}),j=e=>{let{title:t,icon:n,onClick:a,loading:r,disabled:i}=e;return(0,s.jsxs)("button",{onClick:a,disabled:i||r,className:"admin-button w-full flex items-center justify-center p-4 disabled:opacity-50 disabled:cursor-not-allowed hover:transform hover:scale-105 transition-all duration-200",children:[(0,s.jsx)("div",{className:"mr-3",children:r?(0,s.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):n?(0,s.jsx)(n,{className:"w-5 h-5"}):(0,s.jsx)("span",{className:"text-lg",children:"\uD83D\uDCCA"})}),(0,s.jsx)("div",{className:"font-medium",children:r?"Loading...":t})]})};var y=()=>{let e=(0,l.useRouter)(),[t,n]=(0,i.useState)(null),c=async function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n(t);try{if(a)await e.push(a);else switch(await new Promise(e=>setTimeout(e,1e3)),t){case"export":console.log("Exporting data...");break;case"newsletter":console.log("Sending newsletter...");break;case"sync":console.log("Syncing inventory...");break;case"cache":console.log("Clearing cache...");break;case"reports":console.log("Generating reports...");break;case"backup":console.log("Backing up database...");break;default:console.log("Action:",t)}}catch(e){console.error("Action error:",e)}finally{n(null)}},o=[{title:"Manage Products",icon:m.Z,onClick:()=>c("products","/admin/products"),type:"products"},{title:"View Orders",icon:h.Z,onClick:()=>c("orders","/admin/orders"),type:"orders"},{title:"Manage Users",icon:v.Z,onClick:()=>c("users","/admin/users"),type:"users"},{title:"Support Tickets",icon:g,onClick:()=>c("tickets","/admin/tickets"),type:"tickets"},{title:"Export Data",icon:p,onClick:()=>c("export"),type:"export"},{title:"Generate Reports",icon:f,onClick:()=>c("reports"),type:"reports"}];return(0,s.jsxs)("div",{className:"admin-card",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold mb-6 text-theme-primary",children:"Quick Actions"}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map((e,n)=>(0,s.jsx)(j,(0,r._)((0,a._)({},e),{loading:t===e.type,disabled:t&&t!==e.type}),n))})]})},b=n(8771);function w(){let e=(0,l.useRouter)(),{user:t,loading:n,isAuthenticated:d,isAdmin:m}=(0,c.a)(),[h,v]=(0,i.useState)({stats:null,recentOrders:[],pendingPayments:[],chartsData:null,loading:!0,error:null});return((0,i.useEffect)(()=>{n||d?n||m||e.push("/"):e.push("/admin/login")},[t,n,d,m,e]),(0,i.useEffect)(()=>{let e=async()=>{if(m&&d)try{let i=localStorage.getItem("token"),l=await fetch("".concat("https://fenkparet-backend.onrender.com","/admin/dashboard"),{headers:{Authorization:"Bearer ".concat(i),"Content-Type":"application/json"}});if(l.ok){var e,t,n,s;let a=await l.json();v({stats:{revenue:(null===(e=a.stats)||void 0===e?void 0:e.revenue)||{current:0,change:0,changeType:"neutral"},orders:(null===(t=a.stats)||void 0===t?void 0:t.orders)||{current:0,change:0,changeType:"neutral"},customers:(null===(n=a.stats)||void 0===n?void 0:n.customers)||{current:0,change:0,changeType:"neutral"},conversionRate:(null===(s=a.stats)||void 0===s?void 0:s.conversionRate)||{current:0,change:0,changeType:"neutral"}},recentOrders:a.recentOrders||[],pendingPayments:a.pendingPayments||[],chartsData:a.chartsData||{},loading:!1,error:null})}else v(e=>(0,r._)((0,a._)({},e),{error:"Failed to fetch data (".concat(l.status,")"),loading:!1}))}catch(e){v(t=>(0,r._)((0,a._)({},t),{error:e.message,loading:!1}))}};t&&m&&e()},[t,m,d]),n||h.loading)?(0,s.jsx)("div",{className:"admin-dashboard",children:(0,s.jsx)("div",{className:"admin-card",children:"Loading..."})}):h.error?(0,s.jsx)("div",{className:"admin-dashboard",children:(0,s.jsxs)("div",{className:"admin-card",children:["Error: ",h.error]})}):(0,s.jsxs)("div",{className:"admin-dashboard",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Admin Dashboard"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsx)(o.Z,{stats:h.stats})}),(0,s.jsx)("div",{children:(0,s.jsx)(y,{})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsx)(u,{recentOrders:h.recentOrders,pendingPayments:h.pendingPayments})}),(0,s.jsx)("div",{children:(0,s.jsx)(b.Z,{chartsData:h.chartsData})})]})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=2833)}),_N_E=e.O()}]);