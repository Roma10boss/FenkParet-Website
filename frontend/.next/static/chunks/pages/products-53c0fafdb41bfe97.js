(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[345],{7638:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/products",function(){return r(4240)}])},4240:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var s=r(567),a=r(5893),n=r(7294),c=r(9008),l=r.n(c),i=r(5675),o=r.n(i);r(1664);var d=r(1557),m=r(6501),x=e=>{let{product:t}=e,{addToCart:r}=(0,d.j)(),s=e=>"NEW"===e?"NOUVEAU":"FEATURED"===e?"EN VEDETTE":"LOW_STOCK"===e?"Stock faible":"";return(0,a.jsxs)("div",{className:"product-card bg-gray-800 text-gray-100 rounded-lg overflow-hidden shadow-lg",children:[t.image&&(0,a.jsxs)("div",{className:"relative h-48 w-full bg-gray-700 flex items-center justify-center",children:[(0,a.jsx)(o(),{src:t.image,alt:t.name,layout:"fill",objectFit:"cover",className:"rounded-t-lg"}),(t.discount||t.status)&&(0,a.jsxs)("div",{className:"absolute top-2 left-2 flex flex-wrap gap-1",children:[t.discount&&(0,a.jsxs)("span",{className:"bg-red-600 text-white text-xs font-semibold px-2 py-1 rounded-full",children:["-",t.discount,"%"]}),t.status&&s(t.status)&&(0,a.jsx)("span",{className:"bg-blue-600 text-white text-xs font-semibold px-2 py-1 rounded-full",children:s(t.status)}),t.lowStock&&t.stock<=10&&(0,a.jsx)("span",{className:"bg-yellow-500 text-white text-xs font-semibold px-2 py-1 rounded-full",children:"low_stock"})]})]}),!t.image&&(0,a.jsxs)("div",{className:"h-48 w-full bg-gray-700 flex items-center justify-center text-gray-400",children:[(0,a.jsx)("span",{className:"text-6xl",children:"\uD83D\uDED2"})," "]}),(0,a.jsxs)("div",{className:"p-4 flex flex-col flex-grow",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:t.name}),(0,a.jsxs)("p",{className:"text-lg font-bold text-green-400 mb-2",children:[t.price," HTG",t.oldPrice&&(0,a.jsxs)("span",{className:"text-sm text-gray-400 line-through ml-2",children:[t.oldPrice," HTG"]})]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-400 mb-4",children:[(0,a.jsx)("span",{children:"⭐"}),(0,a.jsx)("span",{children:"⭐"}),(0,a.jsx)("span",{children:"⭐"}),(0,a.jsx)("span",{children:"⭐"}),(0,a.jsx)("span",{children:"☆"})," (",t.reviews," avis)"]}),(0,a.jsxs)("button",{onClick:()=>{try{var e,s;r({id:t._id||t.id,name:t.name,price:t.price,image:(null===(s=t.images)||void 0===s?void 0:null===(e=s[0])||void 0===e?void 0:e.url)||t.image,quantity:1}),m.Am.success("".concat(t.name," ajout\xe9 au panier"))}catch(e){m.Am.error("Erreur lors de l'ajout au panier")}},className:"mt-auto btn btn-primary flex items-center justify-center space-x-2 hover:bg-blue-600 transition-colors",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.5 13 5.6 13h9.4a1 1 0 000-2H5.6l.5-1-.91-6.54c-.06-.44-.39-.79-.84-.86L3 3H1a1 1 0 000 2h1zM8 14a2 2 0 100 4 2 2 0 000-4zm-2 2a2 2 114 0 2 2 0 01-4 0zm13-2a2 2 0 100 4 2 2 0 000-4zm-2 2a2 2 114 0 2 2 0 01-4 0z"})}),(0,a.jsx)("span",{children:"Ajouter au panier"})]})]})]})},u=e=>{let{products:t}=e;return t&&0!==t.length?(0,a.jsx)("div",{className:"product-grid grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 md:gap-8",children:t.map(e=>(0,a.jsx)(x,{product:e},e._id||e.id))}):(0,a.jsx)("div",{className:"text-center text-gray-500 dark:text-gray-400 py-10",children:"No products found."})};r(4932);var h=r(7702);let g=n.forwardRef(function(e,t){var{title:r,titleId:s}=e,a=(0,h._)(e,["title","titleId"]);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},a),r?n.createElement("title",{id:s},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))});var p=r(2294),f=r(1594),b=r(7066),y=e=>{let{filters:t,onFilterChange:r,onClearAll:s}=e,[c,l]=(0,n.useState)([]),[i,o]=(0,n.useState)({min:"",max:""}),[d,m]=(0,n.useState)(!1),[x,u]=(0,n.useState)(!0);(0,n.useEffect)(()=>{h()},[]),(0,n.useEffect)(()=>{o({min:t.minPrice||"",max:t.maxPrice||""})},[t.minPrice,t.maxPrice]);let h=async()=>{try{let e=await b.Z.get("".concat("https://fenkparet-backend.onrender.com","/api/admin/categories"));l(e.data.categories||[])}catch(e){console.error("Error fetching categories:",e),l([{_id:"t-shirts",name:"T-Shirts",slug:"t-shirts"},{_id:"mugs",name:"Mugs",slug:"mugs"},{_id:"keychains",name:"Keychains",slug:"keychains"},{_id:"phone-cases",name:"Phone Cases",slug:"phone-cases"},{_id:"hoodies",name:"Hoodies",slug:"hoodies"}])}finally{u(!1)}},y=(e,t)=>{r({[e]:t})};return(0,a.jsxs)("div",{className:"bg-theme-primary rounded-lg shadow-sm border border-theme",children:[(0,a.jsx)("div",{className:"lg:hidden",children:(0,a.jsxs)("button",{onClick:()=>m(!d),className:"w-full flex items-center justify-between p-4 text-left",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(g,{className:"h-5 w-5 text-theme-secondary mr-2"}),(0,a.jsx)("span",{className:"font-medium text-theme-primary",children:"Filtres"}),(t.category||t.minPrice||t.maxPrice||t.search)&&(0,a.jsx)("span",{className:"ml-2 bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:"Actifs"})]}),(0,a.jsx)(p.Z,{className:"h-5 w-5 text-theme-secondary transition-transform ".concat(d?"rotate-180":"")})]})}),(0,a.jsxs)("div",{className:"".concat(d?"block":"hidden"," lg:block p-4 space-y-6"),children:[(t.category||t.minPrice||t.maxPrice||t.search)&&(0,a.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-theme",children:[(0,a.jsx)("span",{className:"text-sm text-theme-secondary",children:"Filtres actifs"}),(0,a.jsxs)("button",{onClick:()=>{o({min:"",max:""}),r({category:"",minPrice:"",maxPrice:"",search:""}),s&&s()},className:"flex items-center text-sm text-red-600 hover:text-red-700",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-1"}),"Tout effacer"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Recherche"}),(0,a.jsx)("input",{type:"text",value:t.search||"",onChange:e=>y("search",e.target.value),placeholder:"Rechercher des produits...",className:"w-full px-3 py-2 border border-theme-border rounded-md bg-theme-input text-theme-primary placeholder-theme-tertiary focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cat\xe9gorie"}),(0,a.jsxs)("select",{value:t.category||"",onChange:e=>y("category",e.target.value),className:"w-full px-3 py-2 border border-theme-border rounded-md bg-theme-input text-theme-primary focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent",children:[(0,a.jsx)("option",{value:"",children:"Toutes les cat\xe9gories"}),c.map(e=>(0,a.jsx)("option",{value:e._id||e.id,children:e.name},e._id||e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Gamme de prix"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"number",value:t.minPrice||"",onChange:e=>y("minPrice",e.target.value),placeholder:"Min",className:"w-full px-3 py-2 border border-theme-border rounded-md bg-theme-input text-theme-primary placeholder-theme-tertiary focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent"})}),(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"number",value:t.maxPrice||"",onChange:e=>y("maxPrice",e.target.value),placeholder:"Max",className:"w-full px-3 py-2 border border-theme-border rounded-md bg-theme-input text-theme-primary placeholder-theme-tertiary focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent"})})]}),(0,a.jsx)("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Prix en HTG"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Filtres rapides"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("button",{onClick:()=>y("featured",!t.featured),className:"w-full text-left px-3 py-2 rounded-md text-sm transition-colors ".concat(t.featured?"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"Produits vedettes"}),(0,a.jsx)("button",{onClick:()=>y("newArrivals",!t.newArrivals),className:"w-full text-left px-3 py-2 rounded-md text-sm transition-colors ".concat(t.newArrivals?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"Nouveaut\xe9s"}),(0,a.jsx)("button",{onClick:()=>y("onSale",!t.onSale),className:"w-full text-left px-3 py-2 rounded-md text-sm transition-colors ".concat(t.onSale?"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"En promotion"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-theme-primary mb-3",children:"Disponibilit\xe9"}),(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:!1!==t.inStock,onChange:e=>y("inStock",!!e.target.checked&&void 0),className:"w-4 h-4 text-accent bg-theme-input border-theme-border rounded focus:ring-accent focus:ring-2"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-theme-primary",children:"En stock"})]})})]})]})]})},j=r(2088),v=()=>{let[e,t]=(0,n.useState)([]),[r,c]=(0,n.useState)(!0),[i,o]=(0,n.useState)(null),[d,m]=(0,n.useState)({category:"",minPrice:"",maxPrice:"",search:"",sortBy:"name",sortOrder:"asc"});(0,n.useEffect)(()=>{x()},[d]);let x=(0,n.useCallback)(async()=>{try{c(!0),o(null);let e=new URLSearchParams;Object.entries(d).forEach(t=>{let[r,s]=t;s&&""!==s&&e.append(r,s)});let r=await fetch("".concat("https://fenkparet-backend.onrender.com","/api/products?").concat(e),{headers:{"Content-Type":"application/json"},mode:"cors"});if(!r.ok){if(429===r.status)throw Error("Trop de requ\xeates. Veuillez patienter et r\xe9essayer.");if(r.status>=500)throw Error("Erreur du serveur. Veuillez r\xe9essayer plus tard.");throw Error("Erreur ".concat(r.status,": ").concat(r.statusText))}let s=await r.json();t(s.products||[])}catch(e){console.error("Error fetching products:",e),o(e.message),t([{_id:"1",name:"Premium T-Shirt",price:250,comparePrice:300,images:[{url:"https://placehold.co/400x300/e8f2e8/1f2937?text=T-Shirt",alt:"Premium T-Shirt"}],inventory:{stockStatus:"in-stock"},category:{name:"T-Shirts",slug:"t-shirts"},featured:!0},{_id:"2",name:"Coffee Mug",price:150,images:[{url:"https://placehold.co/400x300/f0f7f0/1f2937?text=Coffee+Mug",alt:"Coffee Mug"}],inventory:{stockStatus:"in-stock"},category:{name:"Mugs",slug:"mugs"}}])}finally{c(!1)}},[d]),h=e=>{m(t=>(0,s._)({},t,e))};return r?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)(j.Z,{})}):i?(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Erreur de connexion"}),(0,a.jsx)("p",{className:"text-theme-secondary mb-4",children:"Impossible de charger les produits. V\xe9rifiez votre connexion internet."}),(0,a.jsxs)("p",{className:"text-sm text-theme-tertiary mb-4",children:["D\xe9tails: ",i]}),(0,a.jsx)("button",{onClick:x,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded",children:"R\xe9essayer"})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l(),{children:[(0,a.jsxs)("title",{children:["Produits - ","Fenkparet"]}),(0,a.jsx)("meta",{name:"description",content:"Parcourez notre collection compl\xe8te de produits"})]}),(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,a.jsx)("div",{className:"lg:w-1/4",children:(0,a.jsx)(y,{filters:d,onFilterChange:h})}),(0,a.jsxs)("div",{className:"lg:w-3/4",children:[(0,a.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,a.jsxs)("p",{className:"text-theme-secondary",children:[e.length," produits trouv\xe9s"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("label",{className:"text-sm text-theme-secondary",children:"Trier par:"}),(0,a.jsxs)("select",{value:"".concat(d.sortBy,"-").concat(d.sortOrder),onChange:e=>{let[t,r]=e.target.value.split("-");h({sortBy:t,sortOrder:r})},className:"border border-theme-border rounded px-3 py-1 bg-theme-input text-theme-primary focus:outline-none focus:ring-2 focus:ring-accent",children:[(0,a.jsx)("option",{value:"name-asc",children:"Nom A-Z"}),(0,a.jsx)("option",{value:"name-desc",children:"Nom Z-A"}),(0,a.jsx)("option",{value:"price-asc",children:"Prix croissant"}),(0,a.jsx)("option",{value:"price-desc",children:"Prix d\xe9croissant"}),(0,a.jsx)("option",{value:"createdAt-desc",children:"Plus r\xe9cents"})]})]})]}),(0,a.jsx)(u,{products:e}),0===e.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDECD️"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-theme-primary mb-2",children:"Aucun produit trouv\xe9"}),(0,a.jsx)("p",{className:"text-theme-secondary mb-4",children:"Essayez d'ajuster vos filtres ou termes de recherche"}),(0,a.jsx)("button",{onClick:()=>m({category:"",minPrice:"",maxPrice:"",search:"",sortBy:"name",sortOrder:"asc"}),className:"btn-primary",children:"Effacer les filtres"})]})]})]})})]})}}},function(e){e.O(0,[66,888,774,179],function(){return e(e.s=7638)}),_N_E=e.O()}]);