(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[713],{7928:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/tickets",function(){return r(6394)}])},6394:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var s=r(5893),a=r(7294),l=r(1163),i=r(2809),n=r(9761),o=r(4410),c=r(567),d=r(4932),u=e=>{var t,r;let{ticket:l,onClose:i,onSubmit:o}=e,[u,m]=(0,a.useState)({subject:(null==l?void 0:l.subject)||"",description:(null==l?void 0:l.description)||"",customerName:(null==l?void 0:null===(t=l.customer)||void 0===t?void 0:t.name)||"",customerEmail:(null==l?void 0:null===(r=l.customer)||void 0===r?void 0:r.email)||"",status:(null==l?void 0:l.status)||"open",priority:(null==l?void 0:l.priority)||"low",category:(null==l?void 0:l.category)||"other",assignedTo:(null==l?void 0:l.assignedTo)||""}),[x,h]=(0,a.useState)({}),[p,g]=(0,a.useState)(!1),{showSuccess:b,showError:j}=(0,n.V)();(0,a.useEffect)(()=>{if(l){var e,t;m({subject:l.subject||"",description:l.description||"",customerName:(null===(e=l.customer)||void 0===e?void 0:e.name)||"",customerEmail:(null===(t=l.customer)||void 0===t?void 0:t.email)||"",status:l.status||"open",priority:l.priority||"low",category:l.category||"other",assignedTo:l.assignedTo||""})}},[l]);let v=e=>{let{name:t,value:r}=e.target;m(e=>(0,d._)((0,c._)({},e),{[t]:r})),x[t]&&h(e=>(0,d._)((0,c._)({},e),{[t]:""}))},y=()=>{let e={};return u.subject.trim()||(e.subject="Subject is required"),u.description.trim()||(e.description="Description is required"),u.customerName.trim()||(e.customerName="Customer name is required"),u.customerEmail.trim()?/\S+@\S+\.\S+/.test(u.customerEmail)||(e.customerEmail="Customer email is invalid"):e.customerEmail="Customer email is required",h(e),0===Object.keys(e).length},f=async e=>{if(e.preventDefault(),y())try{g(!0);let e=(0,c._)({},u),t=l?"".concat("https://fenkparet-backend.onrender.com","/api/admin/tickets/").concat(l.id):"".concat("https://fenkparet-backend.onrender.com","/api/admin/tickets");if(!(await fetch(t,{method:l?"PUT":"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to ".concat(l?"update":"create"," ticket"));b("Ticket ".concat(l?"updated":"created"," successfully")),o()}catch(e){console.error("Error saving ticket:",e),j("Failed to ".concat(l?"update":"create"," ticket. Please try again."))}finally{g(!1)}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,s.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-4/5 lg:w-3/4 xl:w-2/3 shadow-lg rounded-md bg-white max-h-[80vh] overflow-y-auto",children:(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:l?"Edit Ticket":"Create New Ticket"}),(0,s.jsx)("button",{type:"button",onClick:i,className:"text-gray-400 hover:text-gray-600",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject *"}),(0,s.jsx)("input",{type:"text",name:"subject",value:u.subject,onChange:v,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(x.subject?"border-red-300":"border-gray-300"),placeholder:"Enter ticket subject"}),x.subject&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",children:x.subject})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),(0,s.jsx)("textarea",{name:"description",value:u.description,onChange:v,rows:4,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(x.description?"border-red-300":"border-gray-300"),placeholder:"Enter detailed description of the issue"}),x.description&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",children:x.description})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name *"}),(0,s.jsx)("input",{type:"text",name:"customerName",value:u.customerName,onChange:v,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(x.customerName?"border-red-300":"border-gray-300"),placeholder:"Customer's full name"}),x.customerName&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",children:x.customerName})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Email *"}),(0,s.jsx)("input",{type:"email",name:"customerEmail",value:u.customerEmail,onChange:v,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(x.customerEmail?"border-red-300":"border-gray-300"),placeholder:"Customer's email address"}),x.customerEmail&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",children:x.customerEmail})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,s.jsxs)("select",{name:"status",value:u.status,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"open",children:"Open"}),(0,s.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,s.jsx)("option",{value:"waiting_customer",children:"Waiting for Customer"}),(0,s.jsx)("option",{value:"resolved",children:"Resolved"}),(0,s.jsx)("option",{value:"closed",children:"Closed"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),(0,s.jsxs)("select",{name:"priority",value:u.priority,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"low",children:"Low"}),(0,s.jsx)("option",{value:"medium",children:"Medium"}),(0,s.jsx)("option",{value:"high",children:"High"}),(0,s.jsx)("option",{value:"urgent",children:"Urgent"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,s.jsxs)("select",{name:"category",value:u.category,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"technical",children:"Technical Issue"}),(0,s.jsx)("option",{value:"billing",children:"Billing"}),(0,s.jsx)("option",{value:"account",children:"Account"}),(0,s.jsx)("option",{value:"product",children:"Product Inquiry"}),(0,s.jsx)("option",{value:"shipping",children:"Shipping"}),(0,s.jsx)("option",{value:"return",children:"Return/Refund"}),(0,s.jsx)("option",{value:"other",children:"Other"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assigned To"}),(0,s.jsx)("input",{type:"text",name:"assignedTo",value:u.assignedTo,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Agent Name or ID"})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[(0,s.jsx)("button",{type:"button",onClick:i,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",disabled:p,children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700 disabled:opacity-50",disabled:p,children:p?"Saving...":l?"Update Ticket":"Create Ticket"})]})]})]})})})},m=()=>{var e;let[t,r]=(0,a.useState)([]),[c,d]=(0,a.useState)(!0),[m,x]=(0,a.useState)(""),[h,p]=(0,a.useState)("all"),[g,b]=(0,a.useState)("all"),[j,v]=(0,a.useState)("all"),[y,f]=(0,a.useState)(1),[N,k]=(0,a.useState)(1),[w,C]=(0,a.useState)([]),[S,E]=(0,a.useState)(!1),[T,_]=(0,a.useState)(null),[A,P]=(0,a.useState)({total:0,open:0,inProgress:0,resolved:0,avgResponseTime:0});(0,l.useRouter)();let{showSuccess:L,showError:F,showWarning:O}=(0,n.V)(),M=[{value:"open",label:"Ouvert",color:"red"},{value:"in_progress",label:"En cours",color:"yellow"},{value:"waiting_customer",label:"En attente client",color:"blue"},{value:"resolved",label:"R\xe9solu",color:"green"},{value:"closed",label:"Ferm\xe9",color:"gray"}],B=[{value:"low",label:"Faible",color:"gray"},{value:"medium",label:"Moyenne",color:"yellow"},{value:"high",label:"\xc9lev\xe9e",color:"orange"},{value:"urgent",label:"Urgente",color:"red"}],z=[{value:"technical",label:"Probl\xe8me technique"},{value:"billing",label:"Facturation"},{value:"account",label:"Compte"},{value:"product",label:"Demande produit"},{value:"shipping",label:"Livraison"},{value:"return",label:"Retour/Remboursement"},{value:"other",label:"Autre"}];(0,a.useEffect)(()=>{R(),I()},[R,I]);let R=(0,a.useCallback)(async()=>{try{d(!0);let e=new URLSearchParams({page:y,limit:15,search:m,status:h,priority:g,category:j}),t=await fetch("".concat("https://fenkparet-backend.onrender.com","/api/admin/tickets?").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!t.ok)throw Error("Failed to fetch tickets");let s=await t.json();r(s.tickets),k(Math.ceil(s.total/15))}catch(e){console.error("Error fetching tickets:",e),F("Failed to fetch tickets. Please try again.")}finally{d(!1)}},[y,15,m,h,g,j,F]),I=(0,a.useCallback)(async()=>{try{let e=await fetch("".concat("https://fenkparet-backend.onrender.com","/api/admin/tickets/stats"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){let t=await e.json();P(t)}}catch(e){console.error("Error fetching ticket stats:",e)}},[]),q=async(e,t)=>{try{if(!(await fetch("".concat("https://fenkparet-backend.onrender.com","/api/admin/tickets/").concat(e),{method:"PATCH",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({status:t})})).ok)throw Error("Failed to update ticket status");L("Ticket status updated successfully"),R(),I()}catch(e){console.error("Error updating ticket status:",e),F("Failed to update ticket status. Please try again.")}},H=async(e,t)=>{try{if(!(await fetch("".concat("https://fenkparet-backend.onrender.com","/api/admin/tickets/").concat(e,"/assign"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({assigneeId:t})})).ok)throw Error("Failed to assign ticket");L("Ticket assigned successfully"),R()}catch(e){console.error("Error assigning ticket:",e),F("Failed to assign ticket. Please try again.")}},U=async e=>{if(0===w.length){O("Veuillez s\xe9lectionner des tickets pour effectuer une action group\xe9e");return}try{if(!(await fetch("".concat("https://fenkparet-backend.onrender.com","/api/admin/tickets/bulk"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({ticketIds:w,action:e})})).ok)throw Error("Failed to perform bulk ".concat(e));L("".concat({close:"fermeture",assign:"assignation",priority_high:"priorit\xe9 \xe9lev\xe9e",priority_low:"priorit\xe9 faible"}[e]||e," group\xe9e termin\xe9e avec succ\xe8s")),C([]),R(),I()}catch(t){console.error("Error performing bulk ".concat(e,":"),t),F("\xc9chec de l&apos;action group\xe9e ".concat(actionLabels[e]||e,". Veuillez r\xe9essayer."))}},Z=async()=>{try{let e=await fetch("".concat("https://fenkparet-backend.onrender.com","/api/admin/tickets/auto-close"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({daysAfterResolved:7})});if(!e.ok)throw Error("Failed to auto-close tickets");let t=await e.json();t.closedCount>0&&(L("".concat(t.closedCount," tickets r\xe9solus ferm\xe9s automatiquement")),R(),I())}catch(e){console.error("Error auto-closing tickets:",e)}},V=e=>{C(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},W=e=>{let t=B.find(t=>t.value===e);return t?(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat({gray:"bg-gray-100 text-gray-800",yellow:"bg-yellow-100 text-yellow-800",orange:"bg-orange-100 text-orange-800",red:"bg-red-100 text-red-800"}[t.color]),children:t.label}):null},D=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return c?(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,s.jsx)(i.Z,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Support Tickets"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Manage customer support requests and inquiries"})]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("button",{onClick:Z,className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors",children:"Fermeture automatique"}),(0,s.jsx)("button",{onClick:()=>window.open("".concat("https://fenkparet-backend.onrender.com","/api/admin/tickets/export"),"_blank"),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"Exporter les tickets"}),(0,s.jsx)("button",{onClick:()=>{_(null),E(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Cr\xe9er un ticket"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,s.jsx)(o.Z,{children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 009.586 13H7"})})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Tickets"}),(0,s.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:A.total})]})]})}),(0,s.jsx)(o.Z,{children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Open"}),(0,s.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:A.open})]})]})}),(0,s.jsx)(o.Z,{children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"In Progress"}),(0,s.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:A.inProgress})]})]})}),(0,s.jsx)(o.Z,{children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Resolved"}),(0,s.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:A.resolved})]})]})}),(0,s.jsx)(o.Z,{children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Avg Response"}),(0,s.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:(e=A.avgResponseTime)<24?"".concat(Math.round(e),"h"):"".concat(Math.floor(e/24),"d ").concat(Math.round(e%24),"h")})]})]})})]}),(0,s.jsx)(o.Z,{children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-end",children:[(0,s.jsx)("div",{children:(0,s.jsx)("input",{type:"text",placeholder:"Search tickets...",value:m,onChange:e=>x(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),(0,s.jsx)("div",{children:(0,s.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"all",children:"All Status"}),M.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]})}),(0,s.jsx)("div",{children:(0,s.jsxs)("select",{value:g,onChange:e=>b(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"all",children:"All Priority"}),B.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]})}),(0,s.jsx)("div",{children:(0,s.jsxs)("select",{value:j,onChange:e=>v(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"all",children:"All Categories"}),z.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]})}),(0,s.jsx)("div",{children:(0,s.jsxs)("select",{onChange:e=>{e.target.value&&(p(e.target.value),e.target.value="")},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"",children:"Quick Filters"}),(0,s.jsx)("option",{value:"open",children:"Open Tickets"}),(0,s.jsx)("option",{value:"high",children:"High Priority"}),(0,s.jsx)("option",{value:"urgent",children:"Urgent"}),(0,s.jsx)("option",{value:"unassigned",children:"Unassigned"})]})})]})}),w.length>0&&(0,s.jsx)(o.Z,{className:"bg-blue-50 p-4 rounded-lg border border-blue-200 dark:bg-blue-900/20 dark:border-blue-900",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("span",{className:"text-sm text-blue-700",children:[w.length," ticket(s) selected"]}),(0,s.jsx)("div",{className:"space-x-2",children:(0,s.jsxs)("select",{onChange:e=>{e.target.value&&(U(e.target.value),e.target.value="")},className:"text-sm border border-blue-300 rounded px-2 py-1",children:[(0,s.jsx)("option",{value:"",children:"Actions group\xe9es"}),(0,s.jsx)("option",{value:"close",children:"Fermer les tickets"}),(0,s.jsx)("option",{value:"assign",children:"M'assigner"}),(0,s.jsx)("option",{value:"priority_high",children:"Priorit\xe9 \xe9lev\xe9e"}),(0,s.jsx)("option",{value:"priority_low",children:"Priorit\xe9 faible"})]})})]})}),(0,s.jsxs)(o.Z,{className:"overflow-hidden",children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,s.jsx)("input",{type:"checkbox",checked:w.length===t.length&&t.length>0,onChange:()=>{w.length===t.length?C([]):C(t.map(e=>e.id))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ticket"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>{var t;return(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("input",{type:"checkbox",checked:w.includes(e.id),onChange:()=>V(e.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["#",e.ticketNumber]}),(0,s.jsx)("div",{className:"text-sm text-gray-500 max-w-xs truncate",children:e.subject})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.customer.name}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.customer.email})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800",children:(null===(t=z.find(t=>t.value===e.category))||void 0===t?void 0:t.label)||e.category})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:W(e.priority)}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("select",{value:e.status,onChange:t=>q(e.id,t.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:M.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.assignee?(0,s.jsx)("span",{className:"text-blue-600",children:e.assignee.name}):(0,s.jsx)("button",{onClick:()=>H(e.id,"current-admin-id"),className:"text-gray-400 hover:text-blue-600 text-xs",children:"Assign to me"})})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:D(e.createdAt)}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,s.jsx)("button",{onClick:()=>{_(e),E(!0)},className:"text-blue-600 hover:text-blue-900 mr-3",children:"View"}),(0,s.jsx)("button",{onClick:()=>q(e.id,"resolved"),className:"text-green-600 hover:text-green-900 mr-3",children:"R\xe9soudre"}),(0,s.jsx)("button",{onClick:()=>q(e.id,"closed"),className:"text-gray-600 hover:text-gray-900",children:"Fermer"})]})]},e.id)})})]})}),0===t.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 009.586 13H7"})}),(0,s.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No tickets found"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"All caught up! No support tickets at the moment."})]})]}),S&&T&&(0,s.jsx)(u,{ticket:T,onClose:()=>E(!1),onStatusUpdate:e=>{q(T.id,e),E(!1)}})]})})}}},function(e){e.O(0,[58,888,774,179],function(){return e(e.s=7928)}),_N_E=e.O()}]);