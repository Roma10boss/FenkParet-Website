(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[426],{6376:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/orders",function(){return t(8715)}])},5627:function(e,s,t){"use strict";var a=t(5893),i=t(7294),n=t(4410),l=t(9761),d=t(5675),r=t.n(d);s.Z=e=>{var s,t,d,c,o,x,m,u,h,p,j,v,g,y,N,f,b;let{order:w,onClose:S,onStatusUpdate:C}=e,[k,_]=(0,i.useState)(w.status),{showSuccess:A,showError:P}=(0,l.V)();(0,i.useEffect)(()=>{_(w.status)},[w.status]);let Z=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),D=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),O=async e=>{let s=e.target.value;_(s);try{await new Promise(e=>setTimeout(e,500)),C(w.id,s),A("Order ".concat(w.orderNumber," status updated to ").concat(s))}catch(e){P("Failed to update order status: ".concat(e.message)),_(w.status)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,a.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-4/5 lg:w-3/4 shadow-lg rounded-md bg-white max-h-[80vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["Order Details - #",w.orderNumber]}),(0,a.jsx)("button",{onClick:S,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsx)(n.Z,{title:"Order Items",children:(0,a.jsx)("div",{className:"space-y-4",children:null===(s=w.items)||void 0===s?void 0:s.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-4 bg-white p-3 rounded border",children:[(0,a.jsx)(r(),{src:e.product.image||"/api/placeholder/60/60",alt:e.product.name,width:60,height:60,className:"w-15 h-15 object-cover rounded"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h5",{className:"text-sm font-medium text-gray-900",children:e.product.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["SKU: ",e.product.sku]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Qty: ",e.quantity]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:Z(e.price)}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"each"})]})]},s))})}),(0,a.jsx)(n.Z,{title:"Shipping Address",children:(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,a.jsx)("p",{className:"font-medium",children:null===(t=w.shippingAddress)||void 0===t?void 0:t.name}),(0,a.jsx)("p",{children:null===(d=w.shippingAddress)||void 0===d?void 0:d.street}),(0,a.jsxs)("p",{children:[null===(c=w.shippingAddress)||void 0===c?void 0:c.city,", ",null===(o=w.shippingAddress)||void 0===o?void 0:o.state," ",null===(x=w.shippingAddress)||void 0===x?void 0:x.zipCode]}),(0,a.jsx)("p",{children:null===(m=w.shippingAddress)||void 0===m?void 0:m.country}),(null===(u=w.shippingAddress)||void 0===u?void 0:u.phone)&&(0,a.jsxs)("p",{className:"mt-2",children:["Phone: ",w.shippingAddress.phone]})]})}),(0,a.jsx)(n.Z,{title:"Order Timeline",children:(0,a.jsx)("div",{className:"space-y-3",children:null===(h=w.timeline)||void 0===h?void 0:h.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:D(e.date)}),e.note&&(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:e.note})]})]},s))})})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(n.Z,{title:"Customer",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-sm font-medium",children:null===(j=w.customer)||void 0===j?void 0:null===(p=j.name)||void 0===p?void 0:p.charAt(0).toUpperCase()})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:null===(v=w.customer)||void 0===v?void 0:v.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:null===(g=w.customer)||void 0===g?void 0:g.email})]})]}),(null===(y=w.customer)||void 0===y?void 0:y.phone)&&(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Phone: ",w.customer.phone]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Customer since ",D(null===(N=w.customer)||void 0===N?void 0:N.createdAt)]})]})}),(0,a.jsx)(n.Z,{title:"Order Summary",children:(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Subtotal:"}),(0,a.jsx)("span",{className:"text-gray-900",children:Z(w.subtotal)})]}),w.discount>0&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Discount:"}),(0,a.jsxs)("span",{className:"text-red-600",children:["-",Z(w.discount)]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Shipping:"}),(0,a.jsx)("span",{className:"text-gray-900",children:Z(w.shipping)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Tax:"}),(0,a.jsx)("span",{className:"text-gray-900",children:Z(w.tax)})]}),(0,a.jsxs)("div",{className:"border-t pt-2 flex justify-between font-medium",children:[(0,a.jsx)("span",{className:"text-gray-900",children:"Total:"}),(0,a.jsx)("span",{className:"text-gray-900",children:Z(w.total)})]})]})}),(0,a.jsx)(n.Z,{title:"Payment",children:(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Method:"}),(0,a.jsx)("span",{className:"text-gray-900",children:w.paymentMethod})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Status:"}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("paid"===w.paymentStatus?"bg-green-100 text-green-800":"pending"===w.paymentStatus?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:(null===(f=w.paymentStatus)||void 0===f?void 0:f.charAt(0).toUpperCase())+(null===(b=w.paymentStatus)||void 0===b?void 0:b.slice(1))})]}),w.transactionId&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Transaction ID:"}),(0,a.jsx)("span",{className:"text-gray-900 text-xs",children:w.transactionId})]})]})}),(0,a.jsx)(n.Z,{title:"Update Status",children:(0,a.jsxs)("select",{value:k,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"pending",children:"Pending"}),(0,a.jsx)("option",{value:"confirmed",children:"Confirmed"}),(0,a.jsx)("option",{value:"processing",children:"Processing"}),(0,a.jsx)("option",{value:"shipped",children:"Shipped"}),(0,a.jsx)("option",{value:"delivered",children:"Delivered"}),(0,a.jsx)("option",{value:"cancelled",children:"Cancelled"}),(0,a.jsx)("option",{value:"refunded",children:"Refunded"})]})})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t",children:[(0,a.jsx)("button",{type:"button",onClick:S,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Close"}),(0,a.jsx)("button",{type:"button",onClick:()=>window.open("/admin/orders/".concat(w.id,"/invoice"),"_blank"),className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700",children:"Generate Invoice"})]})]})})})}}},function(e){e.O(0,[328,58,216,888,179],function(){return e(e.s=6376)}),_N_E=e.O()}]);