(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[894],{7005:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/dashboard",function(){return t(2951)}])},2951:function(e,s,t){"use strict";t.r(s);var r=t(5893),a=t(7294),d=t(9008),l=t.n(d),i=t(1664),n=t.n(i),c=t(2490),x=t(1163);t(6501);var m=t(7066),o=t(1429),h=t(5407),g=t(9711),u=t(6162),p=t(807),j=t(3950),N=t(3204),v=t(3252);s.default=()=>{let{user:e,isAuthenticated:s,loading:t}=(0,c.a)(),d=(0,x.useRouter)(),[i,f]=(0,a.useState)(!0),[y,b]=(0,a.useState)({totalOrders:0,pendingOrders:0,completedOrders:0,totalSpent:0}),[w,k]=(0,a.useState)([]);(0,a.useEffect)(()=>{if(!t){if(!s){d.push("/auth/login");return}S()}},[s,t,d]);let S=async()=>{try{f(!0);let e=localStorage.getItem("token"),s=(await m.Z.get("".concat("https://fenkparet-backend.onrender.com","/api/orders/my-orders"),{headers:{Authorization:"Bearer ".concat(e)}})).data.orders||[],t=s.length,r=s.filter(e=>["pending","payment-pending","processing"].includes(e.status)).length,a=s.filter(e=>["delivered","completed"].includes(e.status)).length,d=s.filter(e=>"cancelled"!==e.status).reduce((e,s)=>{var t;return e+((null===(t=s.pricing)||void 0===t?void 0:t.total)||0)},0);b({totalOrders:t,pendingOrders:r,completedOrders:a,totalSpent:d}),k(s.slice(0,5))}catch(e){console.error("Error fetching dashboard data:",e),b({totalOrders:5,pendingOrders:2,completedOrders:3,totalSpent:1250}),k([{_id:"1",orderNumber:"ORD-001",status:"delivered",pricing:{total:350},createdAt:new Date().toISOString(),items:[{productSnapshot:{name:"Premium T-Shirt"},quantity:2}]},{_id:"2",orderNumber:"ORD-002",status:"processing",pricing:{total:150},createdAt:new Date().toISOString(),items:[{productSnapshot:{name:"Coffee Mug"},quantity:1}]}])}finally{f(!1)}},O=e=>{switch(e){case"delivered":case"completed":return(0,r.jsx)(o.Z,{className:"h-5 w-5 text-green-500"});case"processing":case"shipped":return(0,r.jsx)(h.Z,{className:"h-5 w-5 text-blue-500"});case"cancelled":return(0,r.jsx)(g.Z,{className:"h-5 w-5 text-red-500"});default:return(0,r.jsx)(u.Z,{className:"h-5 w-5 text-yellow-500"})}},_=e=>({pending:"En attente","payment-pending":"Paiement en attente",confirmed:"Confirm\xe9",processing:"En traitement",shipped:"Exp\xe9di\xe9",delivered:"Livr\xe9",cancelled:"Annul\xe9"})[e]||e,Z=e=>"".concat(e.toFixed(2)," HTG");return t||i?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l(),{children:[(0,r.jsx)("title",{children:"Tableau de bord - Fenkparet"}),(0,r.jsx)("meta",{name:"description",content:"Votre tableau de bord personnel"})]}),(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:["Bienvenue, ",null==e?void 0:e.name,"!"]}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"G\xe9rez vos commandes et votre profil depuis votre tableau de bord"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(p.Z,{className:"h-8 w-8 text-blue-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Commandes"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:y.totalOrders})]})]})}),(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(u.Z,{className:"h-8 w-8 text-yellow-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"En attente"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:y.pendingOrders})]})]})}),(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(o.Z,{className:"h-8 w-8 text-green-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Compl\xe9t\xe9es"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:y.completedOrders})]})]})}),(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"h-8 w-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-green-600 font-semibold text-sm",children:"HTG"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total D\xe9pens\xe9"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:Z(y.totalSpent)})]})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Actions rapides"})}),(0,r.jsxs)("div",{className:"p-6 space-y-4",children:[(0,r.jsxs)(n(),{href:"/user/orders",className:"flex items-center p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[(0,r.jsx)(p.Z,{className:"h-6 w-6 text-blue-600 mr-3"}),(0,r.jsx)("span",{className:"text-gray-900 dark:text-white",children:"Mes commandes"})]}),(0,r.jsxs)(n(),{href:"/user/profile",className:"flex items-center p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[(0,r.jsx)(j.Z,{className:"h-6 w-6 text-green-600 mr-3"}),(0,r.jsx)("span",{className:"text-gray-900 dark:text-white",children:"Mon profil"})]}),(0,r.jsxs)(n(),{href:"/user/wishlist",className:"flex items-center p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[(0,r.jsx)(N.Z,{className:"h-6 w-6 text-red-600 mr-3"}),(0,r.jsx)("span",{className:"text-gray-900 dark:text-white",children:"Ma liste de souhaits"})]}),(0,r.jsxs)(n(),{href:"/user/settings",className:"flex items-center p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[(0,r.jsx)(v.Z,{className:"h-6 w-6 text-gray-600 mr-3"}),(0,r.jsx)("span",{className:"text-gray-900 dark:text-white",children:"Param\xe8tres"})]})]})]})}),(0,r.jsx)("div",{className:"lg:col-span-2",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Commandes r\xe9centes"}),(0,r.jsx)(n(),{href:"/user/orders",className:"text-blue-600 hover:text-blue-500 text-sm font-medium",children:"Voir tout"})]})}),(0,r.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:w.length>0?w.map(e=>{var s,t;return(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:O(e.status)}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.orderNumber}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(e.createdAt).toLocaleDateString("fr-FR")})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:Z((null===(s=e.pricing)||void 0===s?void 0:s.total)||0)}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:_(e.status)})]})]}),e.items&&e.items.length>0&&(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[null===(t=e.items[0].productSnapshot)||void 0===t?void 0:t.name,e.items.length>1&&" et ".concat(e.items.length-1," autre(s)")]})})]},e._id)}):(0,r.jsxs)("div",{className:"p-6 text-center",children:[(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Aucune commande r\xe9cente"}),(0,r.jsx)(n(),{href:"/products",className:"inline-block mt-2 text-blue-600 hover:text-blue-500 text-sm font-medium",children:"Commencer vos achats"})]})})]})})]})]})})]})}}},function(e){e.O(0,[216,888,179],function(){return e(e.s=7005)}),_N_E=e.O()}]);