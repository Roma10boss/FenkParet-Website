(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[190],{8086:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cart",function(){return s(474)}])},474:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var r=s(567),a=s(5893),n=s(7294),i=s(9008),l=s.n(i),c=s(1664),d=s.n(c),o=s(1557),m=s(5675),x=s.n(m),h=e=>{let{item:t}=e,{updateQuantity:s,removeFromCart:r}=(0,o.j)();return(0,a.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-200 dark:border-gray-700 py-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"relative w-20 h-20 flex-shrink-0",children:(0,a.jsx)(x(),{src:t.image,alt:t.name,layout:"fill",objectFit:"cover",className:"rounded-md"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:t.name}),t.variant&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Variant: ",t.variant.name]}),(0,a.jsxs)("p",{className:"text-gray-800 dark:text-gray-200",children:["$",t.price.toFixed(2)]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("input",{type:"number",min:"1",value:t.quantity,onChange:e=>{let r=parseInt(e.target.value,10);isNaN(r)||s(t.id,r)},className:"w-16 px-2 py-1 border rounded-md text-center dark:bg-gray-700"}),(0,a.jsx)("button",{onClick:()=>r(t.id),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-600",children:"Remove"})]})]})},u=s(6501),p=s(1163),j=s(7702);let f=n.forwardRef(function(e,t){var{title:s,titleId:r}=e,a=(0,j._)(e,["title","titleId"]);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},a),s?n.createElement("title",{id:r},s):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))});var v=s(807),N=s(8654),b=s(5407),w=s(2997),y=s(1429),g=()=>{let{items:e,getTotals:t,clearCart:s,isEmpty:i}=(0,o.j)(),{subtotal:c,tax:m,shipping:x,total:j,itemCount:g}=t(),[k,E]=(0,n.useState)(""),[Z,_]=(0,n.useState)(!1),C=(0,p.useRouter)(),L=async()=>{if(!k.trim()){u.Am.error("Veuillez entrer votre num\xe9ro de confirmation.");return}_(!0);try{let t=localStorage.getItem("token"),a=e.map(e=>({productId:e.id,name:e.name,quantity:e.quantity,price:e.price,variant:e.variant||null})),n=await fetch("".concat("https://fenkparet-backend.onrender.com","/api/orders/place-order-with-confirmation"),{method:"POST",headers:(0,r._)({"Content-Type":"application/json"},t&&{Authorization:"Bearer ".concat(t)}),body:JSON.stringify({cart:a,confirmationNumber:k,language:"fr"})}),i=await n.json();if(!n.ok)throw Error(i.message||"Erreur lors de la commande");u.Am.success("Commande pass\xe9e avec succ\xe8s! Nous v\xe9rifierons votre num\xe9ro de confirmation."),s(),C.push("/user/orders")}catch(e){console.error("Order placement error:",e),u.Am.error(e.message||"Une erreur est survenue lors de la commande.")}finally{_(!1)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l(),{children:[(0,a.jsxs)("title",{children:["Panier - ","Fenkparet"]}),(0,a.jsx)("meta",{name:"description",content:"Votre panier d'achats"})]}),(0,a.jsx)("div",{className:"min-h-screen bg-theme-secondary",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(d(),{href:"/products",className:"btn-ghost p-2",children:(0,a.jsx)(f,{className:"w-5 h-5"})}),(0,a.jsxs)("h1",{className:"text-3xl font-bold text-theme-primary flex items-center",children:[(0,a.jsx)(v.Z,{className:"w-8 h-8 mr-3 text-accent"}),"Mon Panier"]})]}),!i()&&(0,a.jsxs)("div",{className:"text-theme-secondary",children:[g," ",1===g?"article":"articles"]})]}),i()?(0,a.jsx)("div",{className:"text-center py-16",children:(0,a.jsxs)("div",{className:"bg-theme-primary rounded-2xl shadow-lg p-12 max-w-md mx-auto",children:[(0,a.jsx)(v.Z,{className:"w-24 h-24 text-theme-tertiary mx-auto mb-6"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-theme-primary mb-4",children:"Votre panier est vide"}),(0,a.jsx)("p",{className:"text-theme-secondary mb-8",children:"D\xe9couvrez notre collection et trouvez quelque chose qui vous pla\xeet !"}),(0,a.jsxs)(d(),{href:"/products",className:"btn-primary inline-flex items-center",children:[(0,a.jsx)(v.Z,{className:"w-5 h-5 mr-2"}),"Commencer mes achats"]})]})}):(0,a.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[(0,a.jsx)("div",{className:"xl:col-span-2 space-y-4",children:(0,a.jsxs)("div",{className:"bg-theme-primary rounded-xl shadow-sm border border-theme p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-theme-primary mb-6 flex items-center",children:[(0,a.jsx)(v.Z,{className:"w-5 h-5 mr-2 text-accent"}),"Articles dans votre panier"]}),(0,a.jsx)("div",{className:"space-y-4",children:e.map((t,s)=>(0,a.jsxs)("div",{children:[(0,a.jsx)(h,{item:t}),s<e.length-1&&(0,a.jsx)("hr",{className:"border-theme my-4"})]},t.id))})]})}),(0,a.jsx)("div",{className:"xl:col-span-1",children:(0,a.jsxs)("div",{className:"bg-theme-primary rounded-xl shadow-sm border border-theme p-6 sticky top-8",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-theme-primary mb-6 flex items-center",children:[(0,a.jsx)(N.Z,{className:"w-5 h-5 mr-2 text-accent"}),"R\xe9sum\xe9 de la commande"]}),(0,a.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between text-theme-secondary",children:[(0,a.jsxs)("span",{children:["Sous-total (",g," ",1===g?"article":"articles",")"]}),(0,a.jsxs)("span",{className:"font-medium",children:[c.toFixed(2)," HTG"]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-theme-secondary",children:[(0,a.jsx)("span",{children:"Taxes"}),(0,a.jsxs)("span",{className:"font-medium",children:[m.toFixed(2)," HTG"]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-theme-secondary",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(b.Z,{className:"w-4 h-4 mr-1"}),"Livraison"]}),(0,a.jsxs)("span",{className:"font-medium",children:[x.toFixed(2)," HTG"]})]}),(0,a.jsx)("hr",{className:"border-theme"}),(0,a.jsxs)("div",{className:"flex justify-between text-lg font-bold text-theme-primary",children:[(0,a.jsx)("span",{children:"Total"}),(0,a.jsxs)("span",{className:"text-accent",children:[j.toFixed(2)," HTG"]})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-theme-primary mb-3 flex items-center",children:[(0,a.jsx)(w.Z,{className:"w-5 h-5 mr-2 text-accent"}),"Confirmation de paiement"]}),(0,a.jsx)("div",{className:"bg-theme-secondary rounded-lg p-4 mb-4",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(y.Z,{className:"w-5 h-5 text-accent mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-theme-primary font-medium mb-1",children:"Processus de commande s\xe9curis\xe9"}),(0,a.jsx)("p",{className:"text-xs text-theme-secondary",children:"Entrez votre num\xe9ro de confirmation de paiement. Notre \xe9quipe v\xe9rifiera votre paiement dans les 48 heures."})]})]})}),(0,a.jsx)("input",{type:"text",value:k,onChange:e=>E(e.target.value),placeholder:"Num\xe9ro de confirmation",className:"w-full px-4 py-3 border border-theme-border rounded-lg bg-theme-input text-theme-primary placeholder-theme-tertiary focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent transition-all"})]}),(0,a.jsx)("button",{onClick:L,disabled:Z||!k.trim(),className:"w-full btn-primary py-4 text-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition-all hover:shadow-lg",children:Z?(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsx)("div",{className:"spinner w-5 h-5 mr-2"}),"Commande en cours..."]}):(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsx)(w.Z,{className:"w-5 h-5 mr-2"}),"Passer la commande"]})}),(0,a.jsx)("div",{className:"mt-6 pt-6 border-t border-theme",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(w.Z,{className:"w-6 h-6 text-accent mx-auto mb-1"}),(0,a.jsx)("p",{className:"text-xs text-theme-tertiary",children:"Paiement s\xe9curis\xe9"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(b.Z,{className:"w-6 h-6 text-accent mx-auto mb-1"}),(0,a.jsx)("p",{className:"text-xs text-theme-tertiary",children:"Livraison rapide"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(y.Z,{className:"w-6 h-6 text-accent mx-auto mb-1"}),(0,a.jsx)("p",{className:"text-xs text-theme-tertiary",children:"Garanti"})]})]})})]})})]})]})})]})}},1429:function(e,t,s){"use strict";var r=s(7702),a=s(7294);let n=a.forwardRef(function(e,t){var{title:s,titleId:n}=e,i=(0,r._)(e,["title","titleId"]);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),s?a.createElement("title",{id:n},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});t.Z=n},8654:function(e,t,s){"use strict";var r=s(7702),a=s(7294);let n=a.forwardRef(function(e,t){var{title:s,titleId:n}=e,i=(0,r._)(e,["title","titleId"]);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),s?a.createElement("title",{id:n},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))});t.Z=n},2997:function(e,t,s){"use strict";var r=s(7702),a=s(7294);let n=a.forwardRef(function(e,t){var{title:s,titleId:n}=e,i=(0,r._)(e,["title","titleId"]);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),s?a.createElement("title",{id:n},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))});t.Z=n},807:function(e,t,s){"use strict";var r=s(7702),a=s(7294);let n=a.forwardRef(function(e,t){var{title:s,titleId:n}=e,i=(0,r._)(e,["title","titleId"]);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),s?a.createElement("title",{id:n},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))});t.Z=n},5407:function(e,t,s){"use strict";var r=s(7702),a=s(7294);let n=a.forwardRef(function(e,t){var{title:s,titleId:n}=e,i=(0,r._)(e,["title","titleId"]);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),s?a.createElement("title",{id:n},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"}))});t.Z=n}},function(e){e.O(0,[888,774,179],function(){return e(e.s=8086)}),_N_E=e.O()}]);