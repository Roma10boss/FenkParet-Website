exports.id=414,exports.ids=[414],exports.modules={9290:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{Z:()=>p});var a=r(997),o=r(6689),n=r(755),i=r(9005),c=r(6576),l=r(4196),d=r(2813),m=r(1056),u=r(6201),h=e([u]);u=(h.then?(await h)():h)[0];let p=()=>{let[e,t]=(0,o.useState)(!1),[r,s]=(0,o.useState)(!1),[h,p]=(0,o.useState)({type:"general",message:"",email:"",rating:5,hoverRating:null}),[x,g]=(0,o.useState)(!1),[f,b]=(0,o.useState)({totalRatings:0,averageRating:4.7,visitorCount:1e3,ratingDistribution:[2,3,8,35,52]});(0,o.useEffect)(()=>{(()=>{let e=JSON.parse(localStorage.getItem("customerFeedback")||"[]"),t=parseInt(localStorage.getItem("visitorCount")||"1000");if(e.length>0){let r=e.length,s=e.reduce((e,t)=>e+t.rating,0)/r,a=[0,0,0,0,0];e.forEach(e=>{e.rating>=1&&e.rating<=5&&a[e.rating-1]++});let o=a.map(e=>r>0?Math.round(e/r*100):0);b({totalRatings:r,averageRating:Math.round(10*s)/10,visitorCount:t,ratingDistribution:o})}else{let e=t+1;localStorage.setItem("visitorCount",e.toString()),b(t=>({...t,visitorCount:e}))}})()},[]);let y=async e=>{if(e.preventDefault(),!h.message.trim()){u.toast.error("Veuillez entrer votre message de commentaires");return}g(!0);try{let e={...h,userAgent:navigator.userAgent,timestamp:new Date().toISOString(),page:window.location.pathname,url:window.location.href,screenSize:`${window.screen.width}x${window.screen.height}`,viewportSize:`${window.innerWidth}x${window.innerHeight}`},r=JSON.parse(localStorage.getItem("customerFeedback")||"[]");r.push(e),localStorage.setItem("customerFeedback",JSON.stringify(r));let s=r.length,a=r.reduce((e,t)=>e+t.rating,0)/s,o=[0,0,0,0,0];r.forEach(e=>{e.rating>=1&&e.rating<=5&&o[e.rating-1]++});let n=o.map(e=>Math.round(e/s*100));b(e=>({...e,totalRatings:s,averageRating:Math.round(10*a)/10,ratingDistribution:n}));try{await m.hi.submitFeedback(e)}catch(e){console.log("Server not available, feedback stored locally")}u.toast.success("Merci pour vos commentaires! \uD83D\uDE4F"),p({type:"general",message:"",email:"",rating:5,hoverRating:null}),t(!1)}catch(e){console.error("Feedback submission error:",e),u.toast.error("\xc9chec de l&apos;envoi des commentaires. Veuillez r\xe9essayer.")}finally{g(!1)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col space-y-3",children:[f.totalRatings>0&&(0,a.jsxs)("button",{onClick:()=>s(!r),className:"bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-2 rounded-full text-sm font-medium shadow-lg transition-all duration-200 flex items-center space-x-2","aria-label":"Voir les \xe9valuations",children:[a.jsx(d.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[f.averageRating,"/5 (",f.totalRatings,")"]})]}),a.jsx("button",{onClick:()=>t(!0),className:"bg-blue-600 hover:bg-blue-700 text-white rounded-full p-3 shadow-lg transition-all duration-200 hover:scale-110","aria-label":"Donner des commentaires",children:a.jsx(n.Z,{className:"h-6 w-6"})})]}),r&&a.jsx("div",{className:"fixed bottom-20 right-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 w-64 border border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"\xc9valuations Clients"}),a.jsx("button",{onClick:()=>s(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx(i.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx("div",{className:"flex",children:[1,2,3,4,5].map(e=>a.jsx(d.Z,{className:`h-5 w-5 ${e<=Math.round(f.averageRating)?"text-yellow-400":"text-gray-300 dark:text-gray-600"}`},e))}),a.jsx("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:f.averageRating})]}),a.jsx("div",{className:"space-y-1",children:f.ratingDistribution.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,a.jsxs)("span",{className:"w-8 text-gray-600 dark:text-gray-400",children:[5-t,"★"]}),a.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"bg-yellow-400 h-2 rounded-full transition-all duration-300",style:{width:`${e}%`}})}),(0,a.jsxs)("span",{className:"w-8 text-xs text-gray-500 dark:text-gray-400",children:[e,"%"]})]},t)).reverse()}),(0,a.jsxs)("div",{className:"mt-3 text-center text-xs text-gray-500 dark:text-gray-400",children:["Bas\xe9 sur ",f.totalRatings," \xe9valuation",1!==f.totalRatings?"s":""]})]})}),e&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"\uD83D\uDCDD Commentaires et suggestions"}),a.jsx("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx(i.Z,{className:"h-5 w-5"})})]}),(0,a.jsxs)("form",{onSubmit:y,className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type de commentaire"}),(0,a.jsxs)("select",{value:h.type,onChange:e=>p(t=>({...t,type:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"general",children:"Commentaire g\xe9n\xe9ral"}),a.jsx("option",{value:"bug",children:"Rapport de bug"}),a.jsx("option",{value:"feature",children:"Demande de fonctionnalit\xe9"}),a.jsx("option",{value:"ui",children:"Probl\xe8me UI/UX"}),a.jsx("option",{value:"performance",children:"Probl\xe8me de performance"}),a.jsx("option",{value:"admin",children:"Test de fonction admin"}),a.jsx("option",{value:"mobile",children:"Exp\xe9rience mobile"}),a.jsx("option",{value:"payment",children:"Paiement/Commande"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Exp\xe9rience globale (1-5 \xe9toiles)"}),a.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(e=>a.jsx("button",{type:"button",onClick:()=>p(t=>({...t,rating:e})),onMouseEnter:()=>p(t=>({...t,hoverRating:e})),onMouseLeave:()=>p(e=>({...e,hoverRating:null})),className:`transition-all duration-200 hover:scale-110 ${e<=(h.hoverRating||h.rating)?"text-yellow-400":"text-gray-300 dark:text-gray-600"}`,children:e<=(h.hoverRating||h.rating)?a.jsx(d.Z,{className:"h-6 w-6"}):a.jsx(c.Z,{className:"h-6 w-6"})},e))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Vos commentaires *"}),a.jsx("textarea",{value:h.message,onChange:e=>p(t=>({...t,message:e.target.value})),placeholder:"Veuillez d\xe9crire votre exp\xe9rience, les probl\xe8mes rencontr\xe9s, ou vos suggestions d'am\xe9lioration...",rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email (optionnel)"}),a.jsx("input",{type:"email",value:h.email,onChange:e=>p(t=>({...t,email:e.target.value})),placeholder:"votre-email@exemple.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:[a.jsx("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-300 mb-2",children:"\uD83E\uDDEA Guide de test"}),(0,a.jsxs)("ul",{className:"text-xs text-blue-700 dark:text-blue-400 space-y-1",children:[a.jsx("li",{children:"• Essayez de parcourir les produits et utiliser la recherche"}),a.jsx("li",{children:"• Testez le panier et la commande"}),a.jsx("li",{children:"• V\xe9rifiez la compatibilit\xe9 mobile"}),a.jsx("li",{children:"• Pour les admins: Testez l'ajout et la gestion des produits"}),a.jsx("li",{children:"• Signalez toute erreur ou interface confuse"})]})]}),a.jsx("button",{type:"submit",disabled:x,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white py-2 px-4 rounded-md transition-colors flex items-center justify-center space-x-2",children:x?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Envoi en cours..."})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(l.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Envoyer les commentaires"})]})})]})]})})]})};s()}catch(e){s(e)}})},8044:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{Z:()=>A});var a=r(997),o=r(6689),n=r(1664),i=r.n(n),c=r(5152),l=r.n(c),d=r(1163),m=r(4431),u=r(7055),h=r(5677),p=r(9794),x=r(1419),g=r(3482),f=r(6160),b=r(3952),y=r(4451),v=r(2290),j=r(7899),w=r(7735),N=r(9005),k=r(7624),S=r(986),C=r(8245),D=e([h]);h=(D.then?(await D)():D)[0];let E=()=>a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),P=l()(()=>Promise.all([r.e(216),r.e(608)]).then(r.bind(r,8608)),{loadableGenerated:{modules:["components/admin/AdminLayout.js -> ../../components/ui/ThemeToggle"]},ssr:!1,loading:()=>a.jsx("div",{className:"w-10 h-10 p-2 rounded-lg bg-theme-secondary border border-theme animate-pulse flex items-center justify-center",children:a.jsx(p.Z,{className:"w-5 h-5 text-accent"})})}),A=({children:e})=>{let t=(0,d.useRouter)(),{user:r,isAuthenticated:s,isAdmin:n,logout:c,loading:l}=(0,m.a)(),{mounted:p}=(0,u.F)();(0,o.useEffect)(()=>{if(!l&&p){if(!s){console.log("❌ Not authenticated, redirecting to admin login"),t.push("/admin/login");return}if(!n){console.log("❌ Not admin user, redirecting to home"),t.push("/");return}console.log("✅ Admin access granted for:",r?.email)}},[l,p,s,n,t,r]);let[D,A]=(0,o.useState)(!1),[T,$]=(0,o.useState)(!1);(0,o.useEffect)(()=>{let e=e=>{e.target.closest(".dropdown-container")||$(!1)};if(T)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[T]),(0,o.useEffect)(()=>{let e=e=>{"Escape"===e.key&&$(!1)};if(T)return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[T]);let R=[{name:"Tableau de bord",href:"/admin/dashboard",icon:x.Z},{name:"Produits",href:"/admin/products",icon:g.Z},{name:"Inventaire",href:"/admin/inventory",icon:f.Z},{name:"Commandes",href:"/admin/orders",icon:b.Z},{name:"Tickets",href:"/admin/tickets",icon:y.Z},{name:"Utilisateurs",href:"/admin/users",icon:v.Z},{name:"Analytics",href:"/admin/analytics",icon:j.Z},{name:"Ventes",href:"/admin/sales-analytics",icon:w.Z}];return!p||l?a.jsx("div",{className:"min-h-screen bg-theme-primary flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"spinner w-12 h-12 mx-auto mb-4"}),a.jsx("p",{className:"text-theme-secondary",children:"Chargement du tableau de bord..."})]})}):s&&n?(0,a.jsxs)("div",{className:"flex min-h-screen bg-theme-primary text-theme-primary font-sans theme-transition",children:[D&&a.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 transition-opacity lg:hidden",onClick:()=>A(!1)}),(0,a.jsxs)("aside",{className:`
            fixed lg:static inset-y-0 left-0 z-50 w-72 bg-theme-secondary 
            transform transition-transform duration-300 ease-in-out lg:translate-x-0
            ${D?"translate-x-0":"-translate-x-full"}
            flex flex-col shadow-2xl border-r border-theme
          `,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between h-16 px-6 border-b border-theme",children:[(0,a.jsxs)(i(),{href:"/admin/dashboard",className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-accent rounded-lg flex items-center justify-center",children:a.jsx(x.Z,{className:"w-5 h-5 text-white"})}),a.jsx("span",{className:"text-xl font-bold text-theme-primary",children:"Panneau d'administration"})]}),a.jsx("button",{onClick:()=>A(!1),className:"lg:hidden p-2 rounded-lg hover:bg-theme-tertiary transition-colors",children:a.jsx(N.Z,{className:"w-5 h-5"})})]}),a.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2",children:R.map(e=>{let r=e.icon,s=t.pathname.startsWith(e.href);return(0,a.jsxs)(i(),{href:e.href,onClick:()=>A(!1),className:`
                      flex items-center px-4 py-3 rounded-xl transition-all duration-200
                      ${s?"bg-accent text-white shadow-lg transform scale-105":"text-theme-secondary hover:bg-theme-tertiary hover:text-theme-primary hover:transform hover:scale-105"}
                    `,children:[a.jsx(r,{className:"w-5 h-5 mr-3"}),a.jsx("span",{className:"font-medium",children:e.name}),s&&a.jsx("div",{className:"ml-auto w-2 h-2 bg-white rounded-full"})]},e.href)})}),(0,a.jsxs)("div",{className:"p-4 border-t border-theme",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 rounded-xl bg-theme-tertiary mb-3",children:[a.jsx("div",{className:"w-10 h-10 bg-accent rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-semibold",children:r?.email?.charAt(0).toUpperCase()||"A"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-theme-primary truncate",children:r?.email||"Admin"}),a.jsx("p",{className:"text-xs text-theme-secondary",children:"Administrator"})]})]}),(0,a.jsxs)("button",{onClick:()=>{c(),t.push("/admin/login")},className:"flex items-center w-full px-4 py-3 rounded-xl text-error-color hover:bg-error-color hover:text-white transition-all duration-200 group",children:[a.jsx(E,{}),a.jsx("span",{className:"font-medium",children:"Logout"})]})]})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col lg:ml-0",children:[a.jsx("header",{className:"bg-theme-primary shadow-sm border-b border-theme sticky top-0 z-30",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-16 px-4 lg:px-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>A(!0),className:"lg:hidden p-2 rounded-lg hover:bg-theme-secondary transition-colors",children:a.jsx(k.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-xl font-semibold text-theme-primary",children:"Welcome, Admin"}),a.jsx("p",{className:"text-sm text-theme-secondary",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(h.Z,{}),(0,a.jsxs)("div",{className:"relative dropdown-container",children:[a.jsx("button",{onClick:()=>$(!T),className:"p-2 rounded-lg hover:bg-theme-secondary transition-colors",children:a.jsx(S.Z,{className:"w-5 h-5 text-theme-secondary"})}),T&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-64 bg-theme-primary border border-theme rounded-xl shadow-lg z-50 admin-fade-in",children:[a.jsx("div",{className:"p-4 border-b border-theme",children:a.jsx("h3",{className:"text-lg font-semibold text-theme-primary",children:"Settings"})}),(0,a.jsxs)("div",{className:"p-2",children:[a.jsx("button",{onClick:()=>{$(!1),console.log("Profile Settings clicked")},className:"w-full text-left p-3 rounded-lg hover:bg-theme-secondary transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(v.Z,{className:"w-4 h-4 text-theme-secondary"}),a.jsx("span",{className:"text-sm text-theme-primary",children:"Profile Settings"})]})}),a.jsx("button",{onClick:()=>{$(!1),console.log("System Settings clicked")},className:"w-full text-left p-3 rounded-lg hover:bg-theme-secondary transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(S.Z,{className:"w-4 h-4 text-theme-secondary"}),a.jsx("span",{className:"text-sm text-theme-primary",children:"System Settings"})]})}),a.jsx("button",{onClick:()=>{$(!1),console.log("Notification Settings clicked")},className:"w-full text-left p-3 rounded-lg hover:bg-theme-secondary transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(C.Z,{className:"w-4 h-4 text-theme-secondary"}),a.jsx("span",{className:"text-sm text-theme-primary",children:"Notification Settings"})]})}),a.jsx("button",{onClick:()=>{$(!1),console.log("Language & Region clicked")},className:"w-full text-left p-3 rounded-lg hover:bg-theme-secondary transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"w-4 h-4 text-theme-secondary",children:"\uD83C\uDF10"}),a.jsx("span",{className:"text-sm text-theme-primary",children:"Language & Region"})]})})]}),a.jsx("div",{className:"p-4 border-t border-theme",children:a.jsx("button",{onClick:()=>{$(!1),t.push("/admin/settings")},className:"w-full text-center text-sm text-accent hover:text-accent-dark transition-colors",children:"Advanced Settings"})})]})]}),a.jsx(P,{size:"normal"})]})]})}),a.jsx("main",{className:"flex-1 p-4 lg:p-6 overflow-auto bg-theme-primary",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:e})})]})]}):a.jsx("div",{className:"min-h-screen bg-theme-primary flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"spinner w-12 h-12 mx-auto mb-4"}),a.jsx("p",{className:"text-theme-secondary",children:"V\xe9rification des permissions..."})]})})};s()}catch(e){s(e)}})},5677:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{Z:()=>x});var a=r(997),o=r(6689),n=r(6201),i=r(9159),c=r(4163),l=r(4535),d=r(406),m=r(8245),u=r(9005),h=r(2506),p=e([n]);n=(p.then?(await p)():p)[0];let x=()=>{let[e,t]=(0,o.useState)([]),[r,s]=(0,o.useState)(!1),[p,x]=(0,o.useState)(0);(0,o.useEffect)(()=>{g();let e=setInterval(g,3e4);return()=>clearInterval(e)},[]);let g=()=>{try{let e=localStorage.getItem("adminNotifications"),r=e?JSON.parse(e):[];0===r.length&&(r=f(),localStorage.setItem("adminNotifications",JSON.stringify(r))),r.sort((e,t)=>new Date(t.timestamp)-new Date(e.timestamp)),t(r),x(r.filter(e=>!e.read).length)}catch(e){console.error("Error loading notifications:",e)}},f=()=>{let e=new Date;return[{id:"1",type:"order",title:"Nouvelle commande",message:"Commande #1234 - 2 articles pour 450 HTG",timestamp:new Date(e.getTime()-3e5).toISOString(),read:!1,icon:i.Z,color:"text-blue-600"},{id:"2",type:"user",title:"Nouvel utilisateur",message:"Jean Dupont s'est inscrit",timestamp:new Date(e.getTime()-9e5).toISOString(),read:!1,icon:c.Z,color:"text-green-600"},{id:"3",type:"warning",title:"Stock faible",message:"T-Shirt Premium - Il ne reste que 3 unit\xe9s",timestamp:new Date(e.getTime()-18e5).toISOString(),read:!0,icon:l.Z,color:"text-yellow-600"},{id:"4",type:"info",title:"Rapport mensuel",message:"Votre rapport mensuel est pr\xeat \xe0 \xeatre consult\xe9",timestamp:new Date(e.getTime()-36e5).toISOString(),read:!0,icon:d.Z,color:"text-purple-600"}]},b=e=>{t(t=>{let r=t.map(t=>t.id===e?{...t,read:!0}:t);return localStorage.setItem("adminNotifications",JSON.stringify(r)),r}),x(e=>Math.max(0,e-1))},y=e=>{t(t=>{let r=t.find(t=>t.id===e),s=t.filter(t=>t.id!==e);return localStorage.setItem("adminNotifications",JSON.stringify(s)),r&&!r.read&&x(e=>Math.max(0,e-1)),s}),n.toast.success("Notification supprim\xe9e")},v=e=>{let t=new Date,r=new Date(e),s=Math.floor((t-r)/6e4);return s<1?"\xc0 l'instant":s<60?`${s}m`:s<1440?`${Math.floor(s/60)}h`:`${Math.floor(s/1440)}j`};return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>s(!r),className:"relative p-2 text-theme-secondary hover:text-theme-primary transition-colors rounded-lg hover:bg-theme-secondary",children:[a.jsx(m.Z,{className:"w-6 h-6"}),p>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-error-color text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:p>9?"9+":p})]}),r&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>s(!1)}),(0,a.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-80 bg-theme-primary border border-theme rounded-lg shadow-lg z-50 max-h-96 overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-theme flex items-center justify-between",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-theme-primary",children:["Notifications",p>0&&(0,a.jsxs)("span",{className:"ml-2 text-sm text-theme-secondary",children:["(",p," non lues)"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[p>0&&a.jsx("button",{onClick:()=>{t(e=>{let t=e.map(e=>({...e,read:!0}));return localStorage.setItem("adminNotifications",JSON.stringify(t)),t}),x(0),n.toast.success("Toutes les notifications marqu\xe9es comme lues")},className:"text-xs text-accent hover:text-accent-hover",children:"Tout marquer lu"}),e.length>0&&a.jsx("button",{onClick:()=>{t([]),x(0),localStorage.setItem("adminNotifications",JSON.stringify([])),n.toast.success("Toutes les notifications supprim\xe9es")},className:"text-xs text-error-color hover:text-red-700",children:"Tout effacer"})]})]}),a.jsx("div",{className:"max-h-72 overflow-y-auto",children:0===e.length?(0,a.jsxs)("div",{className:"p-6 text-center text-theme-secondary",children:[a.jsx(m.Z,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),a.jsx("p",{children:"Aucune notification"})]}):e.map(e=>a.jsx("div",{className:`p-4 border-b border-theme last:border-b-0 hover:bg-theme-secondary transition-colors ${e.read?"":"bg-accent/5"}`,children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:`flex-shrink-0 p-1 ${e.color}`,children:a.jsx(e.icon,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[a.jsx("h4",{className:`text-sm font-medium ${e.read?"text-theme-secondary":"text-theme-primary"}`,children:e.title}),(0,a.jsxs)("div",{className:"flex items-center space-x-1 ml-2",children:[a.jsx("span",{className:"text-xs text-theme-tertiary flex-shrink-0",children:v(e.timestamp)}),a.jsx("button",{onClick:()=>y(e.id),className:"text-theme-tertiary hover:text-error-color",children:a.jsx(u.Z,{className:"w-4 h-4"})})]})]}),a.jsx("p",{className:"text-sm text-theme-secondary mt-1",children:e.message}),a.jsx("div",{className:"flex items-center justify-between mt-2",children:!e.read&&(0,a.jsxs)("button",{onClick:()=>b(e.id),className:"text-xs text-accent hover:text-accent-hover flex items-center space-x-1",children:[a.jsx(h.Z,{className:"w-3 h-3"}),a.jsx("span",{children:"Marquer comme lu"})]})})]})]})},e.id))})]})]})]})};s()}catch(e){s(e)}})},390:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{Z:()=>h});var a=r(997),o=r(6689),n=r(1664),i=r.n(n),c=r(6552),l=r(4451),d=r(6201),m=r(4431),u=e([d]);d=(u.then?(await u)():u)[0];let h=()=>{let[e,t]=(0,o.useState)(""),[r,s]=(0,o.useState)(!1),{isAuthenticated:n}=(0,m.a)(),u=new Date().getFullYear(),h=async r=>{if(r.preventDefault(),!e.trim()){d.toast.error("Veuillez entrer votre adresse email.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)){d.toast.error("Veuillez entrer une adresse email valide.");return}s(!0);try{let r=JSON.parse(localStorage.getItem("newsletterSubscriptions")||"[]");if(r.some(t=>t.email===e)){d.toast.error("Cette adresse email est d\xe9j\xe0 abonn\xe9e \xe0 notre newsletter."),s(!1);return}let a={email:e,subscribedAt:new Date().toISOString(),preferences:{newInventory:!0,promotions:!0,blogUpdates:!0},status:"active"};r.push(a),localStorage.setItem("newsletterSubscriptions",JSON.stringify(r));try{await fetch("https://fenkparet-backend.onrender.com/api/newsletter/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})}catch(e){console.log("Server not available, subscription stored locally")}d.toast.success("Merci de vous \xeatre abonn\xe9! Vous recevrez des notifications pour les nouveaux arrivages."),t("")}catch(e){console.error("Newsletter subscription error:",e),d.toast.error("Une erreur est survenue. Veuillez r\xe9essayer.")}finally{s(!1)}};return a.jsx("footer",{className:"bg-theme-secondary text-theme-secondary py-8 md:py-10 border-t border-theme mt-auto theme-transition",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-6",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center md:items-start text-center md:text-left space-y-3",children:[a.jsx(i(),{href:"/",className:"text-2xl font-bold text-theme-primary hover:text-accent transition-colors","aria-label":"Fenkparet Home",children:"Fenkparet"}),a.jsx("div",{className:"space-y-1 text-sm text-theme-tertiary",children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-center md:justify-start space-x-2",children:[a.jsx(c.Z,{className:"w-4 h-4 text-accent"}),a.jsx("a",{href:"tel:+50947458821",className:"hover:text-accent transition-colors",children:"(+509) 4745-8821"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-center md:justify-start space-x-2",children:[a.jsx(l.Z,{className:"w-4 h-4 text-accent"}),a.jsx("a",{href:"mailto:fenkparet509@gmail.com",className:"hover:text-accent transition-colors",children:"fenkparet509@gmail.com"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-center md:justify-start space-x-2",children:[a.jsx(c.Z,{className:"w-4 h-4 text-accent"}),a.jsx("span",{children:"(+509) 4745-8821"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-center md:justify-start space-x-2",children:[a.jsx(l.Z,{className:"w-4 h-4 text-accent"}),a.jsx("span",{children:"fenkparet509@gmail.com"})]})]})})]}),(0,a.jsxs)("div",{className:"w-full md:w-auto flex flex-col items-center md:items-end text-center md:text-right space-y-3",children:[a.jsx("h3",{className:"text-xl font-semibold text-theme-primary",children:"Newsletter"}),a.jsx("p",{className:"text-sm text-theme-tertiary max-w-sm",children:"Restez inform\xe9 de nos derniers produits et offres."}),(0,a.jsxs)("form",{onSubmit:h,className:"flex w-full max-w-sm",children:[a.jsx("input",{type:"email",value:e,onChange:e=>t(e.target.value),placeholder:"Votre email",disabled:r,className:"flex-1 px-4 py-2 rounded-l-md border border-theme-border bg-theme-input text-theme-primary placeholder-theme-tertiary focus:outline-none focus:ring-2 focus:ring-accent disabled:opacity-50","aria-label":"Votre email",required:!0}),a.jsx("button",{type:"submit",disabled:r,className:"px-5 py-2 bg-accent text-accent-contrast rounded-r-md hover:bg-accent-hover transition-colors font-medium text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:r?"En cours...":"S'abonner"})]})]})]}),(0,a.jsxs)("div",{className:"border-t border-theme pt-6 mt-6 text-center text-sm text-theme-tertiary",children:[(0,a.jsxs)("p",{className:"mb-2",children:["\xa9 ",u," Fenkparet. Tous droits r\xe9serv\xe9s."]}),(0,a.jsxs)("p",{children:["Built by"," ",a.jsx("a",{href:"https://github.com/Roma10boss",target:"_blank",rel:"noopener noreferrer",className:"text-accent hover:text-accent-hover font-medium transition-colors underline decoration-accent/30 hover:decoration-accent",children:"Romario Gustave"})]})]})]})})};s()}catch(e){s(e)}})},7287:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{Z:()=>k});var a=r(997),o=r(6689),n=r(1664),i=r.n(n);r(5675);var c=r(1163),l=r(4431),d=r(8176),m=r(7055),u=r(6201),h=r(3982),p=r(9794),x=r(2999),g=r(8245),f=r(9159),b=r(681),y=r(9308),v=r(9005),j=r(7624),w=r(5616),N=e([d,u,w]);[d,u,w]=N.then?(await N)():N;let k=()=>{let[e,t]=(0,o.useState)(!1),[r,s]=(0,o.useState)(!1),[n,u]=(0,o.useState)(!1),[N,k]=(0,o.useState)(!1),[S,C]=(0,o.useState)(""),D=(0,o.useRef)(null),E=(0,o.useRef)(null),P=(0,o.useRef)(null),A=(0,c.useRouter)(),{user:T,logout:$,isAuthenticated:R}=(0,l.a)(),{getItemCount:I}=(0,d.j)(),{toggleTheme:O,isDark:Z}=(0,m.F)(),{notifications:z,markAsRead:F,clearNotification:L,getUnreadCount:q,clearAllNotifications:M}=(0,w.s)(),U=I(),V=q(),H=e=>{e.preventDefault(),S.trim()&&(A.push(`/products?search=${encodeURIComponent(S.trim())}`),u(!1),C(""))},J=e=>{C(e)},_=e=>{"Enter"===e.key&&H(e)};(0,o.useEffect)(()=>{let e=e=>{!P.current||P.current.contains(e.target)||e.target.closest(".notification-toggle")||k(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[N]);let B=[{name:"Accueil",href:"/"},{name:"Produits",href:"/products"},{name:"Nouveaut\xe9s",href:"/nouveautes"},{name:"Contact",href:"/contact"},{name:"\xc0 propos",href:"/about"}];return(0,o.useEffect)(()=>{n&&E.current&&setTimeout(()=>{E.current.focus()},100)},[n]),(0,o.useEffect)(()=>{let e=e=>{!r||e.target.closest(".user-menu-dropdown")||e.target.closest(".user-menu-toggle")||s(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[r]),(0,o.useEffect)(()=>{t(!1)},[A.asPath]),a.jsx("header",{className:"bg-theme-primary text-theme-primary shadow-sm border-b border-theme sticky top-0 z-50 theme-transition",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center h-16 min-h-[4rem]",children:[(0,a.jsxs)("div",{className:"flex items-center min-w-0 flex-1 lg:flex-initial",children:[a.jsx(i(),{href:"/",className:"text-xl font-bold text-theme-primary hover:text-accent transition-colors flex-shrink-0",children:"Fenkparet"}),a.jsx("nav",{className:"hidden lg:flex ml-6 xl:ml-8 space-x-1 xl:space-x-3 overflow-hidden",children:B.map(e=>a.jsx(i(),{href:e.href,className:"nav-link px-2 py-2 text-sm font-medium whitespace-nowrap hover:bg-theme-secondary rounded-md transition-colors",children:e.name},e.name))})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1 sm:space-x-2 lg:space-x-3 flex-shrink-0",children:[(0,a.jsxs)("form",{onSubmit:H,className:"hidden lg:flex relative items-center w-48 xl:w-64",children:[a.jsx(h.Z,{className:"absolute left-3 h-5 w-5 text-theme-secondary pointer-events-none"}),a.jsx("input",{ref:D,type:"text",value:S,onChange:e=>J(e.target.value),onKeyPress:_,placeholder:"Rechercher...",className:"pl-10 pr-12 py-2 w-full rounded-md border border-theme-border bg-theme-input text-theme-primary placeholder-theme-tertiary focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent text-sm"}),a.jsx("button",{type:"submit",className:"absolute right-2 p-1 text-theme-secondary hover:text-accent transition-colors",children:a.jsx(h.Z,{className:"h-4 w-4"})})]}),a.jsx("button",{onClick:()=>u(!n),className:"lg:hidden btn-ghost p-2","aria-label":"Search",children:a.jsx(h.Z,{className:"w-5 h-5 text-theme-secondary"})}),a.jsx("button",{onClick:O,className:"btn-ghost p-2 theme-toggle-btn","aria-label":"Toggle theme",children:Z?a.jsx(p.Z,{className:"w-4 h-4 sm:w-5 sm:h-5"}):a.jsx(x.Z,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),T&&(0,a.jsxs)("div",{className:"relative",ref:P,children:[(0,a.jsxs)("button",{onClick:()=>k(!N),className:"p-2 rounded-full hover:bg-theme-secondary transition-colors relative notification-toggle","aria-label":"Notifications",children:[a.jsx(g.Z,{className:"w-6 h-6 text-theme-secondary"}),V>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-error-color text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:V>99?"99+":V})]}),N&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-80 bg-theme-primary rounded-lg shadow-lg border border-theme z-50",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-theme flex justify-between items-center",children:[a.jsx("h3",{className:"font-semibold text-lg",children:"Notifications"}),a.jsx("button",{onClick:M,className:"text-sm text-theme-tertiary hover:text-accent",children:"Tout effacer"})]}),a.jsx("div",{className:"max-h-60 overflow-y-auto",children:z&&0===z.length?a.jsx("p",{className:"text-center text-theme-tertiary p-4",children:"Aucune nouvelle notification."}):z&&z.map(e=>(0,a.jsxs)("div",{onClick:()=>F(e.id),className:`p-3 border-b border-theme last:border-b-0 cursor-pointer ${e.read?"bg-theme-secondary text-theme-tertiary":"bg-theme-bg hover:bg-theme-secondary"}`,children:[a.jsx("p",{className:`font-medium ${e.read?"text-theme-tertiary":"text-theme-primary"}`,children:e.message}),a.jsx("span",{className:"text-xs text-theme-tertiary",children:new Date(e.timestamp).toLocaleString()})]},e.id))})]})]}),(0,a.jsxs)(i(),{href:"/cart",className:"btn-ghost p-2 relative group","aria-label":"Shopping cart",children:[a.jsx(f.Z,{className:"w-4 h-4 sm:w-5 sm:h-5 text-theme-secondary"}),U>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-accent text-accent-contrast text-xs rounded-full h-4 w-4 sm:h-5 sm:w-5 flex items-center justify-center font-bold animate-pulse min-w-[1rem] sm:min-w-[1.25rem]",children:U>99?"99+":U})]}),R?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>s(!r),className:"user-menu-toggle flex items-center space-x-1 sm:space-x-2 btn-ghost px-2 py-2","aria-label":"User menu",children:[a.jsx(b.Z,{className:"w-4 h-4 sm:w-5 sm:h-5 text-accent flex-shrink-0"}),a.jsx("span",{className:"hidden md:block text-sm font-medium max-w-[60px] lg:max-w-[80px] truncate text-theme-primary",children:T?.name||"User"}),a.jsx(y.Z,{className:`w-3 h-3 sm:w-4 sm:h-4 text-theme-secondary transition-transform flex-shrink-0 ${r?"rotate-180":""}`})]}),r&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>s(!1)}),a.jsx("div",{className:"user-menu-dropdown absolute right-0 mt-2 w-56 rounded-xl shadow-lg z-50 bg-theme-primary border border-theme animate-fade-in-scale",children:(0,a.jsxs)("div",{className:"py-2",children:[(0,a.jsxs)("div",{className:"px-4 py-3 border-b border-theme",children:[a.jsx("p",{className:"text-sm font-medium text-theme-primary truncate",children:T?.name||"User"}),a.jsx("p",{className:"text-xs text-theme-tertiary truncate",children:T?.email})]}),a.jsx(i(),{href:"/user/profile",className:"block px-4 py-2 text-sm nav-link",children:"Profil"}),a.jsx(i(),{href:"/user/orders",className:"block px-4 py-2 text-sm nav-link",children:"Mes commandes"}),T?.isAdmin&&a.jsx(i(),{href:"/admin/dashboard",className:"block px-4 py-2 text-sm nav-link",children:"Administration"}),a.jsx("hr",{className:"my-2 border-theme"}),a.jsx("button",{onClick:()=>{$(),s(!1)},className:"block w-full text-left px-4 py-2 text-sm nav-link",children:"D\xe9connexion"})]})})]})]}):a.jsx(i(),{href:"/auth/login",className:"btn-primary text-sm px-3 py-2 whitespace-nowrap",children:"Connexion"}),a.jsx("button",{onClick:()=>t(!e),className:"lg:hidden btn-ghost p-2 ml-1","aria-label":"Toggle menu",children:e?a.jsx(v.Z,{className:"w-5 h-5 sm:w-6 sm:h-6 text-theme-secondary"}):a.jsx(j.Z,{className:"w-5 h-5 sm:w-6 sm:h-6 text-theme-secondary"})})]})]}),n&&a.jsx("div",{className:"lg:hidden p-4 border-t border-theme animate-fade-in-down",children:(0,a.jsxs)("form",{onSubmit:H,className:"relative flex items-center",children:[a.jsx(h.Z,{className:"absolute left-3 h-5 w-5 text-theme-secondary pointer-events-none"}),a.jsx("input",{ref:E,type:"text",value:S,onChange:e=>J(e.target.value),onKeyPress:_,placeholder:"Rechercher...",className:"pl-10 pr-12 py-2 w-full rounded-md border border-theme-border bg-theme-input text-theme-primary placeholder-theme-tertiary focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent",autoFocus:!0}),a.jsx("button",{type:"submit",className:"absolute right-2 p-1 text-theme-secondary hover:text-accent transition-colors",children:a.jsx(h.Z,{className:"h-4 w-4"})})]})}),e&&a.jsx("div",{className:"lg:hidden border-t border-theme animate-fade-in-up",children:(0,a.jsxs)("div",{className:"py-4 space-y-2",children:[B.map(e=>a.jsx(i(),{href:e.href,className:"block py-3 px-2 nav-link rounded-md hover:bg-theme-secondary transition-colors",onClick:()=>t(!1),children:e.name},e.name)),!R&&a.jsx("div",{className:"pt-4 border-t border-theme mt-4",children:a.jsx(i(),{href:"/auth/register",className:"block w-full btn-primary text-center",onClick:()=>t(!1),children:"Inscription"})})]})})]})})};s()}catch(e){s(e)}})},5621:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{Z:()=>j});var a=r(997),o=r(9816),n=r.n(o),i=r(6689),c=r(968),l=r.n(c),d=r(1163),m=r(7287),u=r(390),h=r(5616),p=r(7055),x=r(4431),g=r(8277),f=r(9290),b=e([m,u,h,f]);[m,u,h,f]=b.then?(await b)():b;let y=()=>{let[e,t]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{},[]),e)?a.jsx("button",{onClick:()=>{},className:"fixed bottom-4 right-4 bg-accent hover:bg-accent-hover text-accent-contrast p-3 rounded-full shadow-lg transition-all duration-300 z-40 focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2","aria-label":"Back to top",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})})}):null},v=()=>{let e=(0,d.useRouter)(),[t,r]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{let t=()=>r(!0),s=()=>r(!1);return e.events.on("routeChangeStart",t),e.events.on("routeChangeComplete",s),e.events.on("routeChangeError",s),()=>{e.events.off("routeChangeStart",t),e.events.off("routeChangeComplete",s),e.events.off("routeChangeError",s)}},[e]),t)?(0,a.jsxs)("div",{className:"jsx-9eb2dbae523994c8 fixed top-0 left-0 w-full h-1 z-50",children:[a.jsx("div",{className:"jsx-9eb2dbae523994c8 h-full accent-gradient animate-loading-bar"}),a.jsx(n(),{id:"9eb2dbae523994c8",children:"@-webkit-keyframes loading-bar{0%{-webkit-transform:translatex(-100%);transform:translatex(-100%)}100%{-webkit-transform:translatex(100%);transform:translatex(100%)}}@-moz-keyframes loading-bar{0%{-moz-transform:translatex(-100%);transform:translatex(-100%)}100%{-moz-transform:translatex(100%);transform:translatex(100%)}}@-o-keyframes loading-bar{0%{-o-transform:translatex(-100%);transform:translatex(-100%)}100%{-o-transform:translatex(100%);transform:translatex(100%)}}@keyframes loading-bar{0%{-webkit-transform:translatex(-100%);-moz-transform:translatex(-100%);-o-transform:translatex(-100%);transform:translatex(-100%)}100%{-webkit-transform:translatex(100%);-moz-transform:translatex(100%);-o-transform:translatex(100%);transform:translatex(100%)}}.animate-loading-bar.jsx-9eb2dbae523994c8{-webkit-animation:loading-bar 1.5s infinite;-moz-animation:loading-bar 1.5s infinite;-o-animation:loading-bar 1.5s infinite;animation:loading-bar 1.5s infinite}"})]}):null},j=({children:e,title:t,description:r,keywords:s,noIndex:o=!1})=>{let n=(0,d.useRouter)(),{trackOrder:c}=(0,h.s)(),{mounted:b}=(0,p.F)(),{loading:j}=(0,x.a)(),w=t?`${t} | Fenkparet`:"Fenkparet",N=r||"Quality products at great prices";return((0,i.useEffect)(()=>{if(!n?.events)return;let e=e=>{};return n.events.on("routeChangeComplete",e),()=>{n.events.off("routeChangeComplete",e)}},[n?.events]),(0,i.useEffect)(()=>{n?.query?.track&&"string"==typeof n.query.track&&c(n.query.track)},[n?.query?.track,c]),!b||j)?a.jsx(g.h,{message:"Loading application..."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l(),{children:[a.jsx("title",{children:w}),a.jsx("meta",{name:"description",content:N}),a.jsx("meta",{name:"keywords",content:s||"fenkparet, quality products, haitian products"}),a.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),a.jsx("meta",{charSet:"utf-8"}),o&&a.jsx("meta",{name:"robots",content:"noindex, nofollow"}),a.jsx("meta",{property:"og:type",content:"website"}),a.jsx("meta",{property:"og:title",content:w}),a.jsx("meta",{property:"og:description",content:N}),a.jsx("meta",{property:"og:locale",content:"en_US"}),a.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),a.jsx("meta",{name:"twitter:title",content:w}),a.jsx("meta",{name:"twitter:description",content:N}),a.jsx("meta",{name:"theme-color",content:"#b8d2b3"}),a.jsx("meta",{name:"application-name",content:"Fenkparet"}),a.jsx("link",{rel:"icon",href:"/favicon.ico"}),a.jsx("link",{rel:"canonical",href:`https://fenparet-website.web.app${n?.asPath||""}`})]}),(0,a.jsxs)("div",{className:"min-h-screen flex flex-col bg-theme-primary text-theme-primary theme-transition",children:[a.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-0 focus:left-0 bg-accent text-accent-contrast px-4 py-2 z-50 transition-all",children:"Skip to main content"}),a.jsx(m.Z,{className:"sticky top-0 z-40 w-full bg-theme-primary border-b border-theme-border",locale:"en"}),a.jsx("main",{id:"main-content",className:"flex-1 focus:outline-none",tabIndex:"-1",role:"main",children:e}),a.jsx(u.Z,{}),a.jsx(y,{}),a.jsx(v,{}),a.jsx(f.Z,{})]})]})};s()}catch(e){s(e)}})},8277:(e,t,r)=>{"use strict";r.d(t,{h:()=>o});var s=r(997);r(6689);var a=r(2638);let o=({message:e="Chargement de l'application...",size:t="large"})=>(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen w-full bg-theme-primary text-theme-primary",children:[s.jsx(a.T,{size:t}),e&&s.jsx("p",{className:"mt-4 text-lg font-medium",children:e})]})},2638:(e,t,r)=>{"use strict";r.d(t,{T:()=>a,Z:()=>o});var s=r(997);r(6689);let a=({size:e="normal",className:t=""})=>s.jsx("div",{className:`spinner inline-block border-current border-r-transparent rounded-full animate-spin ${{small:"w-4 h-4 border-2",normal:"w-6 h-6 border-2",large:"w-8 h-8 border-4",xl:"w-12 h-12 border-4"}[e]} ${t}`,role:"status","aria-label":"Chargement",children:s.jsx("span",{className:"sr-only",children:"Chargement..."})}),o=a},8176:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{Z:()=>m,j:()=>u});var a=r(997),o=r(6689),n=r(6201),i=e([n]);n=(i.then?(await i)():i)[0];let c=(0,o.createContext)(),l=(e,t)=>{switch(t.type){case"ADD_ITEM":{let r;let{product:s,quantity:a=1,selectedVariant:o=null}=t.payload,n=o?`${s._id}-${o.id}`:s._id,i=e.items.findIndex(e=>e.id===n);if(i>-1)r=e.items.map((e,t)=>t===i?{...e,quantity:e.quantity+a}:e);else{let t={id:n,productId:s._id,name:s.name,price:o?.price||s.pricing?.price||s.price,image:s.images?.[0]?.url||"/placeholder-image.jpg",quantity:a,variant:o,slug:s.slug};r=[...e.items,t]}return{...e,items:r}}case"REMOVE_ITEM":{let r=e.items.filter(e=>e.id!==t.payload);return{...e,items:r}}case"UPDATE_QUANTITY":{let{id:r,quantity:s}=t.payload;if(s<=0)return{...e,items:e.items.filter(e=>e.id!==r)};let a=e.items.map(e=>e.id===r?{...e,quantity:s}:e);return{...e,items:a}}case"CLEAR_CART":return{...e,items:[]};case"LOAD_CART":return{...e,items:t.payload};default:return e}},d={items:[]},m=({children:e})=>{let[t,r]=(0,o.useReducer)(l,d),[s,n]=(0,o.useState)(!1);(0,o.useEffect)(()=>{n(!0)},[]),(0,o.useEffect)(()=>{if(s){let e=localStorage.getItem("cart");if(e)try{let t=JSON.parse(e);r({type:"LOAD_CART",payload:t})}catch(e){console.error("Error loading cart from localStorage:",e),localStorage.removeItem("cart")}}},[s]),(0,o.useEffect)(()=>{s&&localStorage.setItem("cart",JSON.stringify(t.items))},[t.items,s]);let i=()=>{let e=t.items.reduce((e,t)=>e+t.price*t.quantity,0),r=t.items.reduce((e,t)=>e+t.quantity,0),s=.1*e,a=e>100?0:10;return{subtotal:e,itemCount:r,tax:s,shipping:a,total:e+s+a}},m={items:t.items,addToCart:(e,t=1,s=null)=>{r({type:"ADD_ITEM",payload:{product:e,quantity:t,selectedVariant:s}})},removeFromCart:e=>{r({type:"REMOVE_ITEM",payload:e})},updateQuantity:(e,t)=>{r({type:"UPDATE_QUANTITY",payload:{id:e,quantity:t}})},clearCart:()=>{r({type:"CLEAR_CART"})},getTotals:i,getCartTotals:i,isEmpty:()=>0===t.items.length,isInCart:(e,r=null)=>{let s=r?`${e}-${r}`:e;return t.items.some(e=>e.id===s)},getItemQuantity:(e,r=null)=>{let s=r?`${e}-${r}`:e,a=t.items.find(e=>e.id===s);return a?a.quantity:0},getItemCount:()=>t.items.reduce((e,t)=>e+t.quantity,0)};return a.jsx(c.Provider,{value:m,children:e})},u=()=>{let e=(0,o.useContext)(c);if(!e)throw Error("useCart must be used within a CartProvider");return e};s()}catch(e){s(e)}})},5616:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{s:()=>u,w:()=>m});var a=r(997),o=r(6689),n=r(4612),i=r(6201),c=r(4431),l=e([n,i]);[n,i]=l.then?(await l)():l;let d=(0,o.createContext)(),m=({children:e})=>{let{user:t,loading:r}=(0,c.a)(),[s,l]=(0,o.useState)(null),[m,u]=(0,o.useState)(!1),[h,p]=(0,o.useState)([]),x=e=>{let t={...e,id:Date.now()+Math.random(),read:!1,timestamp:new Date(e.timestamp||Date.now())};p(e=>[t,...e].slice(0,50))};return(0,o.useEffect)(()=>{if(!r&&!s){console.log("Creating new socket connection...");let e=(0,n.default)("https://fenkparet-backend.onrender.com",{autoConnect:!1,query:{userId:t?._id||t?.id||""}});l(e)}},[r,t]),(0,o.useEffect)(()=>{if(!s||r)return;let e=()=>{u(!0),console.log("Socket connected"),t&&(t.isAdmin||"admin"===t.role?s.emit("join-admin",{isAdmin:!0}):s.emit("join-user",{userId:t._id||t.id}))},a=()=>{u(!1),console.log("Socket disconnected")},o=e=>{(t?.isAdmin||t?.role==="admin")&&(x(e),i.toast.success(e.message,{duration:6e3,icon:"\uD83D\uDED2"}))},n=e=>{(t?.isAdmin||t?.role==="admin")&&(x(e),i.toast.success(e.message,{duration:6e3,icon:"\uD83C\uDFAB"}))},c=e=>{(t?.isAdmin||t?.role==="admin")&&(x(e),i.toast.error(e.message,{duration:8e3,icon:"\uD83D\uDCB3"}))},l=e=>{(t?.isAdmin||t?.role==="admin")&&(x(e),i.toast.error(e.message,{duration:6e3,icon:"\uD83D\uDCE6"}))},d=e=>{x(e),i.toast.success(e.message,{duration:5e3,icon:"\uD83D\uDCCB"})},m=e=>{x(e),i.toast.success(e.message,{duration:6e3,icon:"✅"})},h=e=>{x(e),i.toast.error(e.message,{duration:6e3,icon:"❌"})},g=e=>{x(e),i.toast.success(e.message,{duration:5e3,icon:"\uD83D\uDCAC"})},f=e=>{x(e);let t="urgent"===e.priority||"high"===e.priority?"error":"success";i.toast[t](e.message,{duration:8e3,icon:"\uD83D\uDCE2"})},b=e=>{x(e),i.toast.success(e.message)},y=e=>{(t?.isAdmin||t?.role==="admin")&&(x(e),i.toast.success(e.message))};return s.on("connect",e),s.on("disconnect",a),s.on("new-order",o),s.on("new-ticket",n),s.on("payment-confirmation",c),s.on("low-stock",l),s.on("order-update",d),s.on("payment-confirmed",m),s.on("order-cancelled",h),s.on("ticket-response",g),s.on("system-announcement",f),s.on("user-notification",b),s.on("admin-notification",y),t?s.connect():(s.disconnect(),p([])),()=>{s.off("connect",e),s.off("disconnect",a),s.off("new-order",o),s.off("new-ticket",n),s.off("payment-confirmation",c),s.off("low-stock",l),s.off("order-update",d),s.off("payment-confirmed",m),s.off("order-cancelled",h),s.off("ticket-response",g),s.off("system-announcement",f),s.off("user-notification",b),s.off("admin-notification",y)}},[s,t,r]),(0,o.useEffect)(()=>()=>{s&&(s.disconnect(),s.close())},[]),a.jsx(d.Provider,{value:{socket:s,connected:m,notifications:h,addNotification:x,markAsRead:e=>{p(t=>t.map(t=>t.id===e?{...t,read:!0}:t))},markAllAsRead:()=>{p(e=>e.map(e=>({...e,read:!0})))},clearNotification:e=>{p(t=>t.filter(t=>t.id!==e))},clearAllNotifications:()=>{p([])},getUnreadCount:()=>h.filter(e=>!e.read).length,trackOrder:e=>{s&&m&&s.emit("track-order",{orderNumber:e})},joinRoom:e=>{s&&m&&s.emit("join-room",{room:e})},leaveRoom:e=>{s&&m&&s.emit("leave-room",{room:e})}},children:e})},u=()=>{let e=(0,o.useContext)(d);if(!e)throw Error("useSocket must be used within a SocketProvider");return e};s()}catch(e){s(e)}})},7055:(e,t,r)=>{"use strict";r.d(t,{F:()=>i,f:()=>n});var s=r(997),a=r(6689);let o=(0,a.createContext)(void 0),n=({children:e})=>{let[t,r]=(0,a.useState)("light"),[n,i]=(0,a.useState)(!1);(0,a.useEffect)(()=>{},[]),(0,a.useEffect)(()=>{if(n){let e=document.documentElement;e.classList.remove("light","dark"),"dark"===t||"system"===t&&window.matchMedia("(prefers-color-scheme: dark)").matches?e.classList.add("dark"):e.classList.add("light"),localStorage.setItem("fenkparet-theme",t)}},[t,n]),(0,a.useEffect)(()=>{let e=window.matchMedia("(prefers-color-scheme: dark)"),t=e=>{let t=localStorage.getItem("fenkparet-theme");t&&"system"!==t||r(e.matches?"dark":"light")};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[]);let c=(0,a.useCallback)(()=>{r(e=>"light"===e?"dark":"light")},[]),l=(0,a.useCallback)(()=>r("light"),[]),d=(0,a.useCallback)(()=>r("dark"),[]),m=(0,a.useCallback)(()=>r("system"),[]),u=n&&document.documentElement.classList.contains("dark");return s.jsx(o.Provider,{value:{theme:t,toggleTheme:c,setLightTheme:l,setDarkTheme:d,setSystemTheme:m,isDark:u,isLight:!u,mounted:n},children:e})},i=()=>{let e=(0,a.useContext)(o);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},3580:(e,t,r)=>{"use strict";r.d(t,{$j:()=>i});var s=r(997),a=r(6689);let o={fr:{"navigation.home":"Accueil","navigation.products":"Produits","navigation.categories":"Cat\xe9gories","navigation.contact":"Contact","navigation.about":"\xc0 propos","navigation.cart":"Panier","navigation.login":"Connexion","navigation.register":"Inscription","navigation.profile":"Profil","navigation.orders":"Commandes","navigation.logout":"D\xe9connexion","navigation.admin":"Administration","navigation.dashboard":"Tableau de bord","home.welcome":"Bienvenue chez","home.hero.subtitle":"Votre marketplace de confiance pour des produits ha\xeftiens de qualit\xe9","home.exploreCategories":"Explorez nos cat\xe9gories","home.categoriesDesc":"Trouvez exactement ce que vous cherchez dans notre large gamme de cat\xe9gories de produits.","home.featuredProducts":"Produits en vedette","home.featuredProductsDesc":"D\xe9couvrez nos produits les plus populaires, soigneusement s\xe9lectionn\xe9s pour leur qualit\xe9 et leur valeur.","home.newArrivals":"Nouveaut\xe9s","home.newArrivalsDesc":"Nouveaux arrivages rien que pour vous. Soyez les premiers \xe0 obtenir ces nouveaux produits incroyables.","product.addToCart":"Ajouter au panier","product.outOfStock":"Rupture de stock","product.lowStock":"Stock faible","product.reviews":"avis","product.featured":"Produits en vedette","product.viewAllProducts":"Voir tous les produits","product.viewAllFeatured":"Voir tout en vedette","product.freeShipping":"Livraison gratuite","product.quantity":"Quantit\xe9","product.freeShippingDesc":"Livraison gratuite pour les commandes de plus de 1000 HTG","product.securePayment":"Paiement s\xe9curis\xe9","product.securePaymentDesc":"Paiement MonCash avec v\xe9rification administrateur","product.qualityProducts":"Produits de qualit\xe9","product.qualityProductsDesc":"Articles de qualit\xe9 sup\xe9rieure \xe0 des prix avantageux","category.electronics":"\xc9lectronique","category.clothing":"V\xeatements","category.homeGoods":"Articles m\xe9nagers","category.accessories":"Accessoires","cart.title":"Panier","cart.empty":"Votre panier est vide. Commencez vos achats!","cart.itemCount":"article","cart.itemCount_plural":"articles","cart.subtotal":"Sous-total","cart.tax":"Taxes","cart.shipping":"Livraison","cart.total":"Total","cart.checkout":"Passer \xe0 la caisse","cart.clearCart":"Vider le panier","cart.remove":"Retirer","cart.proceedToCheckout":"Finaliser la commande","checkout.title":"Commande","checkout.orderSummary":"R\xe9sum\xe9 de la commande","checkout.billingAddress":"Adresse de facturation","checkout.shippingAddress":"Adresse de livraison","checkout.paymentMethod":"M\xe9thode de paiement","checkout.placeOrder":"Passer la commande","checkout.orderPlaced":"Commande pass\xe9e avec succ\xe8s!","checkout.moncash":"MonCash","checkout.moncashDesc":"Payez en toute s\xe9curit\xe9 avec MonCash","user.profile":"Mon profil","user.orders":"Mes commandes","user.personalInfo":"Informations personnelles","user.changePassword":"Changer le mot de passe","user.preferences":"Pr\xe9f\xe9rences","order.orderHistory":"Historique des commandes","order.orderNumber":"Num\xe9ro de commande","order.status":"Statut","order.total":"Total","order.date":"Date","order.noOrders":"Aucune commande trouv\xe9e","order.trackOrder":"Suivre votre commande","footer.newsletter":"Newsletter","footer.newsletterDesc":"Restez inform\xe9 de nos derniers produits et offres.","footer.subscribe":"S'abonner","footer.emailPlaceholder":"Votre email","footer.allRightsReserved":"Tous droits r\xe9serv\xe9s.","footer.madeWith":"Fait avec","footer.inHaiti":"en Ha\xefti","common.loading":"Chargement...","common.error":"Erreur","common.success":"Succ\xe8s","common.cancel":"Annuler","common.save":"Enregistrer","common.edit":"Modifier","common.delete":"Supprimer","common.confirm":"Confirmer","common.close":"Fermer","common.back":"Retour","common.next":"Suivant","common.previous":"Pr\xe9c\xe9dent","common.search":"Rechercher","common.filter":"Filtrer","common.sort":"Trier","common.view":"Voir","common.new":"NOUVEAU","common.featured":"EN VEDETTE","common.products":"produits","common.continueShopping":"Continuer les achats","common.startShopping":"Commencer les achats","common.each":"chacun","common.or":"ou","buttons.submit":"Soumettre","buttons.reset":"R\xe9initialiser","buttons.clear":"Effacer","buttons.apply":"Appliquer","buttons.update":"Mettre \xe0 jour","buttons.create":"Cr\xe9er","buttons.add":"Ajouter","buttons.remove":"Retirer","error.generic":"Une erreur s'est produite","error.network":"Erreur de r\xe9seau","error.404":"Page non trouv\xe9e","error.500":"Erreur du serveur","error.goHome":"Aller \xe0 l'accueil","error.tryAgain":"R\xe9essayer","notifications.title":"Notifications","notifications.clearAll":"Tout effacer","notifications.empty":"Aucune nouvelle notification.","messages.loggedOutSuccessfully":"D\xe9connexion r\xe9ussie!","auth.login":"Se connecter","auth.register":"S'inscrire","auth.logout":"Se d\xe9connecter","auth.email":"Email","auth.password":"Mot de passe","auth.confirmPassword":"Confirmer le mot de passe","auth.firstName":"Pr\xe9nom","auth.lastName":"Nom","auth.phone":"T\xe9l\xe9phone","auth.loginRequired":"Vous devez \xeatre connect\xe9 pour acc\xe9der \xe0 cette page."},en:{"navigation.home":"Home","navigation.products":"Products","navigation.categories":"Categories","navigation.contact":"Contact","navigation.about":"About","navigation.cart":"Cart","navigation.login":"Login","navigation.register":"Register","navigation.profile":"Profile","navigation.orders":"Orders","navigation.logout":"Logout","navigation.admin":"Admin","navigation.dashboard":"Dashboard","home.welcome":"Welcome to","home.hero.subtitle":"Your trusted marketplace for quality Haitian products","home.exploreCategories":"Explore Our Categories","home.categoriesDesc":"Find exactly what you are looking for across a wide range of product categories.","home.featuredProducts":"Featured Products","home.featuredProductsDesc":"Check out our most popular products, carefully selected for quality and value.","home.newArrivals":"New Arrivals","home.newArrivalsDesc":"Fresh arrivals just for you. Be the first to get these amazing new products.","product.addToCart":"Add to Cart","product.outOfStock":"Out of Stock","product.lowStock":"Low Stock","product.reviews":"reviews","product.featured":"Featured Products","product.viewAllProducts":"View All Products","product.viewAllFeatured":"View All Featured","product.freeShipping":"Free Shipping","product.quantity":"Quantity","product.freeShippingDesc":"Free shipping on orders over 1000 HTG","product.securePayment":"Secure Payment","product.securePaymentDesc":"MonCash payment with admin verification","product.qualityProducts":"Quality Products","product.qualityProductsDesc":"Premium quality items at great prices","category.electronics":"Electronics","category.clothing":"Clothing","category.homeGoods":"Home Goods","category.accessories":"Accessories","cart.title":"Cart","cart.empty":"Your cart is empty. Start shopping!","cart.itemCount":"item","cart.itemCount_plural":"items","cart.subtotal":"Subtotal","cart.tax":"Tax","cart.shipping":"Shipping","cart.total":"Total","cart.checkout":"Checkout","cart.clearCart":"Clear Cart","cart.remove":"Remove","cart.proceedToCheckout":"Proceed to Checkout","checkout.title":"Checkout","checkout.orderSummary":"Order Summary","checkout.billingAddress":"Billing Address","checkout.shippingAddress":"Shipping Address","checkout.paymentMethod":"Payment Method","checkout.placeOrder":"Place Order","checkout.orderPlaced":"Order Placed Successfully!","checkout.moncash":"MonCash","checkout.moncashDesc":"Pay securely with MonCash","user.profile":"My Profile","user.orders":"My Orders","user.personalInfo":"Personal Information","user.changePassword":"Change Password","user.preferences":"Preferences","order.orderHistory":"Order History","order.orderNumber":"Order Number","order.status":"Status","order.total":"Total","order.date":"Date","order.noOrders":"No Orders Found","order.trackOrder":"Track Your Order","footer.newsletter":"Newsletter","footer.newsletterDesc":"Stay updated with our latest products and offers.","footer.subscribe":"Subscribe","footer.emailPlaceholder":"Your email","footer.allRightsReserved":"All rights reserved.","footer.madeWith":"Made with","footer.inHaiti":"in Haiti","common.loading":"Loading...","common.error":"Error","common.success":"Success","common.cancel":"Cancel","common.save":"Save","common.edit":"Edit","common.delete":"Delete","common.confirm":"Confirm","common.close":"Close","common.back":"Back","common.next":"Next","common.previous":"Previous","common.search":"Search","common.filter":"Filter","common.sort":"Sort","common.view":"View","common.new":"NEW","common.featured":"FEATURED","common.products":"products","common.continueShopping":"Continue Shopping","common.startShopping":"Start Shopping","common.each":"each","common.or":"or","buttons.submit":"Submit","buttons.reset":"Reset","buttons.clear":"Clear","buttons.apply":"Apply","buttons.update":"Update","buttons.create":"Create","buttons.add":"Add","buttons.remove":"Remove","error.generic":"An error occurred","error.network":"Network error","error.404":"Page Not Found","error.500":"Server Error","error.goHome":"Go to Homepage","error.tryAgain":"Try Again","notifications.title":"Notifications","notifications.clearAll":"Clear All","notifications.empty":"No new notifications.","messages.loggedOutSuccessfully":"Logged out successfully!","auth.login":"Login","auth.register":"Register","auth.logout":"Logout","auth.email":"Email","auth.password":"Password","auth.confirmPassword":"Confirm Password","auth.firstName":"First Name","auth.lastName":"Last Name","auth.phone":"Phone","auth.loginRequired":"You must be logged in to view this page."}},n=(0,a.createContext)(),i=({children:e})=>{let[t,r]=(0,a.useState)("fr"),[i,c]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=localStorage.getItem("language");e&&("fr"===e||"en"===e)&&r(e)},[]),(0,a.useEffect)(()=>{localStorage.setItem("language",t)},[t]);let l=async e=>{e!==t&&(c(!0),await new Promise(e=>setTimeout(e,200)),r(e),c(!1))};return s.jsx(n.Provider,{value:{language:t,setLanguage:r,changeLanguage:l,t:(e,r=null)=>{let s=e.split("."),a=o[t];for(let e of s)if(a&&"object"==typeof a)a=a[e];else{a=void 0;break}if(void 0===a&&"en"!==t){let e=o.en;for(let t of s)if(e&&"object"==typeof e)e=e[t];else{e=void 0;break}a=e}return a||r||e},formatCurrency:e=>"fr"===t?`${e.toFixed(2)} HTG`:`$${e.toFixed(2)}`,formatDate:e=>new Date(e).toLocaleDateString("fr"===t?"fr-HT":"en-US",{year:"numeric",month:"long",day:"numeric"}),isLoading:i,availableLanguages:[{code:"fr",name:"Fran\xe7ais",flag:"\uD83C\uDDED\uD83C\uDDF9"},{code:"en",name:"English",flag:"\uD83C\uDDFA\uD83C\uDDF8"}]},children:e})}},4431:(e,t,r)=>{"use strict";r.d(t,{H:()=>i,a:()=>c});var s=r(997),a=r(6689),o=r(1163);let n=(0,a.createContext)(),i=({children:e})=>{let[t,r]=(0,a.useState)(null),[i,c]=(0,a.useState)(!0),[l,d]=(0,a.useState)(null),m=(0,o.useRouter)();(0,a.useEffect)(()=>{u()},[]);let u=async()=>{try{let e=localStorage.getItem("token"),t=localStorage.getItem("user");if(!e){c(!1);return}if(d(e),t)try{let e=JSON.parse(t);r(e),console.log("\uD83D\uDD10 User loaded from storage:",e)}catch(e){console.error("Error parsing stored user:",e),localStorage.removeItem("user")}let s=await fetch("https://fenkparet-backend.onrender.com/api/auth/me",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},mode:"cors"});if(s.ok){let e=await s.json();r(e.user),localStorage.setItem("user",JSON.stringify(e.user)),console.log("✅ User verified with server:",e.user)}else console.log("❌ Token invalid, clearing storage"),localStorage.removeItem("token"),localStorage.removeItem("user"),d(null),r(null)}catch(e){console.error("Auth check failed:",e),localStorage.removeItem("token"),localStorage.removeItem("user"),d(null),r(null)}finally{c(!1)}},h=async(e,t)=>{try{console.log("\uD83D\uDD04 Attempting login for:",e);let s="https://fenkparet-backend.onrender.com";console.log("\uD83C\uDF10 API URL:",s);let a=await fetch(`${s}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},mode:"cors",body:JSON.stringify({email:e,password:t})});console.log("\uD83D\uDCE1 Response status:",a.status,a.statusText);let o=await a.json();if(console.log("\uD83D\uDCE1 Login response:",o),a.ok&&o.success)return localStorage.setItem("token",o.token),localStorage.setItem("user",JSON.stringify(o.user)),d(o.token),r(o.user),console.log("✅ Login successful:",o.user),console.log("\uD83D\uDEE1️  Is Admin?",o.user.isAdmin,o.user.role),{success:!0,user:o.user};if(console.log("❌ Login failed:",a.status,o.message),429===a.status)return{success:!1,error:"Trop de tentatives. Veuillez patienter quelques minutes et r\xe9essayer."};if(a.status>=500)return{success:!1,error:"Erreur du serveur. Le service est temporairement indisponible."};return{success:!1,error:o.message||"Identifiants incorrects."}}catch(s){if(console.error("❌ Login error:",s),"TypeError"===s.name&&s.message.includes("fetch")){if("demo@fenkparet.com"===e&&"demo123"===t){console.log("\uD83C\uDFAD Using demo user (backend unavailable)");let e={_id:"demo123",name:"Utilisateur D\xe9mo",email:"demo@fenkparet.com",isAdmin:!1,role:"customer"};return localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("token","demo-token-123"),d("demo-token-123"),r(e),{success:!0,user:e}}return{success:!1,error:"Impossible de se connecter au serveur. Essayez avec demo@fenkparet.com / demo123 pour tester."}}return{success:!1,error:"Erreur de connexion. Veuillez r\xe9essayer."}}},p=async e=>{try{console.log("\uD83D\uDD04 Attempting registration for:",e.email),console.log("\uD83D\uDCCB Registration data:",{...e,password:"[HIDDEN]"});let t="https://fenkparet-backend.onrender.com";console.log("\uD83C\uDF10 API URL:",t);let s=await fetch(`${t}/api/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},mode:"cors",body:JSON.stringify(e)});console.log("\uD83D\uDCE1 Response status:",s.status,s.statusText);let a=await s.json();if(console.log("\uD83D\uDCE1 Register response:",a),s.ok&&a.success)return localStorage.setItem("token",a.token),localStorage.setItem("user",JSON.stringify(a.user)),d(a.token),r(a.user),console.log("✅ Registration successful:",a.user),{success:!0,user:a.user};if(console.log("❌ Registration failed:",s.status,a.message),429===s.status)return{success:!1,error:"Trop de tentatives. Veuillez patienter quelques minutes et r\xe9essayer."};if(s.status>=500)return{success:!1,error:"Erreur du serveur. Le service est temporairement indisponible."};if(400===s.status)return{success:!1,error:a.message||"Donn\xe9es invalides. V\xe9rifiez vos informations."};return{success:!1,error:a.message||"\xc9chec de l'inscription."}}catch(e){if(console.error("❌ Register error:",e),"TypeError"===e.name&&e.message.includes("fetch"))return{success:!1,error:"Impossible de se connecter au serveur. V\xe9rifiez votre connexion internet."};return{success:!1,error:"Erreur de connexion. Veuillez r\xe9essayer."}}},x=t?.isAdmin===!0||t?.role==="admin";return s.jsx(n.Provider,{value:{user:t,token:l,loading:i,isAuthenticated:!!t&&!!l,isAdmin:x,login:h,register:p,logout:()=>{console.log("\uD83D\uDEAA Logging out user"),localStorage.removeItem("token"),localStorage.removeItem("user"),d(null),r(null),m.push("/")},updateUser:e=>{r(e),localStorage.setItem("user",JSON.stringify(e))},checkAuth:u},children:e})},c=()=>{let e=(0,a.useContext)(n);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},3414:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>j});var a=r(997),o=r(6689),n=r(1163),i=r(9752),c=r(6201),l=r(968),d=r.n(l),m=r(5621),u=r(8044),h=r(4431),p=r(5616),x=r(8176),g=r(7055),f=r(3580);r(6764),r(6971);var b=e([i,c,m,u,p,x]);[i,c,m,u,p,x]=b.then?(await b)():b;let y=new i.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:3e5}}});class v extends o.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?(0,a.jsxs)("div",{style:{padding:"20px",textAlign:"center",color:"red",backgroundColor:"#fee"},children:[a.jsx("h2",{children:"Something went wrong during rendering."}),a.jsx("p",{children:"Please try refreshing the page. If the issue persists, contact support."}),!1]}):this.props.children}}let j=function({Component:e,pageProps:t}){let{pathname:r}=(0,n.useRouter)(),s=r.startsWith("/admin"),o="/admin/login"===r;return r.startsWith("/auth"),console.log("--- Checking components in _app.js ---"),console.log("Layout (after import change):",m.Z),console.log("AdminLayout (after import change):",u.Z),console.log("AuthProvider:",h.H),console.log("SocketProvider:",p.w),console.log("CartProvider:",x.Z),console.log("ThemeProvider:",g.f),console.log("Toaster:",c.Toaster),console.log("--- End checking components in _app.js ---"),(0,a.jsxs)(i.QueryClientProvider,{client:y,children:[(0,a.jsxs)(d(),{children:[a.jsx("meta",{charSet:"utf-8"}),a.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, viewport-fit=cover"}),a.jsx("meta",{name:"theme-color",content:"#b8d2b3"}),a.jsx("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),a.jsx("meta",{name:"apple-mobile-web-app-status-bar-style",content:"default"}),a.jsx("link",{rel:"icon",href:"/favicon.ico"})]}),a.jsx(v,{children:a.jsx(f.$j,{children:a.jsx(h.H,{children:a.jsx(p.w,{children:a.jsx(x.Z,{children:(0,a.jsxs)(g.f,{children:[s&&!o?a.jsx(u.Z,{children:a.jsx(e,{...t})}):o?a.jsx(e,{...t}):a.jsx(m.Z,{children:a.jsx(e,{...t})}),a.jsx(c.Toaster,{position:"top-right",toastOptions:{duration:4e3,style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"8px",fontSize:"14px",maxWidth:"500px",padding:"12px 16px"},success:{duration:3e3,iconTheme:{primary:"var(--success-color)",secondary:"white"},style:{background:"var(--success-light)",color:"var(--success-color)"}},error:{duration:4e3,iconTheme:{primary:"var(--error-color)",secondary:"white"},style:{background:"var(--error-light)",color:"var(--error-color)"}},loading:{duration:1/0,iconTheme:{primary:"var(--info-color)",secondary:"white"},style:{background:"var(--info-light)",color:"var(--info-color)"}}},containerStyle:{top:"20px",right:"20px"}})]})})})})})})]})};s()}catch(e){s(e)}})},1056:(e,t,r)=>{"use strict";r.d(t,{hi:()=>i});let s="https://fenkparet-backend.onrender.com",a={baseURL:s,headers:{"Content-Type":"application/json"},withCredentials:!1,mode:"cors"},o={auth:{login:`${s}/api/auth/login`,register:`${s}/api/auth/register`,logout:`${s}/api/auth/logout`,me:`${s}/api/auth/me`,refresh:`${s}/api/auth/refresh`},products:{list:`${s}/api/products`,byId:e=>`${s}/api/products/${e}`,featured:`${s}/api/products/featured`,newArrivals:`${s}/api/products/new-arrivals`,search:`${s}/api/products/search`,byCategory:e=>`${s}/api/products/category/${e}`,categories:`${s}/api/products/categories`},orders:{create:`${s}/api/orders`,byId:e=>`${s}/api/orders/${e}`,track:e=>`${s}/api/orders/track/${e}`,userOrders:e=>`${s}/api/orders/user/${e}`},reviews:{create:`${s}/api/reviews`,byProduct:e=>`${s}/api/reviews/product/${e}`,vote:e=>`${s}/api/reviews/${e}/vote`,canReview:e=>`${s}/api/reviews/can-review/${e}`,myReviews:`${s}/api/reviews/my-reviews`},tickets:{create:`${s}/api/tickets`,byId:e=>`${s}/api/tickets/${e}`,userTickets:e=>`${s}/api/tickets/user/${e}`},admin:{dashboard:`${s}/api/admin/dashboard`,users:`${s}/api/admin/users`,products:`${s}/api/admin/products`,orders:`${s}/api/admin/orders`,tickets:`${s}/api/admin/tickets`,analytics:`${s}/api/admin/analytics`,inventory:{alerts:`${s}/api/admin/inventory/alerts`,bulkUpdate:`${s}/api/admin/inventory/bulk-update`},categories:`${s}/api/admin/categories`,settings:`${s}/api/admin/settings`},feedback:`${s}/api/tickets`},n=async(e,t={})=>{let r={...a,...t,headers:{...a.headers,...t.headers}};try{let t=await fetch(e,r),s=t.headers.get("content-type");if(!s||!s.includes("application/json")){if(!t.ok)throw Error(`HTTP error! status: ${t.status}`);return{data:await t.text(),status:t.status}}let a=await t.json();if(!t.ok)throw Error(a.message||`HTTP error! status: ${t.status}`);return{data:a,status:t.status}}catch(e){throw console.error("API request failed:",e),e}},i={login:e=>n(o.auth.login,{method:"POST",body:JSON.stringify(e)}),register:e=>n(o.auth.register,{method:"POST",body:JSON.stringify(e)}),getCurrentUser:()=>n(o.auth.me),getProducts:(e={})=>{let t=new URL(o.products.list);return Object.keys(e).forEach(r=>{void 0!==e[r]&&""!==e[r]&&t.searchParams.append(r,e[r])}),n(t.toString())},getProduct:e=>n(o.products.byId(e)),getFeaturedProducts:()=>n(o.products.featured),createOrder:e=>n(o.orders.create,{method:"POST",body:JSON.stringify(e)}),trackOrder:e=>n(o.orders.track(e)),createReview:e=>n(o.reviews.create,{method:"POST",body:JSON.stringify(e)}),getProductReviews:e=>n(o.reviews.byProduct(e)),getDashboardStats:()=>n(o.admin.dashboard),getAdminProducts:(e={})=>{let t=new URL(o.admin.products);return Object.keys(e).forEach(r=>{void 0!==e[r]&&""!==e[r]&&t.searchParams.append(r,e[r])}),n(t.toString())},createProduct:e=>n(o.admin.products,{method:"POST",body:e}),updateProduct:(e,t)=>n(`${o.admin.products}/${e}`,{method:"PUT",body:t}),submitFeedback:e=>n("https://fenkparet-backend.onrender.com/api/tickets",{method:"POST",body:JSON.stringify({subject:`Feedback: ${e.type.charAt(0).toUpperCase()+e.type.slice(1)}`,description:e.message,category:"bug"===e.type?"technical":"payment"===e.type?"billing":"feature"===e.type?"other":"technical",priority:e.rating<=2?"high":e.rating<=3?"medium":"low",customerName:"Utilisateur Anonyme",customerEmail:e.email||"noreply@fenkparet.com",source:"feedback_widget",metadata:{rating:e.rating,userAgent:e.userAgent,page:e.page,url:e.url,screenSize:e.screenSize,viewportSize:e.viewportSize,timestamp:e.timestamp}})})}},6971:()=>{},6764:()=>{}};