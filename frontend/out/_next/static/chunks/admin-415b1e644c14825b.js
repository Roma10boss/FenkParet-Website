"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[328],{5879:function(e,t,s){s.r(t);var a=s(567),r=s(4932),l=s(5893),n=s(7294),i=s(1163),c=s(2490),d=s(6501),o=s(5615),x=s(4931),m=s(5892),u=s(8283),h=s(1263),p=s(2044),g=s(6651),v=s(6140);t.default=()=>{var e,t,s,y,j,b,f,N,w,k,S,C,A,P,T,E,L,Z,M,R,F,z,_,I,O,B,D,U;let V=(0,i.useRouter)(),{user:q,isAdmin:H,isAuthenticated:W}=(0,c.a)(),[G,Q]=(0,n.useState)({overview:null,charts:null,loading:!0,error:null}),[J,K]=(0,n.useState)("30d");(0,n.useEffect)(()=>{if(!W||!H){V.push("/admin/login");return}Y()},[J,W,H]);let Y=(0,n.useCallback)(async()=>{try{Q(e=>(0,r._)((0,a._)({},e),{loading:!0,error:null}));let e=localStorage.getItem("token"),t=await fetch("".concat("https://fenkparet-backend.onrender.com","/api/admin/analytics?period=").concat(J),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(t.ok){let e=await t.json();Q({overview:e.overview||$(),charts:e.charts||{},loading:!1,error:null})}else throw Error("Erreur ".concat(t.status,": Impossible de charger les donn\xe9es"))}catch(e){console.error("Erreur lors du chargement des analytics:",e),Q({overview:$(),charts:{},loading:!1,error:e.message}),d.Am.error("Donn\xe9es d'exemple affich\xe9es - Serveur non disponible")}},[J]),$=()=>({revenue:{current:45678,change:12.5,changeType:"positive"},orders:{current:156,change:8.3,changeType:"positive"},customers:{current:89,change:-2.1,changeType:"negative"},conversionRate:{current:3.2,change:5.4,changeType:"positive"}});if(G.loading)return(0,l.jsx)("div",{className:"admin-dashboard",children:(0,l.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent"})})});let X=[{title:"Revenus Totaux",value:"".concat((null===(s=G.overview)||void 0===s?void 0:null===(t=s.revenue)||void 0===t?void 0:null===(e=t.current)||void 0===e?void 0:e.toLocaleString())||0," HTG"),change:(null===(j=G.overview)||void 0===j?void 0:null===(y=j.revenue)||void 0===y?void 0:y.change)||0,changeType:(null===(f=G.overview)||void 0===f?void 0:null===(b=f.revenue)||void 0===b?void 0:b.changeType)||"neutral",icon:o.Z,color:"text-green-600"},{title:"Commandes",value:(null===(k=G.overview)||void 0===k?void 0:null===(w=k.orders)||void 0===w?void 0:null===(N=w.current)||void 0===N?void 0:N.toLocaleString())||0,change:(null===(C=G.overview)||void 0===C?void 0:null===(S=C.orders)||void 0===S?void 0:S.change)||0,changeType:(null===(P=G.overview)||void 0===P?void 0:null===(A=P.orders)||void 0===A?void 0:A.changeType)||"neutral",icon:x.Z,color:"text-blue-600"},{title:"Nouveaux Clients",value:(null===(L=G.overview)||void 0===L?void 0:null===(E=L.customers)||void 0===E?void 0:null===(T=E.current)||void 0===T?void 0:T.toLocaleString())||0,change:(null===(M=G.overview)||void 0===M?void 0:null===(Z=M.customers)||void 0===Z?void 0:Z.change)||0,changeType:(null===(F=G.overview)||void 0===F?void 0:null===(R=F.customers)||void 0===R?void 0:R.changeType)||"neutral",icon:m.Z,color:"text-purple-600"},{title:"Taux de Conversion",value:"".concat((null===(I=G.overview)||void 0===I?void 0:null===(_=I.conversionRate)||void 0===_?void 0:null===(z=_.current)||void 0===z?void 0:z.toFixed(1))||0,"%"),change:(null===(B=G.overview)||void 0===B?void 0:null===(O=B.conversionRate)||void 0===O?void 0:O.change)||0,changeType:(null===(U=G.overview)||void 0===U?void 0:null===(D=U.conversionRate)||void 0===D?void 0:D.changeType)||"neutral",icon:u.Z,color:"text-orange-600"}];return(0,l.jsxs)("div",{className:"admin-dashboard",children:[(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-theme-primary mb-2",children:"Analyse des Ventes"}),(0,l.jsx)("p",{className:"text-theme-secondary",children:"Aper\xe7u d\xe9taill\xe9 des performances et m\xe9triques de vente"}),G.error&&(0,l.jsx)("p",{className:"text-warning-color text-sm mt-1",children:"⚠️ Donn\xe9es d'exemple (serveur non disponible)"})]}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(h.Z,{className:"w-5 h-5 text-theme-secondary"}),(0,l.jsxs)("select",{value:J,onChange:e=>K(e.target.value),className:"admin-input min-w-0",children:[(0,l.jsx)("option",{value:"7d",children:"7 derniers jours"}),(0,l.jsx)("option",{value:"30d",children:"30 derniers jours"}),(0,l.jsx)("option",{value:"90d",children:"90 derniers jours"}),(0,l.jsx)("option",{value:"1y",children:"Derni\xe8re ann\xe9e"})]})]}),(0,l.jsxs)("button",{onClick:()=>V.push("/admin/sales-analytics"),className:"btn-primary flex items-center space-x-2",children:[(0,l.jsx)(p.Z,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:"Rapport D\xe9taill\xe9"})]})]})]}),(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:X.map((e,t)=>(0,l.jsx)("div",{className:"admin-card",children:(0,l.jsx)("div",{className:"flex items-start justify-between",children:(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,l.jsx)("div",{className:"p-2 rounded-lg bg-theme-secondary ".concat(e.color),children:(0,l.jsx)(e.icon,{className:"w-6 h-6"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-theme-secondary uppercase tracking-wide",children:e.title}),0!==e.change&&(0,l.jsxs)("div",{className:"flex items-center space-x-1 text-sm font-semibold ".concat("positive"===e.changeType?"text-success-color":"text-error-color"),children:[(0,l.jsx)(u.Z,{className:"w-4 h-4 ".concat("negative"===e.changeType?"rotate-180":"")}),(0,l.jsxs)("span",{children:[Math.abs(e.change).toFixed(1),"%"]})]})]})]}),(0,l.jsx)("p",{className:"text-2xl font-bold text-theme-primary",children:e.value})]})})},t))}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,l.jsxs)("div",{className:"admin-card",children:[(0,l.jsxs)("h3",{className:"text-lg font-semibold text-theme-primary mb-6 flex items-center",children:[(0,l.jsx)(g.Z,{className:"w-5 h-5 mr-2"}),"Taux de Conversion"]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-sm text-theme-secondary",children:"Pages Produits → Panier"}),(0,l.jsx)("span",{className:"text-sm font-medium text-theme-primary",children:"3.2%"})]}),(0,l.jsx)("div",{className:"w-full bg-theme-secondary rounded-full h-2",children:(0,l.jsx)("div",{className:"bg-accent h-2 rounded-full transition-all duration-300",style:{width:"32%"}})}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-sm text-theme-secondary",children:"Panier → Commande"}),(0,l.jsx)("span",{className:"text-sm font-medium text-theme-primary",children:"68%"})]}),(0,l.jsx)("div",{className:"w-full bg-theme-secondary rounded-full h-2",children:(0,l.jsx)("div",{className:"bg-success-color h-2 rounded-full transition-all duration-300",style:{width:"68%"}})})]})]}),(0,l.jsxs)("div",{className:"admin-card",children:[(0,l.jsxs)("h3",{className:"text-lg font-semibold text-theme-primary mb-6 flex items-center",children:[(0,l.jsx)(m.Z,{className:"w-5 h-5 mr-2"}),"Insights Clients"]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center py-3 border-b border-theme",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-theme-primary",children:"Dur\xe9e Moyenne Session"}),(0,l.jsx)("p",{className:"text-xs text-theme-secondary",children:"Par rapport au mois dernier"})]}),(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsx)("p",{className:"text-lg font-bold text-theme-primary",children:"4m 32s"}),(0,l.jsx)("p",{className:"text-xs text-success-color",children:"+12%"})]})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center py-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-theme-primary",children:"Pages par Session"}),(0,l.jsx)("p",{className:"text-xs text-theme-secondary",children:"Engagement moyen"})]}),(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsx)("p",{className:"text-lg font-bold text-theme-primary",children:"2.8"}),(0,l.jsx)("p",{className:"text-xs text-success-color",children:"+5%"})]})]})]})]})]}),(0,l.jsxs)("div",{className:"admin-card",children:[(0,l.jsxs)("h3",{className:"text-lg font-semibold text-theme-primary mb-6 flex items-center",children:[(0,l.jsx)(v.Z,{className:"w-5 h-5 mr-2"}),"Exporter les Donn\xe9es"]}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,l.jsxs)("button",{onClick:()=>{d.Am.success("Export PDF lanc\xe9 (fonctionnalit\xe9 \xe0 venir)")},className:"btn-secondary flex items-center space-x-2",children:[(0,l.jsx)(v.Z,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:"Exporter PDF"})]}),(0,l.jsxs)("button",{onClick:()=>{var e,t,s,a,r,l,n,i,c,o,x,m,u,h,p,g;let v=new Blob([[["M\xe9trique","Valeur","Changement"],["Revenus","".concat((null===(t=G.overview)||void 0===t?void 0:null===(e=t.revenue)||void 0===e?void 0:e.current)||0," HTG"),"".concat((null===(a=G.overview)||void 0===a?void 0:null===(s=a.revenue)||void 0===s?void 0:s.change)||0,"%")],["Commandes",(null===(l=G.overview)||void 0===l?void 0:null===(r=l.orders)||void 0===r?void 0:r.current)||0,"".concat((null===(i=G.overview)||void 0===i?void 0:null===(n=i.orders)||void 0===n?void 0:n.change)||0,"%")],["Clients",(null===(o=G.overview)||void 0===o?void 0:null===(c=o.customers)||void 0===c?void 0:c.current)||0,"".concat((null===(m=G.overview)||void 0===m?void 0:null===(x=m.customers)||void 0===x?void 0:x.change)||0,"%")],["Taux de conversion","".concat((null===(h=G.overview)||void 0===h?void 0:null===(u=h.conversionRate)||void 0===u?void 0:u.current)||0,"%"),"".concat((null===(g=G.overview)||void 0===g?void 0:null===(p=g.conversionRate)||void 0===p?void 0:p.change)||0,"%")]].map(e=>e.join(",")).join("\n")],{type:"text/csv"}),y=window.URL.createObjectURL(v),j=document.createElement("a");j.href=y,j.download="analytics-".concat(J,"-").concat(new Date().toISOString().split("T")[0],".csv"),j.click(),window.URL.revokeObjectURL(y),d.Am.success("Donn\xe9es export\xe9es en CSV")},className:"btn-secondary flex items-center space-x-2",children:[(0,l.jsx)(v.Z,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:"Exporter CSV"})]}),(0,l.jsxs)("button",{onClick:()=>V.push("/admin/sales-analytics"),className:"btn-primary flex items-center space-x-2",children:[(0,l.jsx)(p.Z,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:"Analyses Avanc\xe9es"})]})]}),(0,l.jsx)("div",{className:"mt-4 p-4 bg-theme-secondary rounded-lg",children:(0,l.jsxs)("p",{className:"text-sm text-theme-secondary",children:[(0,l.jsx)("strong",{children:"Note:"})," Les donn\xe9es sont mises \xe0 jour en temps r\xe9el. Les rapports incluent toutes les transactions et interactions clients pour la p\xe9riode s\xe9lectionn\xe9e."]})})]})]})}},7639:function(e,t,s){s.r(t),s.d(t,{default:function(){return u}});var a=s(567),r=s(4932),l=s(5893),n=s(7294),i=s(1163),c=s(2490),d=s(7200),o=s(3254),x=s(5326),m=s(8771);function u(){let e=(0,i.useRouter)(),{user:t,loading:s,isAuthenticated:u,isAdmin:h}=(0,c.a)(),[p,g]=(0,n.useState)({stats:null,recentOrders:[],pendingPayments:[],chartsData:null,loading:!0,error:null});return((0,n.useEffect)(()=>{s||u?s||h||e.push("/"):e.push("/admin/login")},[t,s,u,h,e]),(0,n.useEffect)(()=>{let e=async()=>{if(h&&u)try{let n=localStorage.getItem("token"),i=await fetch("".concat("https://fenkparet-backend.onrender.com","/api/admin/dashboard"),{headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}});if(i.ok){var e,t,s,l;let a=await i.json();g({stats:{revenue:(null===(e=a.stats)||void 0===e?void 0:e.revenue)||{current:0,change:0,changeType:"neutral"},orders:(null===(t=a.stats)||void 0===t?void 0:t.orders)||{current:0,change:0,changeType:"neutral"},customers:(null===(s=a.stats)||void 0===s?void 0:s.customers)||{current:0,change:0,changeType:"neutral"},conversionRate:(null===(l=a.stats)||void 0===l?void 0:l.conversionRate)||{current:0,change:0,changeType:"neutral"}},recentOrders:a.recentOrders||[],pendingPayments:a.pendingPayments||[],chartsData:a.chartsData||{},loading:!1,error:null})}else g(e=>(0,r._)((0,a._)({},e),{error:"Failed to fetch data (".concat(i.status,")"),loading:!1}))}catch(e){g(t=>(0,r._)((0,a._)({},t),{error:e.message,loading:!1}))}};t&&h&&e()},[t,h,u]),s||p.loading)?(0,l.jsx)("div",{className:"admin-dashboard",children:(0,l.jsx)("div",{className:"admin-card",children:"Loading..."})}):p.error?(0,l.jsx)("div",{className:"admin-dashboard",children:(0,l.jsxs)("div",{className:"admin-card",children:["Error: ",p.error]})}):(0,l.jsxs)("div",{className:"admin-dashboard",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Tableau de bord administrateur"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[(0,l.jsx)("div",{className:"lg:col-span-2",children:(0,l.jsx)(d.Z,{stats:p.stats})}),(0,l.jsx)("div",{children:(0,l.jsx)(x.Z,{})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[(0,l.jsx)("div",{className:"lg:col-span-2",children:(0,l.jsx)(o.Z,{recentOrders:p.recentOrders,pendingPayments:p.pendingPayments})}),(0,l.jsx)("div",{children:(0,l.jsx)(m.Z,{chartsData:p.chartsData})})]})]})}},1339:function(e,t,s){s.r(t);var a=s(567),r=s(4932),l=s(5893),n=s(7294),i=s(9008),c=s.n(i),d=s(5675),o=s.n(d),x=s(2490),m=s(1163),u=s(6501),h=s(7066),p=s(8636),g=s(3431),v=s(2424),y=s(2044),j=s(1182),b=s(4874);t.default=()=>{let{user:e,isAuthenticated:t,loading:s}=(0,x.a)(),i=(0,m.useRouter)(),[d,f]=(0,n.useState)(!0),[N,w]=(0,n.useState)([]),[k,S]=(0,n.useState)({totalProducts:0,lowStockProducts:0,outOfStockProducts:0,totalValue:0}),[C,A]=(0,n.useState)({category:"",stockStatus:"all",search:""}),[P,T]=(0,n.useState)(null),[E,L]=(0,n.useState)(!1),[Z,M]=(0,n.useState)([]);(0,n.useEffect)(()=>{if(!s){if(!t||!(null==e?void 0:e.isAdmin)){i.push("/");return}R()}},[t,s,e,i,C]);let R=async()=>{try{var e,t,s,l;f(!0);let n=localStorage.getItem("token"),i={headers:{Authorization:"Bearer ".concat(n)},params:(0,r._)((0,a._)({},C),{limit:100})},[c,d]=await Promise.all([h.Z.get("".concat("https://fenkparet-backend.onrender.com","/api/products"),i),h.Z.get("".concat("https://fenkparet-backend.onrender.com","/api/admin/inventory/alerts"),{headers:{Authorization:"Bearer ".concat(n)}})]);w(c.data.products||[]);let o=(null===(e=c.data.products)||void 0===e?void 0:e.length)||0,x=(null===(t=c.data.products)||void 0===t?void 0:t.filter(e=>{var t;return(null===(t=e.inventory)||void 0===t?void 0:t.stockStatus)==="low-stock"}).length)||0,m=(null===(s=c.data.products)||void 0===s?void 0:s.filter(e=>{var t;return(null===(t=e.inventory)||void 0===t?void 0:t.stockStatus)==="out-of-stock"}).length)||0,u=(null===(l=c.data.products)||void 0===l?void 0:l.reduce((e,t)=>{var s;return e+t.price*((null===(s=t.inventory)||void 0===s?void 0:s.quantity)||0)},0))||0;S({totalProducts:o,lowStockProducts:x,outOfStockProducts:m,totalValue:u})}catch(e){console.error("Error fetching inventory data:",e),u.Am.error("Erreur lors du chargement des donn\xe9es d'inventaire"),w([{_id:"1",name:"Premium T-Shirt",price:250,sku:"TSH-001",category:{name:"T-Shirts"},inventory:{quantity:25,lowStockThreshold:10,stockStatus:"in-stock",trackQuantity:!0},images:[{url:"/placeholder.jpg"}]},{_id:"2",name:"Custom Mug",price:120,sku:"MUG-001",category:{name:"Mugs"},inventory:{quantity:3,lowStockThreshold:5,stockStatus:"low-stock",trackQuantity:!0},images:[{url:"/placeholder.jpg"}]}]),S({totalProducts:2,lowStockProducts:1,outOfStockProducts:0,totalValue:6610})}finally{f(!1)}},F=async(e,t)=>{try{let s=localStorage.getItem("token");await h.Z.patch("".concat("https://fenkparet-backend.onrender.com","/api/products/").concat(e,"/inventory"),t,{headers:{Authorization:"Bearer ".concat(s)}}),u.Am.success("Inventaire mis \xe0 jour avec succ\xe8s"),R(),T(null)}catch(e){u.Am.error("Erreur lors de la mise \xe0 jour de l'inventaire")}},z=async e=>{try{let t=localStorage.getItem("token");await h.Z.post("".concat("https://fenkparet-backend.onrender.com","/api/admin/inventory/bulk-update"),{updates:e},{headers:{Authorization:"Bearer ".concat(t)}}),u.Am.success("".concat(e.length," produits mis \xe0 jour avec succ\xe8s")),R(),L(!1),M([])}catch(e){u.Am.error("Erreur lors de la mise \xe0 jour en lot")}},_=e=>{switch(e){case"in-stock":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"low-stock":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"out-of-stock":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},I=e=>({"in-stock":"En stock","low-stock":"Stock faible","out-of-stock":"Rupture",backorder:"Commande en cours"})[e]||e,O=e=>"".concat(e.toFixed(2)," HTG");return s||d?(0,l.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(c(),{children:[(0,l.jsx)("title",{children:"Gestion d'Inventaire - Admin Fenkparet"}),(0,l.jsx)("meta",{name:"description",content:"G\xe9rez l'inventaire et les stocks des produits"})]}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Gestion d'Inventaire"}),(0,l.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Surveillez et g\xe9rez les stocks de vos produits"})]}),(0,l.jsx)("div",{className:"flex space-x-3",children:(0,l.jsx)("button",{onClick:()=>L(!E),className:"px-4 py-2 rounded-lg transition-colors ".concat(E?"bg-red-600 text-white hover:bg-red-700":"bg-blue-600 text-white hover:bg-blue-700"),children:E?"Annuler":"Mise \xe0 jour en lot"})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,l.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)(p.Z,{className:"h-8 w-8 text-blue-600"})}),(0,l.jsxs)("div",{className:"ml-4",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Produits"}),(0,l.jsx)("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:k.totalProducts})]})]})}),(0,l.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)(g.Z,{className:"h-8 w-8 text-yellow-600"})}),(0,l.jsxs)("div",{className:"ml-4",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Stock Faible"}),(0,l.jsx)("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:k.lowStockProducts})]})]})}),(0,l.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)(v.Z,{className:"h-8 w-8 text-red-600"})}),(0,l.jsxs)("div",{className:"ml-4",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Rupture"}),(0,l.jsx)("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:k.outOfStockProducts})]})]})}),(0,l.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)(y.Z,{className:"h-8 w-8 text-green-600"})}),(0,l.jsxs)("div",{className:"ml-4",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Valeur Totale"}),(0,l.jsx)("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:O(k.totalValue)})]})]})})]}),(0,l.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,l.jsx)("input",{type:"text",placeholder:"Rechercher par nom ou SKU...",value:C.search,onChange:e=>A(t=>(0,r._)((0,a._)({},t),{search:e.target.value})),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),(0,l.jsxs)("select",{value:C.stockStatus,onChange:e=>A(t=>(0,r._)((0,a._)({},t),{stockStatus:e.target.value})),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,l.jsx)("option",{value:"all",children:"Tous les statuts"}),(0,l.jsx)("option",{value:"in-stock",children:"En stock"}),(0,l.jsx)("option",{value:"low-stock",children:"Stock faible"}),(0,l.jsx)("option",{value:"out-of-stock",children:"Rupture"})]}),(0,l.jsxs)("select",{value:C.category,onChange:e=>A(t=>(0,r._)((0,a._)({},t),{category:e.target.value})),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,l.jsx)("option",{value:"",children:"Toutes les cat\xe9gories"}),(0,l.jsx)("option",{value:"t-shirts",children:"T-Shirts"}),(0,l.jsx)("option",{value:"mugs",children:"Mugs"}),(0,l.jsx)("option",{value:"keychains",children:"Keychains"}),(0,l.jsx)("option",{value:"phone-cases",children:"Phone Cases"}),(0,l.jsx)("option",{value:"hoodies",children:"Hoodies"})]})]})}),(0,l.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,l.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,l.jsxs)("tr",{children:[E&&(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:(0,l.jsx)("input",{type:"checkbox",onChange:e=>{e.target.checked?M(N.map(e=>e._id)):M([])},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Produit"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"SKU"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Prix"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Stock"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Statut"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Valeur"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,l.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:N.map(e=>{var t,s,a,r,n,i,c,d;return(0,l.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[E&&(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,l.jsx)("input",{type:"checkbox",checked:Z.includes(e._id),onChange:t=>{t.target.checked?M(t=>[...t,e._id]):M(t=>t.filter(t=>t!==e._id))},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,l.jsx)(o(),{className:"h-10 w-10 rounded-lg object-cover",src:(null===(s=e.images)||void 0===s?void 0:null===(t=s[0])||void 0===t?void 0:t.url)||"/placeholder.jpg",alt:e.name,width:40,height:40})}),(0,l.jsxs)("div",{className:"ml-4",children:[(0,l.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name}),(0,l.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:null===(a=e.category)||void 0===a?void 0:a.name})]})]})}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.sku||"N/A"}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:O(e.price)}),(0,l.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,l.jsx)("div",{className:"text-sm text-gray-900 dark:text-white",children:(null===(r=e.inventory)||void 0===r?void 0:r.quantity)||0}),(0,l.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Seuil: ",(null===(n=e.inventory)||void 0===n?void 0:n.lowStockThreshold)||5]})]}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,l.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(_(null===(i=e.inventory)||void 0===i?void 0:i.stockStatus)),children:I(null===(c=e.inventory)||void 0===c?void 0:c.stockStatus)})}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:O(e.price*((null===(d=e.inventory)||void 0===d?void 0:d.quantity)||0))}),(0,l.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[(0,l.jsx)("button",{onClick:()=>T(e),className:"text-blue-600 hover:text-blue-900 dark:hover:text-blue-400",children:(0,l.jsx)(j.Z,{className:"h-4 w-4"})}),(0,l.jsx)("button",{className:"text-gray-600 hover:text-gray-900 dark:hover:text-gray-400",children:(0,l.jsx)(b.Z,{className:"h-4 w-4"})})]})]},e._id)})})]})})}),E&&Z.length>0&&(0,l.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("span",{className:"text-blue-700 dark:text-blue-300",children:[Z.length," produit(s) s\xe9lectionn\xe9(s)"]}),(0,l.jsx)("div",{className:"space-x-2",children:(0,l.jsx)("button",{onClick:()=>{z(Z.map(e=>({productId:e,quantity:100})))},className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700",children:"R\xe9approvisionner"})})]})}),P&&(0,l.jsx)(e=>{var t,s,i;let{product:c,onClose:d,onSave:o}=e,[x,m]=(0,n.useState)({quantity:(null===(t=c.inventory)||void 0===t?void 0:t.quantity)||0,lowStockThreshold:(null===(s=c.inventory)||void 0===s?void 0:s.lowStockThreshold)||5,trackQuantity:(null===(i=c.inventory)||void 0===i?void 0:i.trackQuantity)!==!1});return(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[(0,l.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:["Modifier l'inventaire - ",c.name]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Quantit\xe9 en stock"}),(0,l.jsx)("input",{type:"number",value:x.quantity,onChange:e=>m(t=>(0,r._)((0,a._)({},t),{quantity:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 text-gray-900 dark:text-white",min:"0"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Seuil de stock faible"}),(0,l.jsx)("input",{type:"number",value:x.lowStockThreshold,onChange:e=>m(t=>(0,r._)((0,a._)({},t),{lowStockThreshold:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 text-gray-900 dark:text-white",min:"0"})]}),(0,l.jsx)("div",{children:(0,l.jsxs)("label",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",checked:x.trackQuantity,onChange:e=>m(t=>(0,r._)((0,a._)({},t),{trackQuantity:e.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,l.jsx)("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Suivre la quantit\xe9"})]})})]}),(0,l.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,l.jsx)("button",{onClick:d,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-white",children:"Annuler"}),(0,l.jsx)("button",{onClick:()=>{o(c._id,x)},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Sauvegarder"})]})]})})},{product:P,onClose:()=>T(null),onSave:F})]})]})}},316:function(e,t,s){s.r(t),s.d(t,{default:function(){return y}});var a=s(567),r=s(4932),l=s(5893),n=s(7294),i=s(1163),c=s(9008),d=s.n(c),o=s(1664),x=s.n(o),m=s(2490),u=s(2997),h=s(3431),p=s(8566),g=s(4874),v=s(4410);function y(){let[e,t]=(0,n.useState)({email:"",password:""}),[s,c]=(0,n.useState)(!1),[o,y]=(0,n.useState)(null),[j,b]=(0,n.useState)(!1),{login:f,isAuthenticated:N,isAdmin:w,loading:k,user:S}=(0,m.a)(),C=(0,i.useRouter)(),{redirect:A}=C.query;(0,n.useEffect)(()=>{if(N&&!k&&S){if(w||S.isAdmin||"admin"===S.role){let e=A||"/admin/dashboard";C.push(e)}else C.push("/")}},[N,w,k,S,C,A]);let P=e=>{let{name:s,value:l}=e.target;t(e=>(0,r._)((0,a._)({},e),{[s]:l})),o&&y(null)},T=async t=>{t.preventDefault(),y(null),b(!0);let{email:s,password:a}=e;if(!s||!a){y("Please provide both email and password."),b(!1);return}if(a.length<8){y("Le mot de passe doit contenir au moins 8 caract\xe8res."),b(!1);return}if(!/[A-Z]/.test(a)){y("Le mot de passe doit contenir au moins une lettre majuscule."),b(!1);return}try{let e=await f(s,a);if(e.success){if(e.user.isAdmin||"admin"===e.user.role){let e=A||"/admin/dashboard";window.location.href=e}else y("Access denied. Admin privileges required.")}else y(e.error||"Invalid credentials. Please try again.")}catch(e){y("An unexpected error occurred. Please try again."),console.error("Admin login error:",e)}finally{b(!1)}};return N&&w&&!k?null:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(d(),{children:[(0,l.jsx)("title",{children:"Admin Login | Fenkparet"}),(0,l.jsx)("meta",{name:"description",content:"Admin login portal for Fenkparet"}),(0,l.jsx)("meta",{name:"robots",content:"noindex, nofollow"})]}),(0,l.jsxs)("div",{className:"min-h-screen flex flex-col justify-center py-12 sm:px-6 lg:px-8 bg-theme-secondary",children:[(0,l.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)("div",{className:"feature-icon-large bg-red-600 hover:glow-accent theme-transition",children:(0,l.jsx)(u.Z,{className:"w-10 h-10 text-white"})})}),(0,l.jsx)("h2",{className:"mt-6 text-center text-3xl font-bold text-theme-primary",children:"Admin Access"}),(0,l.jsx)("p",{className:"mt-2 text-center text-sm text-theme-secondary",children:"Authorized personnel only"})]}),(0,l.jsx)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:(0,l.jsx)(v.Z,{className:"p-4 mb-6 border-l-4 border-accent",children:(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)(h.Z,{className:"h-5 w-5 text-accent mt-0.5 mr-3"}),(0,l.jsx)("div",{children:(0,l.jsxs)("p",{className:"text-sm text-theme-primary",children:[(0,l.jsx)("strong",{children:"Restricted Area:"})," This is a secure admin portal. All access attempts are logged and monitored."]})})]})})}),(0,l.jsx)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:(0,l.jsxs)(v.Z,{className:"p-8",children:[(0,l.jsxs)("form",{onSubmit:T,className:"space-y-6",children:[o&&(0,l.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)(h.Z,{className:"h-5 w-5 text-red-500 mt-0.5 mr-3"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Authentication Failed"}),(0,l.jsx)("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:o})]})]})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"email",className:"form-label",children:"Admin Email Address"}),(0,l.jsx)("div",{className:"mt-1",children:(0,l.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e.email,onChange:P,className:"form-input",placeholder:"Enter admin email"})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"password",className:"form-label",children:"Admin Password"}),(0,l.jsxs)("div",{className:"mt-1 relative",children:[(0,l.jsx)("input",{id:"password",name:"password",type:s?"text":"password",autoComplete:"current-password",required:!0,value:e.password,onChange:P,className:"form-input pr-10",placeholder:"Enter admin password"}),(0,l.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:(0,l.jsx)("button",{type:"button",className:"text-theme-tertiary hover:text-theme-secondary theme-transition",onClick:()=>c(!s),children:s?(0,l.jsx)(p.Z,{className:"h-5 w-5"}):(0,l.jsx)(g.Z,{className:"h-5 w-5"})})})]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-accent focus:ring-accent border-theme rounded"}),(0,l.jsx)("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-theme-secondary",children:"Keep me signed in"})]}),(0,l.jsx)("div",{className:"text-sm",children:(0,l.jsx)(x(),{href:"/admin/forgot-password",className:"font-medium text-accent hover:text-accent-dark theme-transition",children:"Forgot password?"})})]}),(0,l.jsx)("div",{children:(0,l.jsx)("button",{type:"submit",disabled:j||k,className:"btn-primary w-full flex justify-center py-3",children:j||k?(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"spinner w-5 h-5 mr-2"}),"Authenticating..."]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.Z,{className:"h-5 w-5 mr-2"}),"Admin Sign In"]})})})]}),(0,l.jsx)(v.Z,{className:"p-4 mt-6 bg-theme-tertiary border border-theme",children:(0,l.jsxs)("div",{className:"flex items-start",children:[(0,l.jsx)(u.Z,{className:"h-5 w-5 text-theme-secondary mt-0.5 mr-2"}),(0,l.jsxs)("div",{className:"text-xs text-theme-secondary",children:[(0,l.jsx)("p",{className:"font-medium mb-1",children:"Security Notice"}),(0,l.jsxs)("ul",{className:"space-y-1 list-disc list-inside",children:[(0,l.jsx)("li",{children:"This portal uses encrypted connections (HTTPS)"}),(0,l.jsx)("li",{children:"All login attempts are logged and monitored"}),(0,l.jsx)("li",{children:"Unauthorized access is prohibited by law"}),(0,l.jsx)("li",{children:"Report security issues immediately"})]})]})]})}),(0,l.jsx)("div",{className:"mt-6 text-center",children:(0,l.jsx)(x(),{href:"/",className:"text-sm text-theme-tertiary hover:text-theme-secondary theme-transition",children:"← Back to Store"})})]})}),!1,(0,l.jsx)("div",{className:"mt-8 text-center",children:(0,l.jsxs)("p",{className:"text-xs text-theme-tertiary",children:["Fenkparet Admin Portal v2.0",(0,l.jsx)("br",{}),"Unauthorized access prohibited. All activities monitored."]})})]})]})}},8715:function(e,t,s){s.r(t);var a=s(567),r=s(4932),l=s(5893),n=s(7294);s(5675);var i=s(1163),c=s(9761),d=s(4410),o=s(5627);t.default=()=>{let[e,t]=(0,n.useState)([]),[s,x]=(0,n.useState)(!0),[m,u]=(0,n.useState)(""),[h,p]=(0,n.useState)("all"),[g,v]=(0,n.useState)("all"),[y,j]=(0,n.useState)(1),[b,f]=(0,n.useState)(1),[N,w]=(0,n.useState)([]),[k,S]=(0,n.useState)(!1),[C,A]=(0,n.useState)(null),[P,T]=(0,n.useState)({start:"",end:""}),E=(0,i.useRouter)(),{showSuccess:L,showError:Z,showWarning:M}=(0,c.V)(),R=[{value:"pending",label:"En attente",color:"yellow"},{value:"confirmed",label:"Confirm\xe9e",color:"blue"},{value:"processing",label:"En cours",color:"indigo"},{value:"shipped",label:"Exp\xe9di\xe9e",color:"purple"},{value:"delivered",label:"Livr\xe9e",color:"green"},{value:"cancelled",label:"Annul\xe9e",color:"red"},{value:"refunded",label:"Rembours\xe9e",color:"gray"}],F=[{value:"pending",label:"En attente",color:"yellow"},{value:"paid",label:"Pay\xe9e",color:"green"},{value:"failed",label:"\xc9chou\xe9e",color:"red"},{value:"refunded",label:"Rembours\xe9e",color:"gray"}];(0,n.useEffect)(()=>{z()},[y,m,h,g,P]);let z=(0,n.useCallback)(async()=>{try{x(!0);let e=new URLSearchParams({page:y,limit:15,search:m,status:h,payment:g,startDate:P.start,endDate:P.end}),s=await fetch("".concat("https://fenkparet-backend.onrender.com","/api/admin/orders?").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!s.ok)throw Error("Failed to fetch orders");let a=await s.json();t(a.orders),f(Math.ceil(a.total/15))}catch(e){console.error("Error fetching orders:",e),Z("\xc9chec du chargement des commandes. Veuillez r\xe9essayer.")}finally{x(!1)}},[y,m,h,g,P,Z]),_=async(e,t)=>{try{if(!(await fetch("".concat("https://fenkparet-backend.onrender.com","/api/orders/").concat(e,"/status"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({status:t})})).ok)throw Error("Failed to update order status");L("Order status updated successfully"),z()}catch(e){console.error("Error updating order status:",e),Z("Failed to update order status. Please try again.")}},I=async e=>{if(0===N.length){M("Please select orders to update");return}try{if(!(await fetch("".concat("https://fenkparet-backend.onrender.com","/api/admin/orders/bulk-status"),{method:"PUT",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({orderIds:N,status:e})})).ok)throw Error("Failed to update orders");L("".concat(N.length," orders updated successfully")),w([]),z()}catch(e){console.error("Error updating orders:",e),Z("Failed to update orders. Please try again.")}},O=e=>{w(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},B=()=>{N.length===e.length?w([]):w(e.map(e=>e.id))},D=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"order",s=("payment"===t?F:R).find(t=>t.value===e);return s?(0,l.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat({yellow:"bg-yellow-100 text-yellow-800",blue:"bg-blue-100 text-blue-800",indigo:"bg-indigo-100 text-indigo-800",purple:"bg-purple-100 text-purple-800",green:"bg-green-100 text-green-800",red:"bg-red-100 text-red-800",gray:"bg-gray-100 text-gray-800"}[s.color]),children:s.label}):null},U=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),V=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),q=async()=>{try{let e=new URLSearchParams({search:m,status:h,payment:g,startDate:P.start,endDate:P.end,format:"csv"}),t=await fetch("".concat("https://fenkparet-backend.onrender.com","/api/admin/orders/export?").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!t.ok)throw Error("Failed to export orders");let s=await t.blob(),a=window.URL.createObjectURL(s),r=document.createElement("a");r.style.display="none",r.href=a,r.download="orders-".concat(new Date().toISOString().split("T")[0],".csv"),document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(a),L("Orders exported successfully")}catch(e){console.error("Error exporting orders:",e),Z("Failed to export orders. Please try again.")}};return s?(0,l.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Order Management"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Process and track customer orders"})]}),(0,l.jsxs)("div",{className:"flex space-x-3",children:[(0,l.jsx)("button",{onClick:q,className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"Export Orders"}),(0,l.jsx)("button",{onClick:()=>E.push("/admin/analytics"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"View Analytics"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,l.jsx)(d.Z,{children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,l.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),(0,l.jsxs)("div",{className:"ml-4",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),(0,l.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:"1,234"})]})]})}),(0,l.jsx)(d.Z,{children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,l.jsx)("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,l.jsxs)("div",{className:"ml-4",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pending Orders"}),(0,l.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:"45"})]})]})}),(0,l.jsx)(d.Z,{children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,l.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,l.jsxs)("div",{className:"ml-4",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),(0,l.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:"1,189"})]})]})}),(0,l.jsx)(d.Z,{children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,l.jsx)("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),(0,l.jsxs)("div",{className:"ml-4",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Revenue"}),(0,l.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:"$45,678"})]})]})})]}),(0,l.jsx)(d.Z,{children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,l.jsx)("div",{children:(0,l.jsx)("input",{type:"text",placeholder:"Search by order ID or customer...",value:m,onChange:e=>u(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),(0,l.jsx)("div",{children:(0,l.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,l.jsx)("option",{value:"all",children:"All Order Status"}),R.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))]})}),(0,l.jsx)("div",{children:(0,l.jsxs)("select",{value:g,onChange:e=>v(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,l.jsx)("option",{value:"all",children:"All Payment Status"}),F.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))]})}),(0,l.jsx)("div",{children:(0,l.jsx)("input",{type:"date",value:P.start,onChange:e=>T(t=>(0,r._)((0,a._)({},t),{start:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Start date"})}),(0,l.jsx)("div",{children:(0,l.jsx)("input",{type:"date",value:P.end,onChange:e=>T(t=>(0,r._)((0,a._)({},t),{end:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"End date"})})]})}),N.length>0&&(0,l.jsx)(d.Z,{className:"bg-blue-50 border-blue-200 dark:bg-blue-900/20 dark:border-blue-900",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("span",{className:"text-sm text-blue-700",children:[N.length," order(s) selected"]}),(0,l.jsx)("div",{className:"space-x-2",children:(0,l.jsxs)("select",{onChange:e=>{e.target.value&&(I(e.target.value),e.target.value="")},className:"text-sm border border-blue-300 rounded px-2 py-1",children:[(0,l.jsx)("option",{value:"",children:"Update Status"}),R.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))]})})]})}),(0,l.jsxs)(d.Z,{className:"overflow-hidden",children:[(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,l.jsx)("input",{type:"checkbox",checked:N.length===e.length&&e.length>0,onChange:()=>B(),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order Status"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Status"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,l.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,l.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,l.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,l.jsx)("input",{type:"checkbox",checked:N.includes(e.id),onChange:()=>O(e.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["#",e.orderNumber]}),(0,l.jsxs)("div",{className:"text-sm text-gray-500",children:[e.itemCount," items"]})]})}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.customer.name}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:e.customer.email})]})}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:U(e.total)}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,l.jsx)("select",{value:e.status,onChange:t=>_(e.id,t.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:R.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))})}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:D(e.paymentStatus,"payment")}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:V(e.createdAt)}),(0,l.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,l.jsx)("button",{onClick:()=>{A(e),S(!0)},className:"text-blue-600 hover:text-blue-900 mr-3",children:"View"}),(0,l.jsx)("button",{onClick:()=>window.open("/admin/orders/".concat(e.id,"/invoice"),"_blank"),className:"text-green-600 hover:text-green-900",children:"Invoice"})]})]},e.id))})]})}),0===e.length&&(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),(0,l.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No orders found"}),(0,l.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Orders will appear here when customers make purchases."})]})]}),b>1&&(0,l.jsxs)(d.Z,{className:"px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[(0,l.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,l.jsx)("button",{onClick:()=>j(e=>Math.max(e-1,1)),disabled:1===y,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),(0,l.jsx)("button",{onClick:()=>j(e=>Math.min(e+1,b)),disabled:y===b,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),(0,l.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,l.jsx)("div",{children:(0,l.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing page ",(0,l.jsx)("span",{className:"font-medium",children:y})," of"," ",(0,l.jsx)("span",{className:"font-medium",children:b})]})}),(0,l.jsx)("div",{children:(0,l.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[(0,l.jsx)("button",{onClick:()=>j(e=>Math.max(e-1,1)),disabled:1===y,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),Array.from({length:Math.min(5,b)},(e,t)=>{let s;return s=b<=5?t+1:y<=3?t+1:y>=b-2?b-4+t:y-2+t,(0,l.jsx)("button",{onClick:()=>j(s),className:"relative inline-flex items-center px-4 py-2 border text-sm font-medium ".concat(y===s?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"),children:s},s)}),(0,l.jsx)("button",{onClick:()=>j(e=>Math.min(e+1,b)),disabled:y===b,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})})]})]}),k&&C&&(0,l.jsx)(o.Z,{order:C,onClose:()=>S(!1),onStatusUpdate:e=>{_(C.id,e),S(!1)}})]})}},4562:function(e,t,s){s.r(t);var a=s(5893);s(7294);var r=s(1163);t.default=()=>{let{id:e}=(0,r.useRouter)().query;return(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"container mx-auto p-4",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold mb-4",children:["Admin Order Detail for ID: ",e]}),(0,a.jsx)("p",{children:"This is a placeholder page for admin order details. Content coming soon!"})]})})}},7469:function(e,t,s){s.r(t);var a=s(5893),r=s(7294),l=s(5675),n=s.n(l),i=s(1163),c=s(9761),d=s(4410),o=s(8281);t.default=()=>{let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(!0),[x,m]=(0,r.useState)(""),[u,h]=(0,r.useState)("all"),[p,g]=(0,r.useState)("all"),[v,y]=(0,r.useState)(1),[j,b]=(0,r.useState)(1),[f,N]=(0,r.useState)([]),[w,k]=(0,r.useState)(!1),[S,C]=(0,r.useState)(null),[A,P]=(0,r.useState)([]),[T,E]=(0,r.useState)("grid"),L=(0,i.useRouter)(),{showSuccess:Z,showError:M,showWarning:R}=(0,c.V)();(0,r.useEffect)(()=>{F(),z()},[v,12,x,u,p]);let F=(0,r.useCallback)(async()=>{try{l(!0);let e=new URLSearchParams({page:v,limit:12,search:x,category:u,status:p}),s=await fetch("".concat("https://fenkparet-backend.onrender.com","/api/admin/products?").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!s.ok)throw Error("Failed to fetch products");let a=await s.json();t(a.products),b(Math.ceil(a.total/12))}catch(e){console.error("Error fetching products:",e),M("Failed to fetch products. Please try again.")}finally{l(!1)}},[v,12,x,u,p,M]),z=(0,r.useCallback)(async()=>{try{let e=await fetch("".concat("https://fenkparet-backend.onrender.com","/api/admin/categories"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){let t=await e.json();P(t.categories)}}catch(e){console.error("Error fetching categories:",e)}},[]),_=async(e,t)=>{try{if(!(await fetch("".concat("https://fenkparet-backend.onrender.com","/api/admin/products/").concat(e,"/").concat(t),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}})).ok)throw Error("Failed to ".concat(t," product"));Z({activate:"Product activated successfully",deactivate:"Product deactivated successfully",delete:"Product deleted successfully",duplicate:"Product duplicated successfully"}[t]),F()}catch(e){console.error("Error ".concat(t," product:"),e),M("Failed to ".concat(t," product. Please try again."))}},I=async e=>{if(0===f.length){R("Please select products to perform bulk action");return}try{if(!(await fetch("".concat("https://fenkparet-backend.onrender.com","/api/admin/products/bulk"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({productIds:f,action:e})})).ok)throw Error("Failed to perform bulk ".concat(e));Z("Bulk ".concat(e," completed successfully")),N([]),F()}catch(t){console.error("Error performing bulk ".concat(e,":"),t),M("Failed to perform bulk ".concat(e,". Please try again."))}},O=e=>{N(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},B=e=>(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat({active:"bg-green-100 text-green-800",inactive:"bg-red-100 text-red-800",draft:"bg-gray-100 text-gray-800","out-of-stock":"bg-yellow-100 text-yellow-800"}[e]||"bg-gray-100 text-gray-800"),children:null==e?void 0:e.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}),D=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),U=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return s?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des produits"}),(0,a.jsx)("p",{className:"text-gray-600",children:"G\xe9rez votre inventaire et catalogue Fenkparet"})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{onClick:()=>L.push("/admin/categories"),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"G\xe9rer les cat\xe9gories"}),(0,a.jsx)("button",{onClick:()=>{C(null),k(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Ajouter un nouveau produit"})]})]}),(0,a.jsx)(d.Z,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-end",children:[(0,a.jsx)("div",{className:"md:col-span-2",children:(0,a.jsx)("input",{type:"text",placeholder:"Rechercher des produits par nom ou SKU...",value:x,onChange:e=>m(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),(0,a.jsx)("div",{children:(0,a.jsxs)("select",{value:u,onChange:e=>h(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"Toutes les cat\xe9gories"}),A.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("select",{value:p,onChange:e=>g(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"Tous les statuts"}),(0,a.jsx)("option",{value:"active",children:"Actif"}),(0,a.jsx)("option",{value:"inactive",children:"Inactif"}),(0,a.jsx)("option",{value:"draft",children:"Brouillon"}),(0,a.jsx)("option",{value:"out-of-stock",children:"Rupture de stock"})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex rounded-lg border border-gray-300 overflow-hidden",children:[(0,a.jsx)("button",{onClick:()=>E("grid"),className:"px-3 py-2 text-sm font-medium ".concat("grid"===T?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),(0,a.jsx)("button",{onClick:()=>E("list"),className:"px-3 py-2 text-sm font-medium ".concat("list"===T?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})})]})})]})}),f.length>0&&(0,a.jsx)(d.Z,{className:"bg-blue-50 p-4 rounded-lg border border-blue-200 dark:bg-blue-900/20 dark:border-blue-900",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm text-blue-700",children:[f.length," product(s) selected"]}),(0,a.jsxs)("div",{className:"space-x-2",children:[(0,a.jsx)("button",{onClick:()=>I("activate"),className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700",children:"Activate"}),(0,a.jsx)("button",{onClick:()=>I("deactivate"),className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700",children:"Deactivate"}),(0,a.jsx)("button",{onClick:()=>I("delete"),className:"bg-gray-600 text-white px-3 py-1 rounded text-sm hover:bg-gray-700",children:"Delete"})]})]})}),"grid"===T?(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e.map(e=>{var t,s;return(0,a.jsxs)(d.Z,{className:"hover:shadow-md transition-shadow",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"aspect-w-1 aspect-h-1 w-full overflow-hidden rounded-t-lg bg-gray-200",children:(0,a.jsx)(n(),{src:(null===(t=e.images)||void 0===t?void 0:t[0])||"/api/placeholder/300/300",alt:e.name,width:300,height:192,className:"h-48 w-full object-cover object-center"})}),(0,a.jsx)("div",{className:"absolute top-2 left-2",children:(0,a.jsx)("input",{type:"checkbox",checked:f.includes(e.id),onChange:()=>O(e.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,a.jsx)("div",{className:"absolute top-2 right-2",children:B(e.status)})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["SKU: ",e.sku]}),(0,a.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:D(e.price)}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Stock: ",e.stock]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Category"}),(0,a.jsx)("p",{className:"text-xs font-medium text-gray-900",children:null===(s=e.category)||void 0===s?void 0:s.name})]})]}),(0,a.jsxs)("div",{className:"mt-4 flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{C(e),k(!0)},className:"flex-1 bg-blue-600 text-white text-xs py-2 px-3 rounded hover:bg-blue-700",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>_(e.id,"duplicate"),className:"bg-gray-600 text-white text-xs py-2 px-3 rounded hover:bg-gray-700",children:"Copy"})]})]})]},e.id)})}):(0,a.jsxs)(d.Z,{className:"overflow-hidden",children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,a.jsx)("input",{type:"checkbox",checked:f.length===e.length&&e.length>0,onChange:()=>{f.length===e.length?N([]):N(e.map(e=>e.id))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>{var t,s;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("input",{type:"checkbox",checked:f.includes(e.id),onChange:()=>O(e.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,a.jsx)(n(),{className:"h-10 w-10 rounded object-cover",src:(null===(t=e.images)||void 0===t?void 0:t[0])||"/api/placeholder/40/40",alt:e.name,width:40,height:40})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["SKU: ",e.sku]})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(null===(s=e.category)||void 0===s?void 0:s.name)||"Uncategorized"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:D(e.price)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,a.jsx)("span",{className:e.stock<10?"text-red-600 font-medium":"",children:e.stock})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:B(e.status)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:U(e.createdAt)}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,a.jsx)("button",{onClick:()=>{C(e),k(!0)},className:"text-blue-600 hover:text-blue-900 mr-3",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>_(e.id,"duplicate"),className:"text-green-600 hover:text-green-900 mr-3",children:"Copy"}),"active"===e.status?(0,a.jsx)("button",{onClick:()=>_(e.id,"deactivate"),className:"text-red-600 hover:text-red-900",children:"Deactivate"}):(0,a.jsx)("button",{onClick:()=>_(e.id,"activate"),className:"text-green-600 hover:text-green-900",children:"Activate"})]})]},e.id)})})]})}),0===e.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No products found"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding your first product."})]})]}),w&&(0,a.jsx)(o.Z,{product:S,categories:A,onClose:()=>k(!1),onSubmit:()=>{k(!1),F()}})]})}},5881:function(e,t,s){s.r(t);var a=s(5893);s(7294);var r=s(4410);t.default=()=>(0,a.jsxs)("div",{className:"container mx-auto p-4",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-theme-primary mb-6",children:"Analyse des Ventes"}),(0,a.jsx)(r.Z,{title:"Statistiques de Ventes",children:(0,a.jsx)("p",{className:"text-theme-secondary",children:"Page d'analyse des ventes en d\xe9veloppement. Contenu \xe0 venir bient\xf4t!"})})]})},3628:function(e,t,s){s.r(t);var a=s(5893),r=s(7294),l=s(1163),n=s(9761),i=s(4410),c=s(6356);t.default=()=>{var e;let[t,s]=(0,r.useState)([]),[d,o]=(0,r.useState)(!0),[x,m]=(0,r.useState)(""),[u,h]=(0,r.useState)("all"),[p,g]=(0,r.useState)("all"),[v,y]=(0,r.useState)("all"),[j,b]=(0,r.useState)(1),[f,N]=(0,r.useState)(1),[w,k]=(0,r.useState)([]),[S,C]=(0,r.useState)(!1),[A,P]=(0,r.useState)(null),[T,E]=(0,r.useState)({total:0,open:0,inProgress:0,resolved:0,avgResponseTime:0});(0,l.useRouter)();let{showSuccess:L,showError:Z,showWarning:M}=(0,n.V)(),R=[{value:"open",label:"Ouvert",color:"red"},{value:"in_progress",label:"En cours",color:"yellow"},{value:"waiting_customer",label:"En attente client",color:"blue"},{value:"resolved",label:"R\xe9solu",color:"green"},{value:"closed",label:"Ferm\xe9",color:"gray"}],F=[{value:"low",label:"Faible",color:"gray"},{value:"medium",label:"Moyenne",color:"yellow"},{value:"high",label:"\xc9lev\xe9e",color:"orange"},{value:"urgent",label:"Urgente",color:"red"}],z=[{value:"technical",label:"Probl\xe8me technique"},{value:"billing",label:"Facturation"},{value:"account",label:"Compte"},{value:"product",label:"Demande produit"},{value:"shipping",label:"Livraison"},{value:"return",label:"Retour/Remboursement"},{value:"other",label:"Autre"}];(0,r.useEffect)(()=>{_(),I()},[j,x,u,p,v]);let _=(0,r.useCallback)(async()=>{try{o(!0);let e=new URLSearchParams({page:j,limit:15,search:x,status:u,priority:p,category:v}),t=await fetch("".concat("https://fenkparet-backend.onrender.com","/api/admin/tickets?").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!t.ok)throw Error("Failed to fetch tickets");let a=await t.json();s(a.tickets),N(Math.ceil(a.total/15))}catch(e){console.error("Error fetching tickets:",e),Z("Failed to fetch tickets. Please try again.")}finally{o(!1)}},[j,15,x,u,p,v,Z]),I=(0,r.useCallback)(async()=>{try{let e=await fetch("".concat("https://fenkparet-backend.onrender.com","/api/admin/tickets/stats"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){let t=await e.json();E(t)}}catch(e){console.error("Error fetching ticket stats:",e)}},[]),O=async(e,t)=>{try{if(!(await fetch("".concat("https://fenkparet-backend.onrender.com","/api/admin/tickets/").concat(e),{method:"PATCH",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({status:t})})).ok)throw Error("Failed to update ticket status");L("Ticket status updated successfully"),_(),I()}catch(e){console.error("Error updating ticket status:",e),Z("Failed to update ticket status. Please try again.")}},B=async(e,t)=>{try{if(!(await fetch("".concat("https://fenkparet-backend.onrender.com","/api/admin/tickets/").concat(e,"/assign"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({assigneeId:t})})).ok)throw Error("Failed to assign ticket");L("Ticket assigned successfully"),_()}catch(e){console.error("Error assigning ticket:",e),Z("Failed to assign ticket. Please try again.")}},D=async e=>{if(0===w.length){M("Veuillez s\xe9lectionner des tickets pour effectuer une action group\xe9e");return}try{if(!(await fetch("".concat("https://fenkparet-backend.onrender.com","/api/admin/tickets/bulk"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({ticketIds:w,action:e})})).ok)throw Error("Failed to perform bulk ".concat(e));L("".concat({close:"fermeture",assign:"assignation",priority_high:"priorit\xe9 \xe9lev\xe9e",priority_low:"priorit\xe9 faible"}[e]||e," group\xe9e termin\xe9e avec succ\xe8s")),k([]),_(),I()}catch(t){console.error("Error performing bulk ".concat(e,":"),t),Z("\xc9chec de l&apos;action group\xe9e ".concat(actionLabels[e]||e,". Veuillez r\xe9essayer."))}},U=async()=>{try{let e=await fetch("".concat("https://fenkparet-backend.onrender.com","/api/admin/tickets/auto-close"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({daysAfterResolved:7})});if(!e.ok)throw Error("Failed to auto-close tickets");let t=await e.json();t.closedCount>0&&(L("".concat(t.closedCount," tickets r\xe9solus ferm\xe9s automatiquement")),_(),I())}catch(e){console.error("Error auto-closing tickets:",e)}},V=e=>{k(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},q=e=>{let t=F.find(t=>t.value===e);return t?(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat({gray:"bg-gray-100 text-gray-800",yellow:"bg-yellow-100 text-yellow-800",orange:"bg-orange-100 text-orange-800",red:"bg-red-100 text-red-800"}[t.color]),children:t.label}):null},H=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return d?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Support Tickets"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage customer support requests and inquiries"})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{onClick:U,className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors",children:"Fermeture automatique"}),(0,a.jsx)("button",{onClick:()=>window.open("".concat("https://fenkparet-backend.onrender.com","/api/admin/tickets/export"),"_blank"),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"Exporter les tickets"}),(0,a.jsx)("button",{onClick:()=>{P(null),C(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Cr\xe9er un ticket"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,a.jsx)(i.Z,{children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 009.586 13H7"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Tickets"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:T.total})]})]})}),(0,a.jsx)(i.Z,{children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Open"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:T.open})]})]})}),(0,a.jsx)(i.Z,{children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"In Progress"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:T.inProgress})]})]})}),(0,a.jsx)(i.Z,{children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Resolved"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:T.resolved})]})]})}),(0,a.jsx)(i.Z,{children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Avg Response"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:(e=T.avgResponseTime)<24?"".concat(Math.round(e),"h"):"".concat(Math.floor(e/24),"d ").concat(Math.round(e%24),"h")})]})]})})]}),(0,a.jsx)(i.Z,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-end",children:[(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"text",placeholder:"Search tickets...",value:x,onChange:e=>m(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),(0,a.jsx)("div",{children:(0,a.jsxs)("select",{value:u,onChange:e=>h(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),R.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("select",{value:p,onChange:e=>g(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"All Priority"}),F.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("select",{value:v,onChange:e=>y(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"All Categories"}),z.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("select",{onChange:e=>{e.target.value&&(h(e.target.value),e.target.value="")},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"",children:"Quick Filters"}),(0,a.jsx)("option",{value:"open",children:"Open Tickets"}),(0,a.jsx)("option",{value:"high",children:"High Priority"}),(0,a.jsx)("option",{value:"urgent",children:"Urgent"}),(0,a.jsx)("option",{value:"unassigned",children:"Unassigned"})]})})]})}),w.length>0&&(0,a.jsx)(i.Z,{className:"bg-blue-50 p-4 rounded-lg border border-blue-200 dark:bg-blue-900/20 dark:border-blue-900",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm text-blue-700",children:[w.length," ticket(s) selected"]}),(0,a.jsx)("div",{className:"space-x-2",children:(0,a.jsxs)("select",{onChange:e=>{e.target.value&&(D(e.target.value),e.target.value="")},className:"text-sm border border-blue-300 rounded px-2 py-1",children:[(0,a.jsx)("option",{value:"",children:"Actions group\xe9es"}),(0,a.jsx)("option",{value:"close",children:"Fermer les tickets"}),(0,a.jsx)("option",{value:"assign",children:"M'assigner"}),(0,a.jsx)("option",{value:"priority_high",children:"Priorit\xe9 \xe9lev\xe9e"}),(0,a.jsx)("option",{value:"priority_low",children:"Priorit\xe9 faible"})]})})]})}),(0,a.jsxs)(i.Z,{className:"overflow-hidden",children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,a.jsx)("input",{type:"checkbox",checked:w.length===t.length&&t.length>0,onChange:()=>{w.length===t.length?k([]):k(t.map(e=>e.id))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ticket"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>{var t;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("input",{type:"checkbox",checked:w.includes(e.id),onChange:()=>V(e.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["#",e.ticketNumber]}),(0,a.jsx)("div",{className:"text-sm text-gray-500 max-w-xs truncate",children:e.subject})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.customer.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.customer.email})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800",children:(null===(t=z.find(t=>t.value===e.category))||void 0===t?void 0:t.label)||e.category})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:q(e.priority)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("select",{value:e.status,onChange:t=>O(e.id,t.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:R.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.assignee?(0,a.jsx)("span",{className:"text-blue-600",children:e.assignee.name}):(0,a.jsx)("button",{onClick:()=>B(e.id,"current-admin-id"),className:"text-gray-400 hover:text-blue-600 text-xs",children:"Assign to me"})})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:H(e.createdAt)}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,a.jsx)("button",{onClick:()=>{P(e),C(!0)},className:"text-blue-600 hover:text-blue-900 mr-3",children:"View"}),(0,a.jsx)("button",{onClick:()=>O(e.id,"resolved"),className:"text-green-600 hover:text-green-900 mr-3",children:"R\xe9soudre"}),(0,a.jsx)("button",{onClick:()=>O(e.id,"closed"),className:"text-gray-600 hover:text-gray-900",children:"Fermer"})]})]},e.id)})})]})}),0===t.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 009.586 13H7"})}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No tickets found"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"All caught up! No support tickets at the moment."})]})]}),S&&A&&(0,a.jsx)(c.Z,{ticket:A,onClose:()=>C(!1),onStatusUpdate:e=>{O(A.id,e),C(!1)}})]})}},5736:function(e,t,s){s.r(t);var a=s(5893),r=s(7294),l=s(6250),n=s(9164),i=s(9761),c=s(4410);t.default=()=>{let[e,t]=(0,r.useState)([]),[s,d]=(0,r.useState)(!0),[o,x]=(0,r.useState)(""),[m,u]=(0,r.useState)("all"),[h,p]=(0,r.useState)("all"),[g,v]=(0,r.useState)(1),[y,j]=(0,r.useState)(1),[b,f]=(0,r.useState)(null),[N,w]=(0,r.useState)(!1),{showSuccess:k,showError:S,showWarning:C}=(0,i.V)(),A=(0,r.useCallback)(async()=>{try{d(!0);let e=new URLSearchParams({page:g,limit:10,search:o,role:m,status:h}),s=await fetch("".concat("https://fenkparet-backend.onrender.com","/api/admin/users?").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},mode:"cors"});if(!s.ok)throw Error("Failed to fetch users");let a=await s.json();t(a.users),j(Math.ceil(a.total/10))}catch(e){console.error("Error fetching users:",e),S("Failed to fetch users. Please try again.")}finally{d(!1)}},[g,o,m,h,S]);(0,r.useEffect)(()=>{A()},[A]);let P=e=>{f(e),w(!0)},T=async e=>{if(window.confirm("Are you sure you want to delete this user?"))try{if(!(await fetch("".concat("https://fenkparet-backend.onrender.com","/api/admin/users/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).ok)throw Error("Failed to delete user");k("User deleted successfully"),A()}catch(e){console.error("Error deleting user:",e),S("Failed to delete user. Please try again.")}},E=e=>(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat({active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",pending:"bg-yellow-100 text-yellow-800"}[e]||"bg-gray-100"),children:e});return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,a.jsx)(l.WY8,{className:"mr-3"}),"User Management"]}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage all users in the system"})]}),(0,a.jsxs)("button",{onClick:()=>{f(null),w(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[(0,a.jsx)(l.OvN,{className:"mr-2"}),"Add User"]})]}),(0,a.jsx)(c.Z,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4",children:[(0,a.jsx)("div",{className:"md:col-span-2",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(l.jRj,{className:"absolute top-1/2 left-3 -translate-y-1/2 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search by name or email...",value:o,onChange:e=>x(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("select",{value:m,onChange:e=>u(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"All Roles"}),(0,a.jsx)("option",{value:"admin",children:"Admin"}),(0,a.jsx)("option",{value:"customer",children:"Customer"}),(0,a.jsx)("option",{value:"moderator",children:"Moderator"})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"All Statuses"}),(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"inactive",children:"Inactive"}),(0,a.jsx)("option",{value:"pending",children:"Pending"})]})})]})}),(0,a.jsx)(c.Z,{className:"overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s?(0,a.jsx)("tr",{children:(0,a.jsxs)("td",{colSpan:"6",className:"text-center py-12",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Loading users..."})]})}):e.length>0?e.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.email})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-500 capitalize",children:e.role})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:E(e.status)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.lastLogin?new Date(e.lastLogin).toLocaleString():"N/A"}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,a.jsx)("button",{onClick:()=>P(e),className:"text-blue-600 hover:text-blue-900 mr-3",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>T(e.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},e.id)):(0,a.jsx)("tr",{children:(0,a.jsxs)("td",{colSpan:"6",className:"text-center py-12",children:[(0,a.jsx)(l.WY8,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No users found"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"No users match the current filters."})]})})})]})})}),y>1&&(0,a.jsxs)(c.Z,{className:"px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[(0,a.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,a.jsx)("button",{onClick:()=>v(e=>Math.max(e-1,1)),disabled:1===g,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),(0,a.jsx)("button",{onClick:()=>v(e=>Math.min(e+1,y)),disabled:g===y,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),(0,a.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing page ",(0,a.jsx)("span",{className:"font-medium",children:g})," of"," ",(0,a.jsx)("span",{className:"font-medium",children:y})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[(0,a.jsx)("button",{onClick:()=>v(e=>Math.max(e-1,1)),disabled:1===g,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),Array.from({length:y},(e,t)=>t+1).map(e=>(0,a.jsx)("button",{onClick:()=>v(e),className:"relative inline-flex items-center px-4 py-2 border text-sm font-medium ".concat(g===e?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"),children:e},e)),(0,a.jsx)("button",{onClick:()=>v(e=>Math.min(e+1,y)),disabled:g===y,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})})]})]}),N&&(0,a.jsx)(n.Z,{user:b,onClose:()=>w(!1),onSubmit:()=>{w(!1),A()}})]})}}}]);