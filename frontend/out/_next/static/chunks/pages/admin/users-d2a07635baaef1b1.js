(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[635],{2257:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/users",function(){return s(5736)}])},9164:function(e,r,s){"use strict";var a=s(567),t=s(4932),o=s(5893),n=s(7294);s(4410);var d=s(9761);r.Z=e=>{let{user:r,onClose:s,onSubmit:l}=e,[i,c]=(0,n.useState)({name:(null==r?void 0:r.name)||"",email:(null==r?void 0:r.email)||"",phone:(null==r?void 0:r.phone)||"",role:(null==r?void 0:r.role)||"customer",status:(null==r?void 0:r.status)||"active",password:"",confirmPassword:""}),[m,u]=(0,n.useState)({}),[p,x]=(0,n.useState)(!1),{showSuccess:h,showError:b}=(0,d.V)();(0,n.useEffect)(()=>{r&&c({name:r.name||"",email:r.email||"",phone:r.phone||"",role:r.role||"customer",status:r.status||"active",password:"",confirmPassword:""})},[r]);let f=e=>{let{name:r,value:s}=e.target;c(e=>(0,t._)((0,a._)({},e),{[r]:s})),m[r]&&u(e=>(0,t._)((0,a._)({},e),{[r]:""}))},g=()=>{let e={};return i.name.trim()||(e.name="Name is required"),i.email.trim()?/\S+@\S+\.\S+/.test(i.email)||(e.email="Email is invalid"):e.email="Email is required",r||i.password?r||!i.password||(i.password.length<8?e.password="Le mot de passe doit contenir au moins 8 caract\xe8res.":/[A-Z]/.test(i.password)||(e.password="Le mot de passe doit contenir au moins une lettre majuscule.")):e.password="Password is required",r||i.password===i.confirmPassword||(e.confirmPassword="Passwords do not match"),u(e),0===Object.keys(e).length},w=async e=>{if(e.preventDefault(),g())try{x(!0);let e=(0,a._)({},i);r&&delete e.password,delete e.confirmPassword;let s=r?"".concat("https://fenkparet-backend.onrender.com","/api/admin/users/").concat(r.id):"".concat("https://fenkparet-backend.onrender.com","/api/admin/users");if(!(await fetch(s,{method:r?"PUT":"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to ".concat(r?"update":"create"," user"));h("User ".concat(r?"updated":"created"," successfully")),l()}catch(e){console.error("Error saving user:",e),b("Failed to ".concat(r?"update":"create"," user. Please try again."))}finally{x(!1)}};return(0,o.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,o.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white max-h-[80vh] overflow-y-auto",children:(0,o.jsxs)("div",{className:"mt-3",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:r?"Edit User":"Add New User"}),(0,o.jsx)("button",{type:"button",onClick:s,className:"text-gray-400 hover:text-gray-600",children:(0,o.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,o.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),(0,o.jsx)("input",{type:"text",name:"name",value:i.name,onChange:f,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(m.name?"border-red-300":"border-gray-300"),placeholder:"Enter full name"}),m.name&&(0,o.jsx)("p",{className:"text-red-500 text-xs mt-1",children:m.name})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,o.jsx)("input",{type:"email",name:"email",value:i.email,onChange:f,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(m.email?"border-red-300":"border-gray-300"),placeholder:"Enter email address"}),m.email&&(0,o.jsx)("p",{className:"text-red-500 text-xs mt-1",children:m.email})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),(0,o.jsx)("input",{type:"tel",name:"phone",value:i.phone,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter phone number"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),(0,o.jsxs)("select",{name:"role",value:i.role,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,o.jsx)("option",{value:"customer",children:"Customer"}),(0,o.jsx)("option",{value:"admin",children:"Admin"}),(0,o.jsx)("option",{value:"moderator",children:"Moderator"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,o.jsxs)("select",{name:"status",value:i.status,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,o.jsx)("option",{value:"active",children:"Active"}),(0,o.jsx)("option",{value:"inactive",children:"Inactive"}),(0,o.jsx)("option",{value:"pending",children:"Pending"})]})]}),!r&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password *"}),(0,o.jsx)("input",{type:"password",name:"password",value:i.password,onChange:f,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(m.password?"border-red-300":"border-gray-300"),placeholder:"Enter password"}),m.password&&(0,o.jsx)("p",{className:"text-red-500 text-xs mt-1",children:m.password})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password *"}),(0,o.jsx)("input",{type:"password",name:"confirmPassword",value:i.confirmPassword,onChange:f,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(m.confirmPassword?"border-red-300":"border-gray-300"),placeholder:"Confirm password"}),m.confirmPassword&&(0,o.jsx)("p",{className:"text-red-500 text-xs mt-1",children:m.confirmPassword})]})]})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[(0,o.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",disabled:p,children:"Cancel"}),(0,o.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700 disabled:opacity-50",disabled:p,children:p?"Saving...":r?"Update User":"Create User"})]})]})]})})})}}},function(e){e.O(0,[328,216,58,888,179],function(){return e(e.s=2257)}),_N_E=e.O()}]);