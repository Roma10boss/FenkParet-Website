(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[713],{7928:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/tickets",function(){return s(6394)}])},6394:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var r=s(5893),a=s(7294),l=s(1163),i=s(9761),n=s(4410),o=s(567),c=s(4932),d=e=>{var t,s;let{ticket:l,onClose:n,onSubmit:d}=e,[u,x]=(0,a.useState)({subject:(null==l?void 0:l.subject)||"",description:(null==l?void 0:l.description)||"",customerName:(null==l?void 0:null===(t=l.customer)||void 0===t?void 0:t.name)||"",customerEmail:(null==l?void 0:null===(s=l.customer)||void 0===s?void 0:s.email)||"",status:(null==l?void 0:l.status)||"open",priority:(null==l?void 0:l.priority)||"low",category:(null==l?void 0:l.category)||"other",assignedTo:(null==l?void 0:l.assignedTo)||""}),[m,h]=(0,a.useState)({}),[p,g]=(0,a.useState)(!1),{showSuccess:b,showError:j}=(0,i.V)();(0,a.useEffect)(()=>{if(l){var e,t;x({subject:l.subject||"",description:l.description||"",customerName:(null===(e=l.customer)||void 0===e?void 0:e.name)||"",customerEmail:(null===(t=l.customer)||void 0===t?void 0:t.email)||"",status:l.status||"open",priority:l.priority||"low",category:l.category||"other",assignedTo:l.assignedTo||""})}},[l]);let v=e=>{let{name:t,value:s}=e.target;x(e=>(0,c._)((0,o._)({},e),{[t]:s})),m[t]&&h(e=>(0,c._)((0,o._)({},e),{[t]:""}))},y=()=>{let e={};return u.subject.trim()||(e.subject="Subject is required"),u.description.trim()||(e.description="Description is required"),u.customerName.trim()||(e.customerName="Customer name is required"),u.customerEmail.trim()?/\S+@\S+\.\S+/.test(u.customerEmail)||(e.customerEmail="Customer email is invalid"):e.customerEmail="Customer email is required",h(e),0===Object.keys(e).length},f=async e=>{if(e.preventDefault(),y())try{g(!0);let e=(0,o._)({},u),t=l?"/api/admin/tickets/".concat(l.id):"/api/admin/tickets";if(!(await fetch(t,{method:l?"PUT":"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to ".concat(l?"update":"create"," ticket"));b("Ticket ".concat(l?"updated":"created"," successfully")),d()}catch(e){console.error("Error saving ticket:",e),j("Failed to ".concat(l?"update":"create"," ticket. Please try again."))}finally{g(!1)}};return(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,r.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-4/5 lg:w-3/4 xl:w-2/3 shadow-lg rounded-md bg-white max-h-[80vh] overflow-y-auto",children:(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:l?"Edit Ticket":"Create New Ticket"}),(0,r.jsx)("button",{type:"button",onClick:n,className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject *"}),(0,r.jsx)("input",{type:"text",name:"subject",value:u.subject,onChange:v,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(m.subject?"border-red-300":"border-gray-300"),placeholder:"Enter ticket subject"}),m.subject&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:m.subject})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),(0,r.jsx)("textarea",{name:"description",value:u.description,onChange:v,rows:4,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(m.description?"border-red-300":"border-gray-300"),placeholder:"Enter detailed description of the issue"}),m.description&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:m.description})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name *"}),(0,r.jsx)("input",{type:"text",name:"customerName",value:u.customerName,onChange:v,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(m.customerName?"border-red-300":"border-gray-300"),placeholder:"Customer's full name"}),m.customerName&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:m.customerName})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Email *"}),(0,r.jsx)("input",{type:"email",name:"customerEmail",value:u.customerEmail,onChange:v,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(m.customerEmail?"border-red-300":"border-gray-300"),placeholder:"Customer's email address"}),m.customerEmail&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:m.customerEmail})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,r.jsxs)("select",{name:"status",value:u.status,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"open",children:"Open"}),(0,r.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,r.jsx)("option",{value:"waiting_customer",children:"Waiting for Customer"}),(0,r.jsx)("option",{value:"resolved",children:"Resolved"}),(0,r.jsx)("option",{value:"closed",children:"Closed"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),(0,r.jsxs)("select",{name:"priority",value:u.priority,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"low",children:"Low"}),(0,r.jsx)("option",{value:"medium",children:"Medium"}),(0,r.jsx)("option",{value:"high",children:"High"}),(0,r.jsx)("option",{value:"urgent",children:"Urgent"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,r.jsxs)("select",{name:"category",value:u.category,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"technical",children:"Technical Issue"}),(0,r.jsx)("option",{value:"billing",children:"Billing"}),(0,r.jsx)("option",{value:"account",children:"Account"}),(0,r.jsx)("option",{value:"product",children:"Product Inquiry"}),(0,r.jsx)("option",{value:"shipping",children:"Shipping"}),(0,r.jsx)("option",{value:"return",children:"Return/Refund"}),(0,r.jsx)("option",{value:"other",children:"Other"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assigned To"}),(0,r.jsx)("input",{type:"text",name:"assignedTo",value:u.assignedTo,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Agent Name or ID"})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[(0,r.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",disabled:p,children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700 disabled:opacity-50",disabled:p,children:p?"Saving...":l?"Update Ticket":"Create Ticket"})]})]})]})})})},u=()=>{var e;let[t,s]=(0,a.useState)([]),[o,c]=(0,a.useState)(!0),[u,x]=(0,a.useState)(""),[m,h]=(0,a.useState)("all"),[p,g]=(0,a.useState)("all"),[b,j]=(0,a.useState)("all"),[v,y]=(0,a.useState)(1),[f,N]=(0,a.useState)(1),[k,w]=(0,a.useState)([]),[C,S]=(0,a.useState)(!1),[T,E]=(0,a.useState)(null),[P,A]=(0,a.useState)({total:0,open:0,inProgress:0,resolved:0,avgResponseTime:0});(0,l.useRouter)();let{showSuccess:_,showError:L,showWarning:B}=(0,i.V)(),M=[{value:"open",label:"Open",color:"red"},{value:"in_progress",label:"In Progress",color:"yellow"},{value:"waiting_customer",label:"Waiting for Customer",color:"blue"},{value:"resolved",label:"Resolved",color:"green"},{value:"closed",label:"Closed",color:"gray"}],O=[{value:"low",label:"Low",color:"gray"},{value:"medium",label:"Medium",color:"yellow"},{value:"high",label:"High",color:"orange"},{value:"urgent",label:"Urgent",color:"red"}],I=[{value:"technical",label:"Technical Issue"},{value:"billing",label:"Billing"},{value:"account",label:"Account"},{value:"product",label:"Product Inquiry"},{value:"shipping",label:"Shipping"},{value:"return",label:"Return/Refund"},{value:"other",label:"Other"}];(0,a.useEffect)(()=>{R(),z()},[R,z]);let R=(0,a.useCallback)(async()=>{try{c(!0);let e=new URLSearchParams({page:v,limit:15,search:u,status:m,priority:p,category:b}),t=await fetch("/api/admin/tickets?".concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!t.ok)throw Error("Failed to fetch tickets");let r=await t.json();s(r.tickets),N(Math.ceil(r.total/15))}catch(e){console.error("Error fetching tickets:",e),L("Failed to fetch tickets. Please try again.")}finally{c(!1)}},[v,15,u,m,p,b,L]),z=(0,a.useCallback)(async()=>{try{let e=await fetch("/api/admin/tickets/stats",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){let t=await e.json();A(t)}}catch(e){console.error("Error fetching ticket stats:",e)}},[]),F=async(e,t)=>{try{if(!(await fetch("/api/admin/tickets/".concat(e),{method:"PATCH",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({status:t})})).ok)throw Error("Failed to update ticket status");_("Ticket status updated successfully"),R(),z()}catch(e){console.error("Error updating ticket status:",e),L("Failed to update ticket status. Please try again.")}},H=async(e,t)=>{try{if(!(await fetch("/api/admin/tickets/".concat(e,"/assign"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({assigneeId:t})})).ok)throw Error("Failed to assign ticket");_("Ticket assigned successfully"),R()}catch(e){console.error("Error assigning ticket:",e),L("Failed to assign ticket. Please try again.")}},U=async e=>{if(0===k.length){B("Please select tickets to perform bulk action");return}try{if(!(await fetch("/api/admin/tickets/bulk",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({ticketIds:k,action:e})})).ok)throw Error("Failed to perform bulk ".concat(e));_("Bulk ".concat(e," completed successfully")),w([]),R(),z()}catch(t){console.error("Error performing bulk ".concat(e,":"),t),L("Failed to perform bulk ".concat(e,". Please try again."))}},W=e=>{w(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},q=e=>{let t=O.find(t=>t.value===e);return t?(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat({gray:"bg-gray-100 text-gray-800",yellow:"bg-yellow-100 text-yellow-800",orange:"bg-orange-100 text-orange-800",red:"bg-red-100 text-red-800"}[t.color]),children:t.label}):null},Z=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return o?(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Support Tickets"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Manage customer support requests and inquiries"})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)("button",{onClick:()=>window.open("/api/admin/tickets/export","_blank"),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"Export Tickets"}),(0,r.jsx)("button",{onClick:()=>{E(null),S(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Create Ticket"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,r.jsx)(n.Z,{children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 009.586 13H7"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Tickets"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:P.total})]})]})}),(0,r.jsx)(n.Z,{children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Open"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:P.open})]})]})}),(0,r.jsx)(n.Z,{children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"In Progress"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:P.inProgress})]})]})}),(0,r.jsx)(n.Z,{children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Resolved"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:P.resolved})]})]})}),(0,r.jsx)(n.Z,{children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Avg Response"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:(e=P.avgResponseTime)<24?"".concat(Math.round(e),"h"):"".concat(Math.floor(e/24),"d ").concat(Math.round(e%24),"h")})]})]})})]}),(0,r.jsx)(n.Z,{children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-end",children:[(0,r.jsx)("div",{children:(0,r.jsx)("input",{type:"text",placeholder:"Search tickets...",value:u,onChange:e=>x(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),(0,r.jsx)("div",{children:(0,r.jsxs)("select",{value:m,onChange:e=>h(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"all",children:"All Status"}),M.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))]})}),(0,r.jsx)("div",{children:(0,r.jsxs)("select",{value:p,onChange:e=>g(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"all",children:"All Priority"}),O.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))]})}),(0,r.jsx)("div",{children:(0,r.jsxs)("select",{value:b,onChange:e=>j(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"all",children:"All Categories"}),I.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))]})}),(0,r.jsx)("div",{children:(0,r.jsxs)("select",{onChange:e=>{e.target.value&&(h(e.target.value),e.target.value="")},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"",children:"Quick Filters"}),(0,r.jsx)("option",{value:"open",children:"Open Tickets"}),(0,r.jsx)("option",{value:"high",children:"High Priority"}),(0,r.jsx)("option",{value:"urgent",children:"Urgent"}),(0,r.jsx)("option",{value:"unassigned",children:"Unassigned"})]})})]})}),k.length>0&&(0,r.jsx)(n.Z,{className:"bg-blue-50 p-4 rounded-lg border border-blue-200 dark:bg-blue-900/20 dark:border-blue-900",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"text-sm text-blue-700",children:[k.length," ticket(s) selected"]}),(0,r.jsx)("div",{className:"space-x-2",children:(0,r.jsxs)("select",{onChange:e=>{e.target.value&&(U(e.target.value),e.target.value="")},className:"text-sm border border-blue-300 rounded px-2 py-1",children:[(0,r.jsx)("option",{value:"",children:"Bulk Actions"}),(0,r.jsx)("option",{value:"close",children:"Close Tickets"}),(0,r.jsx)("option",{value:"assign",children:"Assign to Me"}),(0,r.jsx)("option",{value:"priority_high",children:"Set High Priority"}),(0,r.jsx)("option",{value:"priority_low",children:"Set Low Priority"})]})})]})}),(0,r.jsxs)(n.Z,{className:"overflow-hidden",children:[(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,r.jsx)("input",{type:"checkbox",checked:k.length===t.length&&t.length>0,onChange:()=>{k.length===t.length?w([]):w(t.map(e=>e.id))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ticket"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,r.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>{var t;return(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("input",{type:"checkbox",checked:k.includes(e.id),onChange:()=>W(e.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["#",e.ticketNumber]}),(0,r.jsx)("div",{className:"text-sm text-gray-500 max-w-xs truncate",children:e.subject})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.customer.name}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.customer.email})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800",children:(null===(t=I.find(t=>t.value===e.category))||void 0===t?void 0:t.label)||e.category})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:q(e.priority)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("select",{value:e.status,onChange:t=>F(e.id,t.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:M.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-sm text-gray-900",children:e.assignee?(0,r.jsx)("span",{className:"text-blue-600",children:e.assignee.name}):(0,r.jsx)("button",{onClick:()=>H(e.id,"current-admin-id"),className:"text-gray-400 hover:text-blue-600 text-xs",children:"Assign to me"})})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Z(e.createdAt)}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,r.jsx)("button",{onClick:()=>{E(e),S(!0)},className:"text-blue-600 hover:text-blue-900 mr-3",children:"View"}),(0,r.jsx)("button",{onClick:()=>F(e.id,"resolved"),className:"text-green-600 hover:text-green-900",children:"Resolve"})]})]},e.id)})})]})}),0===t.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 009.586 13H7"})}),(0,r.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No tickets found"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"All caught up! No support tickets at the moment."})]})]}),C&&T&&(0,r.jsx)(d,{ticket:T,onClose:()=>S(!1),onStatusUpdate:e=>{F(T.id,e),S(!1)}})]})}}},function(e){e.O(0,[58,888,774,179],function(){return e(e.s=7928)}),_N_E=e.O()}]);